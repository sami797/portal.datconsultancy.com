"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[2542],{

/***/ 2542:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ SiteSettings_UserRating)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
// EXTERNAL MODULE: ./src/Components/Organisms/Skeletons/index.tsx
var Skeletons = __webpack_require__(70619);
// EXTERNAL MODULE: ./node_modules/antd/es/typography/index.js + 15 modules
var typography = __webpack_require__(30377);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./node_modules/antd/es/popconfirm/index.js + 1 modules
var popconfirm = __webpack_require__(56231);
// EXTERNAL MODULE: ./node_modules/antd/es/card/index.js + 3 modules
var card = __webpack_require__(2557);
// EXTERNAL MODULE: ./node_modules/antd/es/dropdown/index.js
var dropdown = __webpack_require__(57811);
// EXTERNAL MODULE: ./node_modules/antd/es/space/index.js + 1 modules
var space = __webpack_require__(80737);
// EXTERNAL MODULE: ./node_modules/antd/es/rate/index.js + 5 modules
var rate = __webpack_require__(56350);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js
var DeleteOutlined = __webpack_require__(78433);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DownOutlined.js
var DownOutlined = __webpack_require__(73022);
// EXTERNAL MODULE: ./src/helpers/dateHandler.ts
var dateHandler = __webpack_require__(98933);
// EXTERNAL MODULE: ./src/Modules/UserRating/index.ts
var UserRating = __webpack_require__(79888);
;// ./src/Components/Organisms/SiteSettings/UserRating/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const styles_module = ({"rolePermissionAsideContainer":"styles_rolePermissionAsideContainer__84Onb","active":"styles_active__xftS-","sideBarHeading":"styles_sideBarHeading__CiU09","adminNavPanelsWrap":"styles_adminNavPanelsWrap__dm1bD","textWithIcon":"styles_textWithIcon__q7ylS","textWithIcon__rev":"styles_textWithIcon__rev__jT5gb","collapse":"styles_collapse__89P+S","collapse__normal":"styles_collapse__normal__E+EYo","divider":"styles_divider__3Ztgi","translated":"styles_translated__U3ZNB","animateTranslation":"styles_animateTranslation__2OUsM","__translate":"styles___translate__fW+JC","negAnimateTranslation":"styles_negAnimateTranslation__DMJfK","__negTranslate":"styles___negTranslate__rrFZg","header":"styles_header__ACuHb","content":"styles_content__0iuJ0","contentHeader":"styles_contentHeader__MabRY","content__layout":"styles_content__layout__xR12e","content__layout__header":"styles_content__layout__header__qsHJt","content__layout__content":"styles_content__layout__content__QmoeH","content__layout__footer":"styles_content__layout__footer__LCzYp","content__layout__footer__button":"styles_content__layout__footer__button__vCGfK","actions":"styles_actions__0GwBH","bg__red":"styles_bg__red__Qj-zz","form":"styles_form__vEQm6","footer":"styles_footer__konEY","opacity_6":"styles_opacity_6__Yd5OP","dropdown":"styles_dropdown__uo-ic","overlay":"styles_overlay__rFF1f","overlay_item":"styles_overlay_item__gNYzs","overlay_popConfirm":"styles_overlay_popConfirm__t+LFl","disabledButton":"styles_disabledButton__8VT3N"});
// EXTERNAL MODULE: ./src/Components/Icons/index.tsx + 58 modules
var Icons = __webpack_require__(63668);
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/SiteSettings/UserRating/table-columns.tsx
// import { UserRatingHelpType, UserRatingStatusString } from "../../../../helpers/commonEnums";
const{Paragraph}=typography/* default */.A;const ActionComponent=props=>{const{record,reloadTableData,permissions:{deleteUserRating}}=props;const[actionState,setActionState]=(0,react.useState)({confirmLoading:false,openPopConfirm:false});const module=(0,react.useMemo)(()=>new UserRating/* UserRatingModule */.l(),[]);const handleDelete=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:true}));if(deleteUserRating===false){message/* default */.Ay.error("You don't have permission to delete this record, please contact your administrator.");setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false,confirmLoading:false}));return;}module.deleteRecord(record.id).then(res=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false,confirmLoading:false}));reloadTableData();}).catch(err=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:false}));});};const showPopconfirm=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:true}));};return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.actions,children:/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{open:actionState.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:handleDelete,onCancel:()=>setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false})),okButtonProps:{loading:actionState.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:visible=>{if(!visible){setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));}},children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{className:styles_module.bg__red,onClick:showPopconfirm})})});};const StatusComponent=props=>{const{record,status,reloadTableData,permissions:{updateUserRating}}=props;const[messageApi,contextHolder]=message/* default */.Ay.useMessage();const module=(0,react.useMemo)(()=>new UserRating/* UserRatingModule */.l(),[]);const openMessage=data=>{messageApi.open({key:data.key,type:data.type,content:data.content,duration:data.type==="loading"?0:2});};// controls the dropdown visibility
const[visible,setVisible]=(0,react.useState)(false);// handle dropdown menu visibility change event
const onVisibleChange=flag=>{setVisible(flag);};const onStatusChange=status=>{if(record!==null&&record!==void 0&&record.id&&updateUserRating===true){openMessage({key:"update",type:"loading",content:"Updating..."});module.updateRecord({status:status},record===null||record===void 0?void 0:record.id).then(res=>{var _res$data;if(res!==null&&res!==void 0&&(_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.data){var _res$data2;openMessage({key:"update",type:"success",content:res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.message});setVisible(!visible);reloadTableData();}}).catch(err=>{var _err$response,_err$response$data;openMessage({key:"update",type:"error",content:err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message});});}else{openMessage({key:"update",type:"error",content:"You don't have permission to change status"});}};const overlay=/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{className:"".concat(styles_module.overlay," pa-2"),children:[contextHolder,Object.entries([]).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.overlay_item,onClick:()=>{if(status!==Number(value)&&updateUserRating===true){const selectedStatus=Number(value);onStatusChange(selectedStatus);}},children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:status===Number(value)?styles_module.disabledButton:"",children:(0,common/* capitalize */.ZH)(key)})},"user-status-".concat(key));})]});return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(dropdown/* default */.A,{dropdownRender:()=>overlay,trigger:updateUserRating===true?["click"]:[],open:updateUserRating===true?visible:false,onOpenChange:onVisibleChange,className:styles_module.dropdown,children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(space/* default */.A,{style:{backgroundColor:"#f2f2f2",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.8rem",display:"flex",width:"100%",justifyContent:"space-between"},children:updateUserRating===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(DownOutlined/* default */.A,{})})})})});};function TableComponent(props){const{tableData,tableLoading,emptyText,reloadTableData,onEditIconClick}=props;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const columns=[{title:"S.No",dataIndex:"index",key:"index",render:(_text,_record,index)=>index+1,width:"60px"},{title:'Rated By',dataIndex:"ratedBy",key:"ratedBy",render:(_ratedBy,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"d-flex",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"my-auto",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",children:"".concat(record.name)}),(record===null||record===void 0?void 0:record.email)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Paragraph,{title:record.email,ellipsis:{rows:1,expandable:false},copyable:{text:record.email},className:"font-size-xs color-dark-sub mb-0 mt-1",children:record.email}),(record===null||record===void 0?void 0:record.phone)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Paragraph,{title:"+".concat(record.phoneCode).concat(record.phone),ellipsis:{rows:1,expandable:false},copyable:{text:"+".concat(record.phoneCode).concat(record.phone)},className:"font-size-xs color-dark-sub mb-0 mt-1",children:"+".concat(record.phoneCode).concat(record.phone)}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex mt-1",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* CalenderIcon */.e$,{className:"mr-2"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:"".concat((0,dateHandler/* convertDate */.ic)(record.addedDate,"dd MM yy"))})]})]})}),width:"13%"},{title:'Rated To',dataIndex:"user",key:"user",render:user=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"d-flex",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"my-auto",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",children:"Agent: ".concat(user.firstName," ").concat(user.lastName)}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:"Org: ".concat(user.Organization.name)}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:"UserID: ".concat(user.id)})]})}),width:"15%"},{title:'Message',dataIndex:"message",key:"message",render:message=>/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",children:message}),width:"15%"},{title:'Rating',dataIndex:"rating",key:"rating",render:rating=>/*#__PURE__*/(0,jsx_runtime.jsx)(rate/* default */.A,{defaultValue:rating,allowHalf:true,disabled:true,style:{fontSize:"16px"}})},{title:'Property Link',dataIndex:"propertyLink",key:"propertyLink",className:"text-center",render:propertyLink=>/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("a",{href:propertyLink,target:"_blank",rel:"noreferrer",title:"View Property On Main Website (Users Website)",children:["View",/*#__PURE__*/(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",height:"16px",width:"17px",className:"ml-1",children:/*#__PURE__*/(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})})},{title:'Reference Number',dataIndex:"referenceNumber",key:"referenceNumber",className:'text-center',render:referenceNumber=>/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",children:referenceNumber})},{title:'Status',dataIndex:"status",key:"status",className:'text-center',render:(status,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(StatusComponent,{status:status,record:record,reloadTableData:reloadTableData,permissions:permissions})},// {
//     title: 'Help Type',
//     dataIndex: "helpType",
//     key: "helpType",
//     className: 'text-center',
//     render: (helpType: number) => (
//         <Typography color="dark-main" size="sm">
//             {UserRatingHelpType[helpType]}
//         </Typography>
//     ),
// },
{title:"Actions",dataIndex:"actions",key:"actions",render:(text,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(ActionComponent,{record:record,onEditIconClick:onEditIconClick,reloadTableData:reloadTableData,permissions:permissions})}];return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{sticky:true,dataSource:tableData,columns:columns,pagination:false,scroll:{x:991},loading:tableLoading,rowKey:record=>"user-rating-".concat(record.id),locale:{emptyText:emptyText}})});}
// EXTERNAL MODULE: ./node_modules/antd/es/select/index.js + 30 modules
var es_select = __webpack_require__(97554);
// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 18 modules
var es_form = __webpack_require__(10678);
// EXTERNAL MODULE: ./node_modules/antd/es/input-number/index.js + 10 modules
var input_number = __webpack_require__(40202);
// EXTERNAL MODULE: ./src/Components/Organisms/SiteSettings/Common/styles.module.scss
var Common_styles_module = __webpack_require__(41394);
// EXTERNAL MODULE: ./src/Components/Atoms/ServerErrorHandler/index.tsx
var ServerErrorHandler = __webpack_require__(13321);
// EXTERNAL MODULE: ./src/helpers/error-handler.ts
var error_handler = __webpack_require__(38266);
// EXTERNAL MODULE: ./src/Modules/Country/index.ts
var Country = __webpack_require__(83584);
;// ./src/Components/Organisms/SiteSettings/UserRating/modal.tsx
const{Option}=es_select/* default */.A;const UserRatingModal=props=>{var _recordData$data,_recordData$data2,_recordData$data3;const{openModal,onCancel,type,record,reloadTableData}=props;const[form]=es_form/* default */.A.useForm();const module=(0,react.useMemo)(()=>new UserRating/* UserRatingModule */.l(),[]);const countryModule=(0,react.useMemo)(()=>new Country/* CountryModule */.j(),[]);const[recordData,setRecordData]=(0,react.useState)();const[countries,setCountries]=(0,react.useState)([]);const handleErrors=err=>{const error=(0,error_handler/* errorHandler */.r)(err);if(typeof error.message=="string"){setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:error.message}));}else{let errData=(0,ServerErrorHandler/* HandleServerErrors */.p)(error.message,[]);form.setFields(errData);setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));}};const handleAlertClose=()=>{setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));};const getDataById=(0,react.useCallback)(()=>{module.getRecordById(record).then(res=>{if(res.data&&res.data.data){form.setFieldsValue((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({translations:res.data.data.localization},res.data.data),{},{isPublished:res.data.data.isPublished}));setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},res.data),{},{loading:false}));}}).catch(err=>{handleErrors(err);});},[form,record,module]);const getCountryList=(0,react.useCallback)(()=>{countryModule.getAvailableRecords().then(res=>{if(res.data&&res.data.data){setCountries(res.data.data);}});},[countryModule]);(0,react.useEffect)(()=>{if(type==="edit"){setRecordData({loading:true});// fetch data by slug or id
getDataById();// fetch the countries
getCountryList();}else{form.resetFields();}},[openModal,type,form,getDataById,getCountryList]);const onFinish=formValues=>{setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{buttonLoading:true}));formValues.phoneCode=(formValues===null||formValues===void 0?void 0:formValues.phoneCode)||"971";formValues.phone=String(formValues===null||formValues===void 0?void 0:formValues.phone)||"";if(type==="edit"){module.updateRecord(formValues,recordData===null||recordData===void 0?void 0:recordData.data.id).then(res=>{var _res$data;if(res!==null&&res!==void 0&&(_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.data){reloadTableData();}onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));});}else{module.createRecord(formValues).then(res=>{reloadTableData();onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));});}};return/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomModal */.jo,{visible:openModal,closable:true,onCancel:onCancel,titleText:type==="edit"?"Edit User Rating":"Add New User Rating",showFooter:false,children:recordData!==null&&recordData!==void 0&&recordData.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(Skeletons/* default */.A,{items:10}):/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{className:Common_styles_module/* default */.A.form,onFinish:onFinish,form:form,children:[(recordData===null||recordData===void 0?void 0:recordData.error)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomErrorAlert */.WZ,{description:recordData===null||recordData===void 0?void 0:recordData.error,isClosable:true,onClose:handleAlertClose}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"name",rules:[{required:true,message:"Please add currency name"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Name",asterisk:true,type:"text"})})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("label",{className:"font-size-sm",children:["Phone  ",/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"color-red-yp",children:"*"}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"phone",rules:[{required:true,message:"Please add phone"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(input_number/* default */.A,{type:"number",addonBefore:/*#__PURE__*/(0,jsx_runtime.jsx)(es_select/* default */.A,{style:{width:98},placeholder:"Select phone code",defaultValue:type==="new"?"971":(recordData===null||recordData===void 0?void 0:(_recordData$data=recordData.data)===null||_recordData$data===void 0?void 0:_recordData$data.phoneCode)||"971"// onChange={(value) => {
//     form.setFieldsValue({ phoneCode: value });
// }}
,children:countries===null||countries===void 0?void 0:countries.map(item=>{return/*#__PURE__*/(0,jsx_runtime.jsxs)(Option,{value:item.phoneCode,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{children:item.flag}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"ml-1",children:"".concat(item.phoneCode)})]});})}),placeholder:"Enter phone number",defaultValue:type==="new"?"":recordData===null||recordData===void 0?void 0:(_recordData$data2=recordData.data)===null||_recordData$data2===void 0?void 0:_recordData$data2.phone,controls:false})})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"email",rules:[{required:type==="new"?true:false,message:"Please add email"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Email",asterisk:type==="new",type:"text"})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"message",rules:[{required:true,message:"Please add currency symbol"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Message",asterisk:true,type:"textArea",defaultValue:type==="new"?"":recordData===null||recordData===void 0?void 0:(_recordData$data3=recordData.data)===null||_recordData$data3===void 0?void 0:_recordData$data3.message})})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Common_styles_module/* default */.A.footer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:recordData===null||recordData===void 0?void 0:recordData.buttonLoading,children:"Submit"})]})]})});};
// EXTERNAL MODULE: ./src/Components/Organisms/Common/styles.module.scss
var Organisms_Common_styles_module = __webpack_require__(96019);
// EXTERNAL MODULE: ./src/Components/Templates/SiteSettings/index.tsx
var SiteSettings = __webpack_require__(16181);
// EXTERNAL MODULE: ./src/Modules/UserRating/permissions.ts
var UserRating_permissions = __webpack_require__(60908);
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
;// ./src/Components/Organisms/SiteSettings/UserRating/index.tsx
// import { UserRatingStatusString } from "../../../../helpers/commonEnums";
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:true,text:"Site Settings",path:"/siteSettings"},{isLink:false,text:"User Ratings"}];const UserRatingSettings=()=>{var _moduleData$meta3,_moduleData$meta4,_moduleData$meta5,_moduleData$meta6;//available permissions for the properties page
const permissionSlug=(0,common/* getPermissionSlugs */.AH)(UserRating_permissions/* UserRatingPermissionsEnum */.O);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readUserRating}=permissions;const[moduleData,setModuleData]=(0,react.useState)({loading:false,data:[]});const[currentEditType,setCurrentEditType]=(0,react.useState)({editType:"new",recordId:0,openModal:false});const[selectedFilters,setSelectedFilters]=(0,react.useState)({status:"",dateRange:[""],propertyId:0,organizationId:0,agentId:0,propertyLink:""});const[reset,setReset]=(0,react.useState)(false);const module=(0,react.useMemo)(()=>new UserRating/* UserRatingModule */.l(),[]);const onSelected=event=>{const{name,value}=event===null||event===void 0?void 0:event.target;if(name==="agentId"||name==="propertyId"||name==="organizationId"){const isValidNumber=(0,common/* isNumber */.Et)(value);if(!isValidNumber){let label="";switch(name){case"agentId":{label="Agent ID";break;}case"propertyId":{label="Property ID";break;}case"organizationId":{label="Organization ID";break;}}return message/* default */.Ay.error("".concat(label," should be a number"));}}// set the selected value in the state 
setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{[name]:value}));};const onReset=(0,react.useCallback)((name,value)=>{if(name){setReset(true);setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{[name]:value}));}},[selectedFilters]);const onCancelClick=()=>{setCurrentEditType((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{openModal:!currentEditType.openModal,editType:"new"}));};const onUpdate=(0,react.useCallback)(()=>{var _selectedFilters$date,_selectedFilters$date2;const fromDateString=((_selectedFilters$date=selectedFilters.dateRange)===null||_selectedFilters$date===void 0?void 0:_selectedFilters$date[0])||"";const toDateString=((_selectedFilters$date2=selectedFilters.dateRange)===null||_selectedFilters$date2===void 0?void 0:_selectedFilters$date2[1])||"";const fromDate=fromDateString?(0,dateHandler/* convertDate */.ic)(fromDateString,"yy-mm-dd"):undefined;const toDate=toDateString?(0,dateHandler/* convertDate */.ic)(toDateString,"yy-mm-dd"):undefined;const data={status:selectedFilters.status?selectedFilters.status:undefined,propertyId:Number(selectedFilters.propertyId)>0?Number(selectedFilters.propertyId):undefined,organizationId:Number(selectedFilters.organizationId)>0?Number(selectedFilters.organizationId):undefined,agentId:Number(selectedFilters.agentId)>0?Number(selectedFilters.agentId):undefined,propertyLink:selectedFilters.propertyLink?selectedFilters.propertyLink:undefined,fromDate:fromDate,toDate:toDate};// get the data from the api
module.getAllRecords(data).then(response=>{var _response$data,_response$data2;setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},moduleData),{},{loading:false,data:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.data,meta:(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.meta}));});},[selectedFilters,module]);const onPaginationChange=(0,react.useCallback)((page,pageSize)=>{var _selectedFilters$date3,_selectedFilters$date4;setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},moduleData),{},{loading:true}));const fromDateString=((_selectedFilters$date3=selectedFilters.dateRange)===null||_selectedFilters$date3===void 0?void 0:_selectedFilters$date3[0])||"";const toDateString=((_selectedFilters$date4=selectedFilters.dateRange)===null||_selectedFilters$date4===void 0?void 0:_selectedFilters$date4[1])||"";const fromDate=fromDateString?(0,dateHandler/* convertDate */.ic)(fromDateString,"yy-mm-dd"):undefined;const toDate=toDateString?(0,dateHandler/* convertDate */.ic)(toDateString,"yy-mm-dd"):undefined;const params={page:page,perPage:pageSize,status:selectedFilters.status?selectedFilters.status:undefined,propertyId:Number(selectedFilters.propertyId)>0?Number(selectedFilters.propertyId):undefined,organizationId:Number(selectedFilters.organizationId)>0?Number(selectedFilters.organizationId):undefined,agentId:Number(selectedFilters.agentId)>0?Number(selectedFilters.agentId):undefined,propertyLink:selectedFilters.propertyLink?selectedFilters.propertyLink:undefined,fromDate:fromDate,toDate:toDate};module.getAllRecords(params).then(res=>{setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},res.data),{},{loading:false}));}).catch(err=>{setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},moduleData),{},{loading:false}));});},[selectedFilters,module]);(0,react.useEffect)(()=>{if(reset){onUpdate();}// after 2 seconds set reset clicked state to false
const timer=setTimeout(()=>{setReset(false);},2000);return()=>clearTimeout(timer);},[reset,selectedFilters,onUpdate]);const reloadTableData=(0,react.useCallback)(query=>{module.getAllRecords(query).then(res=>{setModuleData(res.data);}).catch(err=>{});},[module]);(0,react.useEffect)(()=>{setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},moduleData),{},{loading:true}));reloadTableData();},[]);const reloadTableDataWithFilters=(0,react.useCallback)(()=>{var _selectedFilters$date5,_selectedFilters$date6,_moduleData$meta,_moduleData$meta2;const fromDateString=((_selectedFilters$date5=selectedFilters.dateRange)===null||_selectedFilters$date5===void 0?void 0:_selectedFilters$date5[0])||"";const toDateString=((_selectedFilters$date6=selectedFilters.dateRange)===null||_selectedFilters$date6===void 0?void 0:_selectedFilters$date6[1])||"";const fromDate=fromDateString?(0,dateHandler/* convertDate */.ic)(fromDateString,"yy-mm-dd"):undefined;const toDate=toDateString?(0,dateHandler/* convertDate */.ic)(toDateString,"yy-mm-dd"):undefined;reloadTableData({perPage:(moduleData===null||moduleData===void 0?void 0:(_moduleData$meta=moduleData.meta)===null||_moduleData$meta===void 0?void 0:_moduleData$meta.perPage)||10,page:(moduleData===null||moduleData===void 0?void 0:(_moduleData$meta2=moduleData.meta)===null||_moduleData$meta2===void 0?void 0:_moduleData$meta2.page)||1,status:selectedFilters.status?selectedFilters.status:undefined,propertyId:Number(selectedFilters.propertyId)>0?Number(selectedFilters.propertyId):undefined,organizationId:Number(selectedFilters.organizationId)>0?Number(selectedFilters.organizationId):undefined,agentId:Number(selectedFilters.agentId)>0?Number(selectedFilters.agentId):undefined,propertyLink:selectedFilters.propertyLink?selectedFilters.propertyLink:undefined,fromDate:fromDate,toDate:toDate});},[moduleData,selectedFilters]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(SiteSettings["default"],{permissionSlug:permissionSlug,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* PageHeader */.zY,{heading:"User Ratings",breadCrumbData:breadCrumbsData,filters:readUserRating?/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Organisms_Common_styles_module/* default */.A.filterWrapper,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Status",name:"status",options:[],value:String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.status),onChange:onSelected,onReset:()=>onReset("status",""),onUpdate:onUpdate})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"input",label:"Agent ID",name:"agentId",value:selectedFilters!==null&&selectedFilters!==void 0&&selectedFilters.agentId?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.agentId):"",onChange:onSelected,onReset:()=>onReset("agentId",0),onUpdate:onUpdate})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"input",label:"Property Link",name:"propertyLink",value:String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.propertyLink),onChange:onSelected,onReset:()=>onReset("propertyLink",""),onUpdate:onUpdate})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"input",label:"Property ID",name:"propertyId",value:selectedFilters!==null&&selectedFilters!==void 0&&selectedFilters.propertyId?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.propertyId):"",onChange:onSelected,onReset:()=>onReset("propertyId",0),onUpdate:onUpdate})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"input",label:"Organization ID",name:"organizationId",value:selectedFilters!==null&&selectedFilters!==void 0&&selectedFilters.organizationId?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.organizationId):"",onChange:onSelected,onReset:()=>onReset("organizationId",0),onUpdate:onUpdate})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"datepicker",label:"Date",name:"dateRange",onChange:value=>{setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{dateRange:value}));},onReset:()=>onReset("dateRange",[]),onUpdate:onUpdate})})]}):null}),moduleData.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(Skeletons/* default */.A,{items:5,fullWidth:true}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[readUserRating===true&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Organisms_Common_styles_module/* default */.A.antdTableWrapper,children:/*#__PURE__*/(0,jsx_runtime.jsx)(TableComponent,{tableData:moduleData===null||moduleData===void 0?void 0:moduleData.data,tableLoading:moduleData===null||moduleData===void 0?void 0:moduleData.loading,reloadTableData:reloadTableDataWithFilters,onEditIconClick:()=>{}})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Pagination */.dK,{total:moduleData===null||moduleData===void 0?void 0:(_moduleData$meta3=moduleData.meta)===null||_moduleData$meta3===void 0?void 0:_moduleData$meta3.total,current:moduleData===null||moduleData===void 0?void 0:(_moduleData$meta4=moduleData.meta)===null||_moduleData$meta4===void 0?void 0:_moduleData$meta4.page,defaultPageSize:moduleData!==null&&moduleData!==void 0&&(_moduleData$meta5=moduleData.meta)!==null&&_moduleData$meta5!==void 0&&_moduleData$meta5.perPage?moduleData===null||moduleData===void 0?void 0:(_moduleData$meta6=moduleData.meta)===null||_moduleData$meta6===void 0?void 0:_moduleData$meta6.perPage:10,pageSizeOptions:[10,20,50,100],onChange:onPaginationChange})]}),readUserRating===false&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),currentEditType.openModal&&/*#__PURE__*/(0,jsx_runtime.jsx)(UserRatingModal,{record:currentEditType.recordId,type:currentEditType.editType,reloadTableData:reloadTableDataWithFilters,onCancel:onCancelClick,openModal:currentEditType.openModal})]})]});};/* harmony default export */ const SiteSettings_UserRating = (UserRatingSettings);

/***/ }),

/***/ 83584:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ CountryModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class CountryModule{constructor(){this.endPoint="country";this.allEndpoint="country/all";this.getAllRecords=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.allEndpoint);};this.getAvailableRecords=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/available-country"));};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint+"/",data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};}}

/***/ }),

/***/ 79888:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ UserRatingModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class UserRatingModule{constructor(){this.endPoint="user-rating";this.getAllRecords=queryData=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:queryData});};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint+"/",data);};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};}}

/***/ }),

/***/ 60908:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ UserRatingPermissionsEnum)
/* harmony export */ });
let UserRatingPermissionsEnum=/*#__PURE__*/function(UserRatingPermissionsEnum){UserRatingPermissionsEnum["CREATE"]="createUserRating";UserRatingPermissionsEnum["UPDATE"]="updateUserRating";UserRatingPermissionsEnum["DELETE"]="deleteUserRating";UserRatingPermissionsEnum["READ"]="readUserRating";return UserRatingPermissionsEnum;}({});

/***/ })

}]);