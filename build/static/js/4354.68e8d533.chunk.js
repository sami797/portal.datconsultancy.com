"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[4354],{

/***/ 44394:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ Switch)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89379);
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80045);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92759);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(25933);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(38266);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(44414);
const _excluded=["onChange","checked","recordId","allowChange"];const Switch=_ref=>{let{onChange,checked,recordId,allowChange=true}=_ref,rest=(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)(_ref,_excluded);const[buttonState,setButtonState]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({loading:false,checked:false});const onSwitchChange=checked=>{if(allowChange===true){setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{loading:true}));onChange(checked,recordId,rest).then(res=>{setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{checked:checked,loading:false}));antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.success(res.data.message);}).catch(err=>{setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{loading:false}));let serverErrors=(0,_helpers__WEBPACK_IMPORTED_MODULE_5__/* .errorHandler */ .r)(err);if(typeof serverErrors.message==="string"){antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.error(serverErrors.message);}else{antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.error("Something went wrong");}});}else{antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.error("You don't have permission to change this record, please contact your admin.");}};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{checked:checked}));},[checked]);return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A,{checked:buttonState.checked,onChange:onSwitchChange,loading:buttonState.loading});};

/***/ }),

/***/ 94354:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ SiteSettings_FAQs)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./src/Components/Templates/SiteSettings/index.tsx
var SiteSettings = __webpack_require__(16181);
// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 18 modules
var es_form = __webpack_require__(10678);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
// EXTERNAL MODULE: ./src/Components/Organisms/SiteSettings/Common/styles.module.scss
var styles_module = __webpack_require__(41394);
// EXTERNAL MODULE: ./src/Components/Organisms/Skeletons/index.tsx
var Skeletons = __webpack_require__(70619);
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
// EXTERNAL MODULE: ./src/Components/Atoms/ServerErrorHandler/index.tsx
var ServerErrorHandler = __webpack_require__(13321);
// EXTERNAL MODULE: ./src/helpers/error-handler.ts
var error_handler = __webpack_require__(38266);
// EXTERNAL MODULE: ./src/Modules/FAQs/index.ts
var FAQs = __webpack_require__(7739);
// EXTERNAL MODULE: ./src/Modules/FAQCategory/index.ts
var FAQCategory = __webpack_require__(67174);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/SiteSettings/FAQs/modal.tsx
const SiteFAQModal=props=>{const{openModal,onCancel,type,record,reloadTableData,permissions:{createFaqs,updateFaqs}}=props;const[form]=es_form/* default */.A.useForm();const module=(0,react.useMemo)(()=>new FAQs/* FAQModule */.v(),[]);const faqCategoryModule=(0,react.useMemo)(()=>new FAQCategory/* FAQCategoryModule */.F(),[]);const[recordData,setRecordData]=(0,react.useState)();const[faqCategory,setFAQCategory]=(0,react.useState)([]);const handleErrors=err=>{const error=(0,error_handler/* errorHandler */.r)(err);if(typeof error.message=="string"){setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:error.message}));}else{let errData=(0,ServerErrorHandler/* HandleServerErrors */.p)(error.message,[]);form.setFields(errData);setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));}};const handleAlertClose=()=>{setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));};const getDataBySlug=(0,react.useCallback)(()=>{module.getRecordById(record).then(res=>{if(res.data&&res.data.data){var _res$data$data;form.setFieldsValue((0,objectSpread2/* default */.A)({isPublished:res.data.data.isPublished,faqsCategoryId:(_res$data$data=res.data.data)===null||_res$data$data===void 0?void 0:_res$data$data.faqsCategoryId},res.data.data));setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},res.data),{},{loading:false}));}}).catch(err=>{handleErrors(err);});},[form,record,module]);const getFAQCategories=(0,react.useCallback)(()=>{faqCategoryModule.getAllRecords({perPage:100}).then(res=>{if(res.data&&res.data.data){setFAQCategory(res.data.data);}});},[faqCategoryModule]);(0,react.useEffect)(()=>{if(type==="edit"){setRecordData({loading:true});// fetch data by slug or id
getDataBySlug();}else{form.resetFields();}// fetch the faq categories
getFAQCategories();},[openModal,type,form,getDataBySlug,getFAQCategories]);const handleSlugChange=_ref=>{let{target}=_ref;let slug=(0,common/* slugifyString */.Dv)(target.value);form.setFieldsValue({slug:slug});};const onFinish=formValues=>{setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{buttonLoading:true}));switch(type){case"edit":{if(updateFaqs===true){module.updateRecord(formValues,recordData===null||recordData===void 0?void 0:recordData.data.id).then(res=>{reloadTableData();onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));});}else{setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));message/* default */.Ay.error("You don't have permission to update this record");}break;}case"new":{if(createFaqs===true){module.createRecord(formValues).then(res=>{reloadTableData();onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));});}else{setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));message/* default */.Ay.error("You don't have permission to create this record");}break;}}};return/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomModal */.jo,{visible:openModal,closable:true,onCancel:onCancel,titleText:type==="edit"?"Edit FAQ":"Add New FAQ",showFooter:false,children:recordData!==null&&recordData!==void 0&&recordData.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(Skeletons/* default */.A,{items:10}):/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{className:styles_module/* default */.A.form,onFinish:onFinish,form:form,children:[(recordData===null||recordData===void 0?void 0:recordData.error)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomErrorAlert */.WZ,{description:recordData===null||recordData===void 0?void 0:recordData.error,isClosable:true,onClose:handleAlertClose}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"faqsCategoryId",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{label:"FAQ Category",placeholder:"Please select an FAQ Category",options:faqCategory===null||faqCategory===void 0?void 0:faqCategory.map(item=>({label:item===null||item===void 0?void 0:item.title,value:item.id}))})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"title",rules:[{required:true,message:"Please add a title"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Title",asterisk:true,type:"text",onChange:handleSlugChange})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mt-3",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* RichTextEditor */.dS,{form:form,name:"description"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"slug",rules:[{required:true,message:"Please add a slug"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{onChange:handleSlugChange,size:"w100",label:"Slug",asterisk:true,type:"text"})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"isPublished",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{label:"Published",options:[{value:true,label:"Yes"},{value:false,label:"No"}]})})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.footer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:recordData===null||recordData===void 0?void 0:recordData.buttonLoading,children:"Submit"})]})]})});};
// EXTERNAL MODULE: ./node_modules/antd/es/popconfirm/index.js + 1 modules
var popconfirm = __webpack_require__(56231);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js
var DeleteOutlined = __webpack_require__(78433);
// EXTERNAL MODULE: ./node_modules/antd/es/typography/index.js + 15 modules
var typography = __webpack_require__(30377);
// EXTERNAL MODULE: ./src/Components/Atoms/Switch/index.tsx
var Switch = __webpack_require__(44394);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
// EXTERNAL MODULE: ./src/Components/Icons/image.tsx
var Icons_image = __webpack_require__(13420);
;// ./src/Components/Organisms/SiteSettings/FAQs/table-columns.tsx
const{Paragraph}=typography/* default */.A;const ActionComponent=props=>{const{record,onEditIconClick,reloadTableData,onImageClick,permissions:{deleteFaqs}}=props;const[actionState,setActionState]=(0,react.useState)({confirmLoading:false,openPopConfirm:false});const module=(0,react.useMemo)(()=>new FAQs/* FAQModule */.v(),[]);const handleDelete=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:true}));if(deleteFaqs===false){message/* default */.Ay.error("You don't have permission to delete this record, please contact your admin.");setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));return;}module.deleteRecord(record.id).then(res=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false,confirmLoading:false}));reloadTableData();}).catch(err=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:false}));});};const showPopconfirm=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:true}));};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.actions,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{onClick:()=>onImageClick(record),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons_image/* ImageIcon */.x,{color:"#fff"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{onClick:()=>onEditIconClick(record),children:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/editicon.svg",alt:""})}),/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{open:actionState.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:handleDelete,onCancel:()=>setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false})),okButtonProps:{loading:actionState.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:visible=>{if(!visible){setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));}},children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{className:styles_module/* default */.A.bg__red,onClick:showPopconfirm})})]});};function TableComponent(props){const{tableData,tableLoading,onEditIconClick,reloadTableData,onImageClick}=props;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const module=new FAQs/* FAQModule */.v();const onIsPublishedChange=(checked,recordId)=>{return module.updateRecord({isPublished:checked},recordId);};const columns=[{title:"S.No",dataIndex:"index",key:"index",render:(text,record,index)=>index+1,width:"5%"},{title:"Title",dataIndex:"title",key:"title",render:(title,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"font-size-sm font-weight-bold color-dark-main",children:record.title})})},{title:"Slug",dataIndex:"slug",key:"slug",render:(slug,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"font-size-sm font-weight-bold color-dark-main",children:slug})},{title:"Published",dataIndex:"isPublished",key:"isPublished",render:(checked,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Switch/* Switch */.d,{checked:checked,onChange:onIsPublishedChange,recordId:record.id})},{title:"Actions",dataIndex:"actions",key:"actions",render:(text,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(ActionComponent,{record:record,onEditIconClick:onEditIconClick,reloadTableData:reloadTableData,permissions:permissions,onImageClick:onImageClick})}];return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module/* default */.A.antdTableWrapper,children:/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{sticky:true,dataSource:tableData,columns:columns,pagination:false,scroll:{x:991},loading:tableLoading,rowKey:record=>"site-faqs-".concat(record.id)})});}
// EXTERNAL MODULE: ./src/helpers/useDebounce.ts
var useDebounce = __webpack_require__(28173);
;// ./src/Modules/FAQs/permissions.ts
let FAQPermissionsEnum=/*#__PURE__*/function(FAQPermissionsEnum){FAQPermissionsEnum["CREATE"]="createFaqs";FAQPermissionsEnum["UPDATE"]="updateFaqs";FAQPermissionsEnum["DELETE"]="deleteFaqs";FAQPermissionsEnum["READ"]="readFaqs";return FAQPermissionsEnum;}({});
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
// EXTERNAL MODULE: ./node_modules/antd/es/upload/index.js + 19 modules
var upload = __webpack_require__(28013);
// EXTERNAL MODULE: ./node_modules/antd/es/button/index.js
var es_button = __webpack_require__(48538);
;// ./src/Components/Organisms/SiteSettings/FAQs/MultipleImages/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const MultipleImages_styles_module = ({"form":"styles_form__nzVSU","formItems":"styles_formItems__+nNG3","footer":"styles_footer__gU5jl","dragger":"styles_dragger__T247Y","numberOfUploads":"styles_numberOfUploads__d5ecA","uploadedImages":"styles_uploadedImages__4bsKe","imageWrap":"styles_imageWrap__6hzij"});
// EXTERNAL MODULE: ./src/helpers/constants.ts
var constants = __webpack_require__(65944);
;// ./src/Components/Organisms/SiteSettings/FAQs/MultipleImages/index.tsx
const{Paragraph: MultipleImages_Paragraph}=typography/* default */.A;const MultipleImages=_ref=>{let{openModal,onCancel,recordId}=_ref;const[form]=es_form/* default */.A.useForm();const[images,setImages]=(0,react.useState)([]);const module=(0,react.useMemo)(()=>new FAQs/* FAQModule */.v(),[]);const onFinish=()=>onCancel();const onImageDlt=async(id,idx)=>{try{module.removeImages(id).then(()=>{setImages(prv=>[...prv.filter((_item,index)=>index!==idx)]);message/* default */.Ay.success('Image Deleted Successfully');}).catch(err=>{var _err$response,_err$response$data;message/* default */.Ay.error((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Error Deleting Images');});}catch(err){console.error('Error Deleting Images',err);}};const uploadImage=async options=>{const{onSuccess,onError,file}=options;const fmData=new FormData();fmData.append("files[]",file);fmData.append("faqId",String(recordId));try{module.uploadImages(fmData).then(res=>{setImages(prv=>[...prv,res.data.data[0]]);onSuccess("ok");}).catch(err=>{onError({err});});}catch(err){onError({err});}};const getImagesOnServer=(0,react.useCallback)(async()=>{try{module.getAllImages(recordId).then(res=>{setImages(res.data.data);}).catch(err=>{var _err$response2,_err$response2$data;message/* default */.Ay.error((err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Error Fetching Images');});}catch(err){console.error('Error Fetching Images',err);}},[recordId,module]);(0,react.useEffect)(()=>{if(openModal){getImagesOnServer();}},[openModal]);return/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomModal */.jo,{visible:openModal,closable:true,onCancel:onCancel,titleText:"Upload Images",showFooter:false,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{onFinish:onFinish,form:form,className:MultipleImages_styles_module.form,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:MultipleImages_styles_module.formItems,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"images",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(upload/* default */.A.Dragger,{accept:".png,.jpg,.jpeg",className:MultipleImages_styles_module.dragger,multiple:true,name:"file",maxCount:20,customRequest:uploadImage,showUploadList:false,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"ant-upload-hint",children:"Drag image here or click to upload"}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:MultipleImages_styles_module.numberOfUploads,children:"".concat(images.length,"/20")})]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:MultipleImages_styles_module.uploadedImages,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomPhotoView */.pz,{images:images.map(item=>"".concat(constants/* RESOURCE_BASE_URL */.to).concat(item.path)),style:{borderRadius:5,objectFit:'cover',border:'1px solid #ddd'},width:115,height:70,overlayVisible:true,overlay:photoIndex=>{const item=images[photoIndex];return/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0 font-weight-bold",children:(item===null||item===void 0?void 0:item.file)||"Untitled"});},extra:value=>{// get the file from the data array using the index from the key
const item=images===null||images===void 0?void 0:images.find((_item,index)=>{var _value$key;return index===Number(value===null||value===void 0?void 0:(_value$key=value.key)===null||_value$key===void 0?void 0:_value$key.split('-')[1]);});const fileIndex=images.findIndex((_item,index)=>{var _value$key2;return index===Number(value===null||value===void 0?void 0:(_value$key2=value.key)===null||_value$key2===void 0?void 0:_value$key2.split('-')[1]);});return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column justify-content-between align-items-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(MultipleImages_Paragraph,{className:"mb-0 px-1",style:{width:110},ellipsis:{rows:1,expandable:true,symbol:'more..'},children:(item===null||item===void 0?void 0:item.file)||"Untitled"}),/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"Are you sure?",okText:"Yes",cancelText:"No",onConfirm:()=>onImageDlt(item===null||item===void 0?void 0:item.id,fileIndex),children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{danger:true,type:"primary",size:"small",style:{fontSize:10,margin:'0 auto'},children:"Remove"})})]});}})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:MultipleImages_styles_module.footer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"normal",fontSize:"sm",type:"plain",onClick:onCancel,children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{type:"primary",size:"normal",htmlType:"submit",children:"Done"})]})]})});};/* harmony default export */ const FAQs_MultipleImages = (MultipleImages);
;// ./src/Components/Organisms/SiteSettings/FAQs/index.tsx
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:true,text:"Site Settings",path:"/siteSettings"},{isLink:false,text:"FAQs"}];function SiteFAQSettings(){var _moduleData$meta,_moduleData$meta2,_moduleData$meta3,_moduleData$meta4;// available permissions for this module
const permissionSlug=(0,common/* getPermissionSlugs */.AH)(FAQPermissionsEnum);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readFaqs,createFaqs,updateFaqs}=permissions;const[currentEditType,setcurrentEditType]=(0,react.useState)({editType:"new",recordId:0,openModal:false});const module=(0,react.useMemo)(()=>new FAQs/* FAQModule */.v(),[]);const faqsCategoryModule=(0,react.useMemo)(()=>new FAQCategory/* FAQCategoryModule */.F(),[]);const[searchTerm,setSearchTerm]=(0,react.useState)("");const debouncedSearchTerm=(0,useDebounce/* useDebounce */.d)(searchTerm,500);const[selectedFilters,setSelectedFilters]=(0,react.useState)({title:"",faqsCategoryId:0,faqsCategorySlug:""});const[reset,setReset]=(0,react.useState)(false);const onSearch=event=>{const value=event.currentTarget.value;setSearchTerm(value);};const[moduleData,setModuleData]=(0,react.useState)({isLoading:false,error:{},data:[]});const[imagesModal,setImagesModal]=(0,react.useState)({openModal:false,recordId:0});const[faqCategoryData,setFaqCategoryData]=(0,react.useState)([]);const onSelected=event=>{const{name,value}=event===null||event===void 0?void 0:event.target;// set the selected value in the state 
setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{[name]:value}));};// handle Current Operations
const onHandleClick=()=>{if(createFaqs===false){message/* default */.Ay.error("You don't have permission to create new record");return;}setcurrentEditType((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{openModal:!currentEditType.openModal,editType:"new"}));};const onEditIconClick=record=>{if(updateFaqs===false){message/* default */.Ay.error("You don't have permission to update record");return;}setcurrentEditType((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{editType:"edit",recordId:record.id,openModal:true}));};const onImageClick=record=>{if(updateFaqs===false){message/* default */.Ay.error("You don't have permission to update record");return;}setImagesModal((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},imagesModal),{},{openModal:true,recordId:record.id}));};const reloadTableData=(0,react.useCallback)(query=>{setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},moduleData),{},{loading:true}));module.getAllRecords(query).then(res=>{setModuleData(res.data);}).catch(err=>{var _err$response,_err$response$data;message/* default */.Ay.error((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message);});},[module,moduleData]);const getFaqsCategory=(0,react.useCallback)(()=>{faqsCategoryModule.getAllRecords({perPage:100}).then(res=>{setFaqCategoryData(res.data.data);}).catch(err=>{});},[faqsCategoryModule]);const onUpdate=(0,react.useCallback)(()=>{const data={title:debouncedSearchTerm||undefined,faqsCategoryId:(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategoryId)||undefined,faqsCategorySlug:(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategorySlug)||undefined};reloadTableData(data);},[selectedFilters,module]);const onPaginationChange=(0,react.useCallback)((page,pageSize)=>{setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},moduleData),{},{loading:true}));const params={page:page,perPage:pageSize,title:debouncedSearchTerm||undefined,faqsCategoryId:(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategoryId)||undefined,faqsCategorySlug:(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategorySlug)||undefined};reloadTableData(params);},[module,selectedFilters,moduleData]);// Search Effect 
(0,react.useEffect)(()=>{if(debouncedSearchTerm){const data={title:debouncedSearchTerm||undefined,faqsCategoryId:(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategoryId)||undefined,faqsCategorySlug:(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategorySlug)||undefined};reloadTableData(data);}else{reloadTableData();}},[debouncedSearchTerm]);(0,react.useEffect)(()=>{getFaqsCategory();},[]);(0,react.useEffect)(()=>{if(reset){onUpdate();}// after 2 seconds set reset clicked state to false
const timer=setTimeout(()=>{setReset(false);},2000);return()=>clearTimeout(timer);},[reset,selectedFilters,onUpdate]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(SiteSettings["default"],{permissionSlug:permissionSlug,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* PageHeader */.zY,{heading:"FAQs",buttonText:"Add New FAQ",onButtonClick:onHandleClick,breadCrumbData:breadCrumbsData,showAdd:createFaqs===true?true:false,filters:readFaqs===true?/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{placeHolder:"Search...",icon:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"}),size:"w100",value:searchTerm,onChange:onSearch})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Category",name:"faqsCategoryId",value:String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategoryId),options:faqCategoryData===null||faqCategoryData===void 0?void 0:faqCategoryData.map(item=>({label:item===null||item===void 0?void 0:item.title,value:"".concat(item.id)})),onChange:onSelected,onReset:()=>{setReset(true);setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{faqsCategoryId:0}));},onUpdate:onUpdate})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"input",label:"Slug",name:"faqsCategorySlug",value:String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.faqsCategorySlug),onChange:onSelected,onReset:()=>{setReset(true);setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{faqsCategorySlug:""}));},onUpdate:onUpdate})})]}):null}),readFaqs===true&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(TableComponent,{tableData:moduleData.data,tableLoading:moduleData.loading,onEditIconClick:onEditIconClick,reloadTableData:reloadTableData,onImageClick:onImageClick}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Pagination */.dK,{total:moduleData===null||moduleData===void 0?void 0:(_moduleData$meta=moduleData.meta)===null||_moduleData$meta===void 0?void 0:_moduleData$meta.total,current:moduleData===null||moduleData===void 0?void 0:(_moduleData$meta2=moduleData.meta)===null||_moduleData$meta2===void 0?void 0:_moduleData$meta2.page,defaultPageSize:moduleData!==null&&moduleData!==void 0&&(_moduleData$meta3=moduleData.meta)!==null&&_moduleData$meta3!==void 0&&_moduleData$meta3.perPage?moduleData===null||moduleData===void 0?void 0:(_moduleData$meta4=moduleData.meta)===null||_moduleData$meta4===void 0?void 0:_moduleData$meta4.perPage:10,pageSizeOptions:[10,20,50,100],onChange:onPaginationChange})]}),readFaqs===false&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),currentEditType.openModal&&/*#__PURE__*/(0,jsx_runtime.jsx)(SiteFAQModal,{record:currentEditType.recordId,type:currentEditType.editType,reloadTableData:reloadTableData,onCancel:onHandleClick,openModal:currentEditType.openModal,permissions:permissions}),imagesModal.openModal&&/*#__PURE__*/(0,jsx_runtime.jsx)(FAQs_MultipleImages,{recordId:imagesModal.recordId,onCancel:()=>{setImagesModal((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},imagesModal),{},{openModal:false}));},openModal:imagesModal.openModal})]});}/* harmony default export */ const SiteSettings_FAQs = (SiteFAQSettings);

/***/ })

}]);