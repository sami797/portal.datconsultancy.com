"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[4477],{

/***/ 62506:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(89379);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(42074);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(92759);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(84649);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98341);
/* harmony import */ var _templates_Layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(81168);
/* harmony import */ var hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(91970);
/* harmony import */ var _atoms___WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9394);
/* harmony import */ var _atoms_ErrorCodes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(36250);
/* harmony import */ var _helpers_dateHandler__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(98933);
/* harmony import */ var _helpers_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(88132);
/* harmony import */ var _helpers_commonEnums__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2360);
/* harmony import */ var _helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(28173);
/* harmony import */ var _modules_Invoice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(49925);
/* harmony import */ var _modules_Invoice_permissions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(92325);
/* harmony import */ var _modules_Project__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(50167);
/* harmony import */ var _table_columns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(56946);
/* harmony import */ var _Drawer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(53822);
/* harmony import */ var _Common_styles_module_scss__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(96019);
/* harmony import */ var _modules_ProjectType__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(12975);
/* harmony import */ var _modules_Client__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(97097);
/* harmony import */ var _Notes_index__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(31538);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(44414);
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:false,text:"Invoices"}];const Invoices=()=>{var _clients$data,_projectData$data,_projectTypes$data;// available permissions for the properties page
const permissionSlug=(0,_helpers_common__WEBPACK_IMPORTED_MODULE_6__/* .getPermissionSlugs */ .AH)(_modules_Invoice_permissions__WEBPACK_IMPORTED_MODULE_10__/* .InvoicePermissionsEnum */ .x);const{userPermissions}=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__/* .useSelector */ .d4)(state=>state.usersReducer);const permissions=userPermissions;const{readInvoice,createInvoice,updateInvoice}=permissions;const[searchParams,setSearchParams]=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_19__/* .useSearchParams */ .ok)();const recordId=searchParams.get("id");const actionType=searchParams.get("actionType");const projectId=searchParams.get("projectId");const module=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new _modules_Invoice__WEBPACK_IMPORTED_MODULE_9__/* .InvoiceModule */ .O(),[]);const projectTypeModule=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new _modules_ProjectType__WEBPACK_IMPORTED_MODULE_15__/* .ProjectTypeModule */ .g(),[]);const projectModule=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new _modules_Project__WEBPACK_IMPORTED_MODULE_11__/* .ProjectModule */ .K(),[]);const clientModule=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new _modules_Client__WEBPACK_IMPORTED_MODULE_16__/* .ClientModule */ .u(),[]);// Status Filters
const statusValues={active:[_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_7__/* .InvoiceStatus */ .Sx.Generated,_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_7__/* .InvoiceStatus */ .Sx.Sent],paid:[_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_7__/* .InvoiceStatus */ .Sx.Paid],canceled:[_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_7__/* .InvoiceStatus */ .Sx.Canceled],draft:[_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_7__/* .InvoiceStatus */ .Sx.Generated],draftn:[_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_7__/* .InvoiceStatus */ .Sx.Pending]};const{data,onRefresh,meta,loading}=(0,hooks__WEBPACK_IMPORTED_MODULE_3__/* .useFetchData */ .Gs)({method:module.getAllRecords,initialQuery:{__status:!actionType?statusValues.active:undefined,projectId:projectId?Number(projectId):undefined}});// Status Counts
const{data:statusCounts,onRefresh:onRefreshStatusCount}=(0,hooks__WEBPACK_IMPORTED_MODULE_3__/* .useFetchData */ .Gs)({method:module.getCounts});const[segmentedStatus,setSegmentedStatus]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("active");// search term for the project search
const[projectSearchTerm,setProjectSearchTerm]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");const debouncedSearchTerm=(0,_helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__/* .useDebounce */ .d)(projectSearchTerm,500);// client search term
const[clientTerm,setClientTerm]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");// Search Debounce
const debouncedClientTerm=(0,_helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__/* .useDebounce */ .d)(clientTerm,500);// project type search term
const[projectTypeTerm,setProjectTypeTerm]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");// Search Debounce
const debouncedProjectTypeTerm=(0,_helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__/* .useDebounce */ .d)(projectTypeTerm,500);// project data
const[projectData,setProjectData]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({data:[],loading:false});// client data
const[clients,setClients]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({data:[],loading:false});// project type data
const[projectTypes,setProjectTypes]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({data:[],loading:false});// drawer state
const{drawer,setDrawer}=(0,hooks__WEBPACK_IMPORTED_MODULE_3__/* .useInvoiceDrawer */ .C9)();const[openNotesModal,setOpenNotesModal]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({type:"notes",recordId:0,open:false});// selected filters
const[selectedFilters,setSelectedFilters]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({dateRange:[""],__status:statusValues.active});const[reset,setReset]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);const[excelData,setExcelData]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);// headers for the excel export
const headers=[{label:"Name",key:"name"},{label:"Email",key:"email"}];const onSelected=event=>{const{name,value}=event===null||event===void 0?void 0:event.target;if(name==="clientId"||name==="projectTypeId"||name==="projectId"){const isValidNumber=(0,_helpers_common__WEBPACK_IMPORTED_MODULE_6__/* .isNumber */ .Et)(value);if(!isValidNumber){let label="";switch(name){case"clientId":{label="Client ID";break;}case"projectTypeId":{label="Project Type ID";break;}case"projectId":{label="Project ID";break;}}return antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Ay.error("".concat(label," should be a number"));}}// set the selected value in the state
setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{[name]:value}));};const onReset=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((name,value)=>{if(name){setReset(true);setSelectedFilters((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},selectedFilters),{},{[name]:value}));}},[selectedFilters]);const onAddNewClick=extra=>{if(createInvoice===false){antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Ay.error("You don't have permission to create new record");return;}setDrawer({type:"create",open:true,id:undefined,quotation:undefined,projectId:extra===null||extra===void 0?void 0:extra.projectId});};const onEditIconClick=recordId=>{if(updateInvoice===false){antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Ay.error("You don't have permission to update record");return;}setDrawer({open:true,id:recordId,type:"edit",projectId:Number(projectId)});};const onUpdate=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(query=>{var _selectedFilters$date,_selectedFilters$date2;const fromDateString=((_selectedFilters$date=selectedFilters.dateRange)===null||_selectedFilters$date===void 0?void 0:_selectedFilters$date[0])||"";const toDateString=((_selectedFilters$date2=selectedFilters.dateRange)===null||_selectedFilters$date2===void 0?void 0:_selectedFilters$date2[1])||"";const fromDate=fromDateString?(0,_helpers_dateHandler__WEBPACK_IMPORTED_MODULE_22__/* .convertDate */ .ic)(fromDateString,"yy-mm-dd"):undefined;const toDate=toDateString?(0,_helpers_dateHandler__WEBPACK_IMPORTED_MODULE_22__/* .convertDate */ .ic)(toDateString,"yy-mm-dd"):undefined;const data=(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({fromDate:fromDate,toDate:toDate,__status:selectedFilters.__status||undefined,clientId:selectedFilters.clientId||undefined,projectTypeId:selectedFilters.projectTypeId||undefined,projectId:selectedFilters.projectId||undefined},query);// get the data from the api
onRefresh(data);// get the status counts
onRefreshStatusCount();},[selectedFilters]);const onPaginationChange=(page,pageSize)=>onUpdate({page,perPage:pageSize});/** Get the search result for the projects */const onSearchProject=_ref=>{let{title,ids}=_ref;setProjectData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{loading:true}));projectModule.getAllRecords({title:title,ids}).then(res=>{const{data}=res===null||res===void 0?void 0:res.data;setProjectData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{data:data,loading:false}));}).finally(()=>{setProjectData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{loading:false}));});};/** Get the search result for the client */const GetSearchClients=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{if(debouncedClientTerm){setClients(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{loading:true}));clientModule.findPublished({name:debouncedClientTerm}).then(res=>{var _res$data;const data=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;setClients(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data;return!(prev!==null&&prev!==void 0&&(_prev$data=prev.data)!==null&&_prev$data!==void 0&&_prev$data.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,_helpers_common__WEBPACK_IMPORTED_MODULE_6__/* .handleError */ .H4)(err);antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Ay.error(errorMessage||"Something went wrong, please try again later.");setClients(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{loading:false}));});}},[debouncedClientTerm]);/** Get the search result for the project type */const GetSearchProjectTypes=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{if(debouncedProjectTypeTerm){setProjectTypes(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{loading:true}));projectTypeModule.getPublishRecords({title:debouncedProjectTypeTerm}).then(res=>{var _res$data2;const data=res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data;setProjectTypes(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data2;return!(prev!==null&&prev!==void 0&&(_prev$data2=prev.data)!==null&&_prev$data2!==void 0&&_prev$data2.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,_helpers_common__WEBPACK_IMPORTED_MODULE_6__/* .handleError */ .H4)(err);antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Ay.error(errorMessage||"Something went wrong, please try again later.");setProjectTypes(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{loading:false}));});}},[debouncedProjectTypeTerm]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(reset){onUpdate();}// after 2 seconds set reset clicked state to false
const timer=setTimeout(()=>{setReset(false);},2000);return()=>clearTimeout(timer);},[reset,selectedFilters,onUpdate]);const getExcelData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{if(data&&data.length>0){const _data=data===null||data===void 0?void 0:data.map(item=>{return{};});setExcelData(_data);}},[data]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{getExcelData();},[getExcelData]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{GetSearchClients();},[GetSearchClients]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{GetSearchProjectTypes();},[GetSearchProjectTypes]);// Open the modal based on the action type
(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const updateProject=()=>{setSegmentedStatus("all");setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{projectId:Number(projectId)}));onSearchProject({ids:[Number(projectId)]});};switch(actionType){case"create":{if(projectId){updateProject();onAddNewClick({projectId:Number(projectId)});(0,_helpers_common__WEBPACK_IMPORTED_MODULE_6__/* .onRemoveUrlParams */ .t3)(["projectId","actionType"],setSearchParams);}break;}case"edit":{if(recordId&&projectId){updateProject();onEditIconClick(Number(recordId));(0,_helpers_common__WEBPACK_IMPORTED_MODULE_6__/* .onRemoveUrlParams */ .t3)(["id","actionType","projectId"],setSearchParams);}break;}case"preview":{if(recordId&&projectId){updateProject();setDrawer({open:true,id:Number(recordId),type:"preview"});(0,_helpers_common__WEBPACK_IMPORTED_MODULE_6__/* .onRemoveUrlParams */ .t3)(["id","actionType","projectId"],setSearchParams);}break;}default:break;}},[actionType,projectId,recordId]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(debouncedSearchTerm){onSearchProject({title:debouncedSearchTerm});}},[debouncedSearchTerm]);const onAddNoteClick=record=>{if(updateInvoice===false){antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .Ay.error("You don't have permission to add notes");return;}setOpenNotesModal({type:"notes",open:true,recordId:record===null||record===void 0?void 0:record.id});};const segmentedOptions=[{label:"All (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.all)||0,")"),value:"all"},{label:"Active (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.active)||0,")"),value:"active"},{label:"Has Concerns (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.hasConcerns)||0,")"),value:"hasConcerns"},{label:"Paid (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.paid)||0,")"),value:"paid"},{label:"Draft (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.draft)||0,")"),value:"draft"},{label:"Pending Draft (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.draftn)||0,")"),value:"draftn"},{label:"Canceled (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.canceled)||0,")"),value:"canceled"}];return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(_templates_Layout__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A,{permissionSlug:permissionSlug,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_4__/* .PageHeader */ .zY,{heading:"Invoices",breadCrumbData:breadCrumbsData,showAdd:permissions.createInvoice===true?true:false,buttonText:"Add Invoice",onButtonClick:onAddNewClick,positionChildren:"new-line",filters:readInvoice?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)("div",{className:_Common_styles_module_scss__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .A.filterWrapper,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{style:{overflow:"auto"},children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(antd__WEBPACK_IMPORTED_MODULE_23__/* ["default"] */ .A,{size:"middle",style:{fontSize:"var(--font-size-sm)"},options:segmentedOptions.map(item=>{return (0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},item),{},{title:item.label,value:item.value});}),value:segmentedStatus,onChange:value=>{if(value==="all"){onReset("__status","");setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{__status:[]}));}else if(value==="hasConcerns"){onUpdate({hasConcerns:true,__status:undefined});}else{const _value=value;onUpdate({__status:statusValues[_value]});setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{__status:statusValues[_value]}));}setSegmentedStatus(value);}})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_4__/* .CustomFilter */ .YH,{type:"radio",label:"Client",name:"clientId",withSearch:true,options:clients===null||clients===void 0?void 0:(_clients$data=clients.data)===null||_clients$data===void 0?void 0:_clients$data.map(item=>{return{label:item.name,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.clientId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.clientId):"",onReset:()=>{onReset("clientId",0);// reset the search term
setClientTerm("");},onUpdate:onUpdate// START: For search
,loading:clients===null||clients===void 0?void 0:clients.loading,searchTerm:clientTerm,onSearch:event=>setClientTerm(event.currentTarget.value)// END: For search
})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_4__/* .CustomFilter */ .YH,{type:"datepicker",label:"Date",name:"dateRange",onChange:value=>setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A)({},prev),{},{dateRange:value})),onReset:()=>onReset("dateRange",[]),onUpdate:onUpdate})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_4__/* .CustomFilter */ .YH,{type:"radio",label:"Project",name:"projectId",withSearch:true,options:projectData===null||projectData===void 0?void 0:(_projectData$data=projectData.data)===null||_projectData$data===void 0?void 0:_projectData$data.map(item=>({label:"".concat(item.referenceNumber," | ").concat(item.title),value:"".concat(item.id)})),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectId):"",onReset:()=>{onReset("projectId",0);// reset the search term
setProjectSearchTerm("");},onUpdate:onUpdate// START: For search
,loading:projectData===null||projectData===void 0?void 0:projectData.loading,searchTerm:projectSearchTerm,onSearch:event=>setProjectSearchTerm(event.currentTarget.value)// END: For search
,defaultValue:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectId):""})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_4__/* .CustomFilter */ .YH,{type:"radio",label:"Project Type",name:"projectTypeId",withSearch:true,options:projectTypes===null||projectTypes===void 0?void 0:(_projectTypes$data=projectTypes.data)===null||_projectTypes$data===void 0?void 0:_projectTypes$data.map(item=>{return{label:item.title,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectTypeId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectTypeId):"",onReset:()=>{onReset("projectTypeId",0);// reset the search term
setProjectTypeTerm("");},onUpdate:onUpdate// START: For search
,loading:projectTypes===null||projectTypes===void 0?void 0:projectTypes.loading,searchTerm:projectTypeTerm,onSearch:event=>setProjectTypeTerm(event.currentTarget.value)// END: For search
})})]}):null,excelExport:readInvoice===true&&(data===null||data===void 0?void 0:data.length)>0&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_4__/* .ExcelExport */ .yh,{fileName:"Invoice",headers:headers,data:excelData,icon:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",className:"mr-1",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("path",{fill:"#42526E",d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2zm1.06 10.33c0 .41-.34.75-.75.75s-.75-.34-.75-.75V9.31l-7.72 7.72c-.15.15-.34.22-.53.22s-.38-.07-.53-.22a.754.754 0 010-1.06l7.72-7.72h-3.02c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h4.83c.41 0 .75.34.75.75v4.83z"})})})}),readInvoice===true&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.Fragment,{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)("div",{className:_Common_styles_module_scss__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .A.antdTableWrapper,children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_table_columns__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A,{tableData:data,tableLoading:loading,permissions:permissions,setDrawer:setDrawer,onEditIconClick:onEditIconClick,onAddNoteClick:onAddNoteClick,reloadTableData:()=>{onUpdate({perPage:(meta===null||meta===void 0?void 0:meta.perPage)||10,page:(meta===null||meta===void 0?void 0:meta.page)||1});}})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_4__/* .Pagination */ .dK,{total:meta===null||meta===void 0?void 0:meta.total,current:meta===null||meta===void 0?void 0:meta.page,defaultPageSize:meta!==null&&meta!==void 0&&meta.perPage?meta===null||meta===void 0?void 0:meta.perPage:10,pageSizeOptions:[10,20,50,100],onChange:onPaginationChange})]}),readInvoice===false&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_atoms_ErrorCodes__WEBPACK_IMPORTED_MODULE_5__/* .ErrorCode403 */ .$t,{mainMessage:"You don't have permission to view this data"}),drawer.open&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_Drawer__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .A,{drawer:drawer,setDrawer:setDrawer,onRefresh:onRefresh,permissions:permissions}),openNotesModal.open&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_18__.jsx)(_Notes_index__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .A,{open:openNotesModal.open,permissions:permissions,invoiceId:openNotesModal.recordId,onRefresh:()=>{onRefresh();onRefreshStatusCount();},onCancel:()=>{setOpenNotesModal({type:"new",recordId:0,open:false});}})]});};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Invoices);

/***/ })

}]);