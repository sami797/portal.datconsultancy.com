"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[1909],{

/***/ 10036:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90650);
/* harmony import */ var _atoms_CustomEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(49758);
/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92966);
/* harmony import */ var _helpers_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65944);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(44414);
/** Preview File */const PreviewFile=_ref=>{let{file,loading,tip}=_ref;const access_token=_services_tokenService__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLocalAccessToken();return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{style:{overflow:"hidden",height:"100%"},children:!loading?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:file?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("iframe",{src:"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_2__/* .PROTECTED_RESOURCE_BASE_URL */ .SO).concat(file,"?authKey=").concat(access_token),style:{width:"100%",height:"100%"},title:"Preview File"}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"w-100 h-100 d-flex justify-center align-center font-size-lg",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_atoms_CustomEmpty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A,{description:"No PDF found"})})}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A,{size:"large",style:{gap:"1rem"},className:"w-100 h-100 d-flex justify-center align-center font-size-lg",tip:tip||"Please wait while we are preparing the file..."})});};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PreviewFile);

/***/ }),

/***/ 54405:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* reexport safe */ _select__WEBPACK_IMPORTED_MODULE_0__.A),
/* harmony export */   t: () => (/* reexport safe */ _user_popover__WEBPACK_IMPORTED_MODULE_1__.A)
/* harmony export */ });
/* harmony import */ var _select__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(81467);
/* harmony import */ var _user_popover__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57702);


/***/ }),

/***/ 81467:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(89379);
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(80045);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var _atoms___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9394);
/* harmony import */ var _user_popover__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57702);
/* harmony import */ var _styles_module_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(44424);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(44414);
const _excluded=["showPopover","user","defaultValue","options","disableOption","placeholder","notFoundDescription","loading"];/**Conditional type for showing popover. If showPopover is true,
 * then user is required else it is not required
 *//** Custom dropdown component with selectable items */const SelectableDropdown=props=>{const{showPopover=true,user,defaultValue,options,disableOption,placeholder='Select an user',notFoundDescription,loading=false}=props,rest=(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A)(props,_excluded);const[open,setOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({popover:false,dropdown:false});const onOpenChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(visible=>{if(open!==null&&open!==void 0&&open.dropdown&&!visible){setOpen((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)({},open),{},{popover:true}));}else if(!(open!==null&&open!==void 0&&open.dropdown)&&visible){setOpen((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)({},open),{},{popover:true}));}else{setOpen((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)({},open),{},{popover:false}));}},[open]);const onDropdownVisibleChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(visible=>{if(visible){setOpen({popover:false,dropdown:true});}else{setOpen({popover:false,dropdown:false});}},[open]);return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:showPopover?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_user_popover__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A,{type:"user",user:user,open:open===null||open===void 0?void 0:open.popover,onOpenChange:onOpenChange,children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .SelectWithSearch */ .fd,(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)({},rest),{},{bordered:false,customOption:true,placeholder:placeholder,notFoundDescription:notFoundDescription||'No user found',defaultValue:defaultValue,options:options.map(option=>({label:option===null||option===void 0?void 0:option.label,value:option===null||option===void 0?void 0:option.value,icon:option===null||option===void 0?void 0:option.icon})),disableOption:disableOption,open:open===null||open===void 0?void 0:open.dropdown,onDropdownVisibleChange:onDropdownVisibleChange,className:"".concat(_styles_module_scss__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.selectable_dropdown," selectWithIcon"),style:{padding:'0px'},loading:loading}))}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .SelectWithSearch */ .fd,(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)({},rest),{},{bordered:false,customOption:true,placeholder:placeholder,notFoundDescription:notFoundDescription||'No user found',defaultValue:defaultValue,options:options.map(option=>({label:option===null||option===void 0?void 0:option.label,value:option===null||option===void 0?void 0:option.value,icon:option===null||option===void 0?void 0:option.icon})),disableOption:disableOption,open:open===null||open===void 0?void 0:open.dropdown,onDropdownVisibleChange:onDropdownVisibleChange,className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.selectable_dropdown,loading:loading}))});};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SelectableDropdown);

/***/ }),

/***/ 57702:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89379);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(65059);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(75871);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(79378);
/* harmony import */ var _helpers_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(65944);
/* harmony import */ var _icons___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63668);
/* harmony import */ var _styles_module_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(44424);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(44414);
const UserPopover=props=>{const{user,children,extra,client,type}=props;return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A,(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A)({placement:"left",showArrow:false},props),{},{overlayStyle:{padding:0},overlayInnerStyle:{padding:0,borderRadius:"0.3rem"},content:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_background}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A,{size:64,src:"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_0__/* .RESOURCE_BASE_URL */ .to).concat(type==='client'?client===null||client===void 0?void 0:client.logo:user===null||user===void 0?void 0:user.profile),icon:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A,{}),className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_avatar}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_content,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("p",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_content_name,children:type==='client'?client===null||client===void 0?void 0:client.name:"".concat(user===null||user===void 0?void 0:user.firstName," ").concat(user===null||user===void 0?void 0:user.lastName)}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("a",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_content_email,href:"mailto:".concat(type==='client'?client===null||client===void 0?void 0:client.email:user===null||user===void 0?void 0:user.email),children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_icons___WEBPACK_IMPORTED_MODULE_1__/* .EnvelopeIcon */ .u6,{width:18,height:18}),type==='client'?client===null||client===void 0?void 0:client.email:user===null||user===void 0?void 0:user.email]}),type==='user'?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:(user===null||user===void 0?void 0:user.phone)&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("a",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_content_phone,href:"tel:".concat(user===null||user===void 0?void 0:user.phoneCode).concat(user===null||user===void 0?void 0:user.phone),children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_icons___WEBPACK_IMPORTED_MODULE_1__/* .PhoneIcon */ .Es,{width:18,height:18}),"+".concat((user===null||user===void 0?void 0:user.phoneCode)||"971").concat(user===null||user===void 0?void 0:user.phone)]})}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:(client===null||client===void 0?void 0:client.phone)&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("a",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_content_phone,href:"tel:".concat(client===null||client===void 0?void 0:client.phoneCode).concat(client===null||client===void 0?void 0:client.phone),children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_icons___WEBPACK_IMPORTED_MODULE_1__/* .PhoneIcon */ .Es,{width:18,height:18}),"+".concat((client===null||client===void 0?void 0:client.phoneCode)||"971").concat(client===null||client===void 0?void 0:client.phone)]})}),extra&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.user_popover_content_extra,children:extra})]})]}),children:children}));};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserPopover);

/***/ }),

/***/ 26778:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(89379);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(92759);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(73780);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(56231);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(52765);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(46005);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(81541);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(9206);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(45908);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(4228);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(40841);
/* harmony import */ var _atoms___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9394);
/* harmony import */ var _icons___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63668);
/* harmony import */ var _modules_Project__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(50167);
/* harmony import */ var _helpers_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(65944);
/* harmony import */ var _helpers_commonEnums__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2360);
/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(92966);
/* harmony import */ var _helpers_dateHandler__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(98933);
/* harmony import */ var _helpers_useDebounce__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(28173);
/* harmony import */ var _styles_module_scss__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(18439);
/* harmony import */ var _helpers_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(88132);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(44414);
const ManageMedia=props=>{const{projectId,isManageMediaOpen,setIsManageMediaOpen,shareFiles=false,media:{onRefresh,data,loading,meta}}=props;const access_token=_services_tokenService__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getLocalAccessToken();const module=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new _modules_Project__WEBPACK_IMPORTED_MODULE_3__/* .ProjectModule */ .K(),[]);const[editTitle,setEditTitle]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();const[selectedFilters,setSelectedFilters]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({dateRange:[""]});const[selectedFiles,setSelectedFiles]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({fileIds:[],shareInEmail:true});const[reset,setReset]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);// File Name search
const[searchTerm,setSearchTerm]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(undefined);// Search Debounce
const debouncedSearchTerm=(0,_helpers_useDebounce__WEBPACK_IMPORTED_MODULE_7__/* .useDebounce */ .d)(searchTerm,500);/** Share files with client */const onShareFiles=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{if(selectedFiles.fileIds.length>0){const data={fileIds:selectedFiles.fileIds,shareInEmail:selectedFiles.shareInEmail,projectId:projectId};module.shareFiles(data).then(res=>{var _res$data;onRefresh({projectId:projectId});antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Ay.success((res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.message)||'File shared successfully');setSelectedFiles({fileIds:[],shareInEmail:true});}).catch(err=>{const errorMessage=(0,_helpers_common__WEBPACK_IMPORTED_MODULE_9__/* .handleError */ .H4)(err);antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Ay.error(errorMessage);});}},[selectedFiles]);const onSelected=event=>{const{name,value}=event===null||event===void 0?void 0:event.target;// set the selected value in the state
setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{[name]:value}));};const onReset=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((name,value)=>{if(name){setReset(true);setSelectedFilters((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},selectedFilters),{},{[name]:value}));}},[selectedFilters]);const onRemoveProjectFile=id=>{module.removeProjectFiles(id).then(res=>{var _res$data2;onRefresh({projectId:projectId});antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Ay.success((res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.message)||'File removed successfully');});};const onDocumentTypeChange=(value,id)=>{module.updateFiles(id,{documentType:value}).then(res=>{var _res$data3;onRefresh({projectId:projectId});antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Ay.success((res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.message)||'File updated successfully');});};const onUpdateTitle=(value,id)=>{module.updateFiles(id,{title:value}).then(res=>{var _res$data4;onRefresh({projectId:projectId});antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Ay.success((res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.message)||'File updated successfully');});};const onSearchChange=event=>{const{value}=event.currentTarget;setSearchTerm(value);onSelected(event);};const onUpdate=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(query=>{var _selectedFilters$date,_selectedFilters$date2;const fromDateString=((_selectedFilters$date=selectedFilters.dateRange)===null||_selectedFilters$date===void 0?void 0:_selectedFilters$date[0])||"";const toDateString=((_selectedFilters$date2=selectedFilters.dateRange)===null||_selectedFilters$date2===void 0?void 0:_selectedFilters$date2[1])||"";const fromDate=fromDateString?(0,_helpers_dateHandler__WEBPACK_IMPORTED_MODULE_13__/* .convertDate */ .ic)(fromDateString,"yy-mm-dd"):undefined;const toDate=toDateString?(0,_helpers_dateHandler__WEBPACK_IMPORTED_MODULE_13__/* .convertDate */ .ic)(toDateString,"yy-mm-dd"):undefined;const data=(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({fromDate:fromDate,toDate:toDate,projectId:projectId,fileType:selectedFilters.fileType||undefined,projectDocumentsTypes:selectedFilters.projectDocumentsTypes||undefined,fileName:selectedFilters.fileName||undefined,sharedToClient:selectedFilters.sharedToClient||undefined,perPage:12},query);// get the data from the api
onRefresh(data);},[selectedFilters]);const onPaginationChange=(page,pageSize)=>onUpdate({page,perPage:pageSize});const onClose=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setIsManageMediaOpen(false);// if no filters are selected then return
if(Object.values(selectedFilters).every(item=>JSON.stringify(item)===JSON.stringify([""])))return;setSearchTerm("");setSelectedFilters({dateRange:[""],fileType:undefined,projectDocumentsTypes:undefined,fileName:"",sharedToClient:undefined});Object.entries(selectedFilters).forEach(_ref=>{let[key]=_ref;if(key==="dateRange"){setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{dateRange:[""]}));}else{setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{[key]:undefined}));}if(key==="fileName"){setSearchTerm("");}});// fetch the data again with the pagination
onRefresh({projectId:projectId,page:(meta===null||meta===void 0?void 0:meta.page)||1,perPage:(meta===null||meta===void 0?void 0:meta.perPage)||12});},[projectId,meta,selectedFilters]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(reset){onUpdate();}// after 2 seconds set reset clicked state to false
const timer=setTimeout(()=>{setReset(false);},2000);return()=>clearTimeout(timer);},[reset,selectedFilters,onUpdate]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{if(debouncedSearchTerm!==undefined){onUpdate({fileName:debouncedSearchTerm});}else if(debouncedSearchTerm===''){onUpdate({fileName:undefined});}},[debouncedSearchTerm]);return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .A,{open:isManageMediaOpen,onClose:onClose,width:window.innerWidth>820?820:"100%",destroyOnClose:true,bodyStyle:{padding:"0px 25px"},closable:false,headerStyle:{display:"flex",justifyContent:"space-between",paddingBottom:0},title:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_header,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_header_title,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A,{className:"mr-3",onClick:onClose,style:{cursor:"pointer",color:"var(--color-dark-sub)"}}),"Manage Media"]}),selectedFiles.fileIds.length>0&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_selected_files,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("p",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_selected_files_label,children:[selectedFiles.fileIds.length," file",selectedFiles.fileIds.length>1?'s':''," selected"]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_selected_files_actions,children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .A,{title:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:["Are you sure to share this files with client?",/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("br",{}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .A,{checked:selectedFiles.shareInEmail,onChange:e=>setSelectedFiles(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{shareInEmail:e.target.checked})),children:"Share files in email"})]}),onConfirm:onShareFiles,okText:"Yes",cancelText:"No",placement:"bottomLeft",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .A,{})})})]})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_filters,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .CustomInput */ .wi,{name:"fileName",placeHolder:"Search by file name",onChange:onSearchChange,value:searchTerm,style:{width:'40%'}}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .CustomFilter */ .YH,{type:"datepicker",label:"Date",name:"dateRange",onChange:value=>setSelectedFilters(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{dateRange:value})),onReset:()=>onReset("dateRange",[]),onUpdate:onUpdate}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .CustomFilter */ .YH,{type:"radio",label:"Document Type",name:"projectDocumentsTypes",options:Object.entries(_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_5__/* .ProjectDocumentsTypes */ .T5).map(_ref2=>{let[key,value]=_ref2;return{label:value,value:key};}),value:String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectDocumentsTypes),onChange:onSelected,onReset:()=>onReset("projectDocumentsTypes",""),onUpdate:onUpdate}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .CustomFilter */ .YH,{type:"radio",label:"File Type",name:"fileType",options:Object.entries(_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_5__/* .ProjectFileTypes */ .Bi).map(_ref3=>{let[key,value]=_ref3;return{label:value,value:key};}),value:String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.fileType),onChange:onSelected,onReset:()=>onReset("fileType",""),onUpdate:onUpdate}),shareFiles&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_filters_with_clients,style:{backgroundColor:selectedFilters.sharedToClient?"var(--color-dark-main)":undefined,color:selectedFilters.sharedToClient?"var(--color-inactive)":undefined},onClick:()=>{setSelectedFilters(prev=>{const sharedToClient=!prev.sharedToClient;return (0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{sharedToClient});});if(selectedFilters.sharedToClient){onUpdate({sharedToClient:undefined});}else{onUpdate({sharedToClient:true});}},children:"Shared With Clients"})]})]}),footer:!loading&&(data===null||data===void 0?void 0:data.length)>0&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .Pagination */ .dK,{total:meta===null||meta===void 0?void 0:meta.total,current:meta===null||meta===void 0?void 0:meta.page,defaultPageSize:(meta===null||meta===void 0?void 0:meta.perPage)||12,pageSizeOptions:[10,20,50,100],onChange:onPaginationChange}),children:[loading&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .A,{active:true}),!loading&&(data===null||data===void 0?void 0:data.length)===0&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .CustomEmpty */ .ZX,{description:"No data found"}),!loading&&(data===null||data===void 0?void 0:data.map((item,idx)=>{var _item$fileType,_editTitle$idx;return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo,children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo_image,children:[shareFiles&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .A,{title:"Select file to share with client",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .A,{checked:selectedFiles.fileIds.includes(item.id),onChange:e=>{if(e.target.checked){setSelectedFiles(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{fileIds:[...prev.fileIds,item.id]}));}else{setSelectedFiles(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{fileIds:prev.fileIds.filter(id=>id!==item.id)}));}}})}),(_item$fileType=item.fileType)!==null&&_item$fileType!==void 0&&_item$fileType.includes('image')?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A,{src:"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_4__/* .PROTECTED_RESOURCE_BASE_URL */ .SO).concat(item.path,"?authKey=").concat(access_token),alt:item.title,width:100,height:70,style:{borderRadius:5,objectFit:'cover'},preview:false}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A,{src:"/images/doc.png",alt:"Document-".concat(idx),width:100,height:70,preview:false,style:{objectFit:'contain'}}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo_content,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo_name_container,children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo_name,onClick:()=>setEditTitle(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{[idx]:{show:true,title:item.title}})),children:editTitle!==null&&editTitle!==void 0&&(_editTitle$idx=editTitle[idx])!==null&&_editTitle$idx!==void 0&&_editTitle$idx.show?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .EditableInput */ .jc,{defaultValue:item.title,size:"small",className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo_name_input,onChange:e=>setEditTitle(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{[idx]:(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev===null||prev===void 0?void 0:prev[idx]),{},{title:e.target.value})})),onBlur:()=>setEditTitle(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)({},prev),{},{[idx]:{show:false}})),onMouseDown:()=>{var _editTitle$idx2;return onUpdateTitle(editTitle===null||editTitle===void 0?void 0:(_editTitle$idx2=editTitle[idx])===null||_editTitle$idx2===void 0?void 0:_editTitle$idx2.title,item.id);}}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{style:{cursor:'pointer'},className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo_name_label,children:item.title||'Untitled, Click to edit'})})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.manage_media_photo_document_type,children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .CustomSelect */ .Ae,{bordered:false,style:{width:'fit-content'},defaultValue:item.documentType,clearIcon:false,options:Object.entries(_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_5__/* .ProjectDocumentsTypes */ .T5).map(_ref4=>{let[key,value]=_ref4;return{label:value,value:key};}),onSelect:value=>onDocumentTypeChange(value,item.id)})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.media_photo_actions,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_20__/* ["default"] */ .A,{title:"Download",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("a",{href:"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_4__/* .PROTECTED_RESOURCE_BASE_URL */ .SO).concat(item.path,"?authKey=").concat(access_token,"&download=true"),target:"_blank",style:{color:"var(--color-dark-sub)"},download:item.title,rel:"noreferrer",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_22__/* ["default"] */ .A,{style:{fontSize:22,cursor:"pointer",marginTop:5}})})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .A,{title:"Are you sure to delete this file?",onConfirm:()=>onRemoveProjectFile(item.id),okText:"Yes",cancelText:"No",placement:"left",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_icons___WEBPACK_IMPORTED_MODULE_2__/* .DeleteIcon */ .d7,{cursor:'pointer',width:20})})]})]})},"".concat(item.name,"-").concat(idx));}))]});};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ManageMedia);

/***/ }),

/***/ 48262:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(30377);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(81541);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(9206);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(73780);
/* harmony import */ var _atoms___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9394);
/* harmony import */ var _helpers_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65944);
/* harmony import */ var _helpers_commonEnums__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2360);
/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92966);
/* harmony import */ var _styles_module_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(18439);
/* harmony import */ var _atoms_PreviewFile__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(10036);
/* harmony import */ var _helpers_dateHandler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(98933);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(44414);
const{Paragraph}=antd__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A;const MediaCard=props=>{const{data,meta,onRefresh,projectId,fromChat=false}=props;const access_token=_services_tokenService__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.getLocalAccessToken();const[selectedFile,setSelectedFile]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({path:'',open:false});const imageFiles=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{// save the images in an array
let images=[];// loop through the data array
data===null||data===void 0?void 0:data.forEach(item=>{var _item$fileType;// if the file type is an image
if((_item$fileType=item.fileType)!==null&&_item$fileType!==void 0&&_item$fileType.includes('image')){// don't add duplicates
if(!images.includes(item)){images.push(item);}}});// if it is from chat, splice the array to show only 4 images
if(fromChat){images.splice(4);}return images;},[data]);const otherFiles=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{// save the other files in an array
let files=[];// loop through the data array
data===null||data===void 0?void 0:data.forEach(item=>{var _item$fileType2;// if the file type is not an image
if(!((_item$fileType2=item.fileType)!==null&&_item$fileType2!==void 0&&_item$fileType2.includes('image'))){// don't add duplicates
if(!(files!==null&&files!==void 0&&files.includes(item))){files.push(item);}}});// if it is from chat, splice the array to show only 2 files
if(fromChat){files.splice(2);}return files;},[data]);return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.media,children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.media_photos,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .CustomPhotoView */ .pz,{images:imageFiles.map(item=>"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_2__/* .PROTECTED_RESOURCE_BASE_URL */ .SO).concat(item.path,"?authKey=").concat(access_token)),style:{borderRadius:5,objectFit:'cover'},width:115,height:100,className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.media_photo,overlayVisible:true,overlay:photoIndex=>{const item=imageFiles[photoIndex];return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("p",{className:"mb-0 font-weight-bold",children:(item===null||item===void 0?void 0:item.title)||"Untitled"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("p",{className:"mb-0",children:(0,_helpers_dateHandler__WEBPACK_IMPORTED_MODULE_9__/* .convertDate */ .ic)(item===null||item===void 0?void 0:item.addedDate,"dd M,yy")})]});},extra:value=>{// get the file from the data array using the index from the key
const item=imageFiles===null||imageFiles===void 0?void 0:imageFiles.find((_item,index)=>{var _value$key;return index===Number(value===null||value===void 0?void 0:(_value$key=value.key)===null||_value$key===void 0?void 0:_value$key.split('-')[1]);});return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{children:[(item===null||item===void 0?void 0:item.visibility)===_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_3__/* .FileVisibilityEnum */ .A.public&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A,{title:"This file is visible to all users",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.media_visibility})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.media_details,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(Paragraph,{className:"mb-0 font-weight-bold px-1",strong:true,style:{width:115},ellipsis:{rows:1,expandable:false},children:(item===null||item===void 0?void 0:item.title)||"Untitled"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("p",{className:"mb-0 px-1",children:(0,_helpers_dateHandler__WEBPACK_IMPORTED_MODULE_9__/* .convertDate */ .ic)(item===null||item===void 0?void 0:item.addedDate,"dd M,yy")})]})]});}}),otherFiles.map((item,idx)=>{return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.media_document,onClick:()=>setSelectedFile({path:item.path,open:true}),children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{src:"/images/doc.png",alt:"Document-".concat(idx),width:115,height:55,preview:false,style:{objectFit:'contain',marginTop:10}}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.media_document_details,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(Paragraph,{className:"mb-0 font-weight-bold px-1",strong:true,style:{width:115},ellipsis:{rows:1,expandable:false},children:(item===null||item===void 0?void 0:item.title)||"Untitled"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("p",{className:"mb-0 px-1",children:(0,_helpers_dateHandler__WEBPACK_IMPORTED_MODULE_9__/* .convertDate */ .ic)(item===null||item===void 0?void 0:item.addedDate,"dd M,yy")})]})]},"".concat(item,"-").concat(idx));})]})}),(meta===null||meta===void 0?void 0:meta.pageCount)>1&&!fromChat&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_atoms___WEBPACK_IMPORTED_MODULE_1__/* .Pagination */ .dK,{total:meta===null||meta===void 0?void 0:meta.total,current:meta===null||meta===void 0?void 0:meta.page,defaultPageSize:(meta===null||meta===void 0?void 0:meta.perPage)||12,pageSizeOptions:[10,20,50,100],onChange:(page,pageSize)=>{const params={projectId:projectId,page:page,perPage:pageSize};onRefresh(params);}}),selectedFile.open&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A,{open:selectedFile.open,onClose:()=>setSelectedFile({path:'',open:false}),width:window.innerWidth>700?700:"100%",title:"Preview File",placement:"right",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_atoms_PreviewFile__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A,{file:selectedFile.path})})]});};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MediaCard);

/***/ }),

/***/ 98891:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ disConnectWebSocket),
/* harmony export */   m: () => (/* binding */ getWebSocket)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92966);
/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8677);
let socketConnection=null;/** This function will return the socket connection instance */const getWebSocket=()=>{if(socketConnection&&socketConnection.connected===false){socketConnection=null;}if(!socketConnection){const access_token=_services_tokenService__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLocalAccessToken();const socket=(0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(_services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* .BASE_URL */ .C,{extraHeaders:{Authorization:"Bearer ".concat(access_token)}});socketConnection=socket;}return socketConnection;};const disConnectWebSocket=()=>{if(socketConnection){socketConnection.disconnect();socketConnection=null;}};

/***/ }),

/***/ 44424:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// extracted by mini-css-extract-plugin
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"user_popover":"styles_user_popover__kn6oo","user_popover_background":"styles_user_popover_background__uweW7","user_popover_content":"styles_user_popover_content__q7QzU","user_popover_content_name":"styles_user_popover_content_name__rvcS5","user_popover_content_email":"styles_user_popover_content_email__XUiWY","user_popover_content_phone":"styles_user_popover_content_phone__s4vbT","user_popover_content_extra":"styles_user_popover_content_extra__ZmL8F","selectable_dropdown":"styles_selectable_dropdown__41MAI"});

/***/ }),

/***/ 18439:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// extracted by mini-css-extract-plugin
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"tabBar_header":"styles_tabBar_header__HdBoj","uploadSection":"styles_uploadSection__4A50w","uploadSection_content_uploader":"styles_uploadSection_content_uploader__R9fJ7","uploadSection_content_select":"styles_uploadSection_content_select__ydIXe","preview":"styles_preview__iXKtY","preview_actions":"styles_preview_actions__O03fK","media":"styles_media__OTx67","media_photos":"styles_media_photos__06zxZ","media_photo":"styles_media_photo__EirqW","media_document":"styles_media_document__7bj-c","media_visibility":"styles_media_visibility__lrmyq","media_details":"styles_media_details__GiyyP","media_document_details":"styles_media_document_details__mB1VY","manage_media_filters":"styles_manage_media_filters__7fP0e","manage_media_photo":"styles_manage_media_photo__0CnE0","manage_media_photo_image":"styles_manage_media_photo_image__Cou2g","manage_media_photo_content":"styles_manage_media_photo_content__OzO7L","manage_media_header":"styles_manage_media_header__H4Tye","manage_media_header_title":"styles_manage_media_header_title__72OCT","media_photo_actions":"styles_media_photo_actions__5qrWH","manage_media_photo_name_container":"styles_manage_media_photo_name_container__G9GY9","manage_media_photo_name":"styles_manage_media_photo_name__YT8X3","manage_media_photo_name_label":"styles_manage_media_photo_name_label__BW2C2","manage_media_photo_name_input":"styles_manage_media_photo_name_input__mAGzo","manage_media_photo_share":"styles_manage_media_photo_share__o3r6O","manage_media_photo_share_switch":"styles_manage_media_photo_share_switch__sFrig","projectFileLinks":"styles_projectFileLinks__42-TW","projectFileLink":"styles_projectFileLink__PGhe2","projectFileLink__deleteIcon":"styles_projectFileLink__deleteIcon__XGHsg","documents":"styles_documents__C2aaz","documents_content":"styles_documents_content__AJf4K","documents_content_title":"styles_documents_content_title__geilu","manage_media_selected_files":"styles_manage_media_selected_files__b1mkD","manage_media_selected_files_label":"styles_manage_media_selected_files_label__kBpVV","manage_media_selected_files_actions":"styles_manage_media_selected_files_actions__xnE2O","manage_media_filters_with_clients":"styles_manage_media_filters_with_clients__Z0vcN","linkFormContainer":"styles_linkFormContainer__iDrtx","projectFilesLinkName":"styles_projectFilesLinkName__MkQ34"});

/***/ })

}]);