"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[293],{

/***/ 10036:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90650);
/* harmony import */ var _atoms_CustomEmpty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(49758);
/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92966);
/* harmony import */ var _helpers_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65944);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(44414);
/** Preview File */const PreviewFile=_ref=>{let{file,loading,tip}=_ref;const access_token=_services_tokenService__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLocalAccessToken();return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{style:{overflow:"hidden",height:"100%"},children:!loading?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:file?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("iframe",{src:"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_2__/* .PROTECTED_RESOURCE_BASE_URL */ .SO).concat(file,"?authKey=").concat(access_token),style:{width:"100%",height:"100%"},title:"Preview File"}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"w-100 h-100 d-flex justify-center align-center font-size-lg",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_atoms_CustomEmpty__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A,{description:"No PDF found"})})}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A,{size:"large",style:{gap:"1rem"},className:"w-100 h-100 d-flex justify-center align-center font-size-lg",tip:tip||"Please wait while we are preparing the file..."})});};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PreviewFile);

/***/ }),

/***/ 38505:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ ClientModal)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(80045);
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(89379);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97554);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(10678);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92759);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(17811);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(40202);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(90247);
/* harmony import */ var _Atoms__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9394);
/* harmony import */ var _Common_styles_module_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96019);
/* harmony import */ var _Skeletons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(70619);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9950);
/* harmony import */ var _helpers_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(88132);
/* harmony import */ var _Atoms_ServerErrorHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13321);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(38266);
/* harmony import */ var _Modules_Client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97097);
/* harmony import */ var _modules_Country__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(83584);
/* harmony import */ var _helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(28173);
/* harmony import */ var _helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2360);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(44414);
const _excluded=["phoneCode","phone","status"];const{Option}=antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A;const ClientModal=props=>{var _recordData$data;const{openModal,onCancel,type,record,reloadTableData,permissions:{createClient,updateClient},callback}=props;const[form]=antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.useForm();const module=new _Modules_Client__WEBPACK_IMPORTED_MODULE_6__/* .ClientModule */ .u();const countryModule=(0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>new _modules_Country__WEBPACK_IMPORTED_MODULE_7__/* .CountryModule */ .j(),[]);const[recordData,setRecordData]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();const[clientType,setClientType]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();const[searchTermClient,setSearchTermClient]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)("");const debouncedSearchTermClient=(0,_helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__/* .useDebounce */ .d)(searchTermClient,500);const[clients,setClients]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);const onClientSearch=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{if(debouncedSearchTermClient){module.findPublished({name:debouncedSearchTermClient,type:1}).then(res=>{setClients(prev=>{var _res$data,_res$data$data;// if the data is already present in the state, then don't add it again
const filteredData=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$data=_res$data.data)===null||_res$data$data===void 0?void 0:_res$data$data.filter(item=>{return!(prev!==null&&prev!==void 0&&prev.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return[...prev,...filteredData];});}).catch(err=>{antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error(err.response.data.message);});}},[debouncedSearchTermClient]);(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{onClientSearch();},[onClientSearch]);const[countries,setCountries]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);const getCountryList=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{countryModule.getAvailableRecords().then(res=>{if(res.data&&res.data.data){setCountries(res.data.data);}});},[countryModule]);const handleErrors=err=>{const error=(0,_helpers__WEBPACK_IMPORTED_MODULE_14__/* .errorHandler */ .r)(err);if(typeof error.message=="string"){setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{error:error.message}));}else{let errData=(0,_Atoms_ServerErrorHandler__WEBPACK_IMPORTED_MODULE_5__/* .HandleServerErrors */ .p)(error.message,[]);form.setFields(errData);setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{error:""}));}};const handleAlertClose=()=>{setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{error:""}));};const getDataBySlug=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{module.getRecordById(record).then(res=>{if(res.data&&res.data.data){var _res$data2,_res$data2$data;const type=res.data.data.type;const companyId=res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$data=_res$data2.data)===null||_res$data2$data===void 0?void 0:_res$data2$data.companyId;form.setFieldsValue((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},res.data.data),{},{type:type===1?_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.company:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.individual}));setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},res.data),{},{loading:false}));setClientType(type===1?_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.company:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.individual);// get the organization data from the api
if(companyId){module.getRecordById(companyId).then(res=>{var _res$data3;setClients([res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data]);}).catch(err=>{antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error(err.response.data.message);});}}}).catch(err=>{handleErrors(err);});},[form,record,module]);(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{if(type==="edit"){setRecordData({loading:true});getDataBySlug();getCountryList();}else{form.resetFields();getCountryList();}},[]);const onFinish=formValues=>{setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{buttonLoading:true}));const{phoneCode,phone,status}=formValues,rest=(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .A)(formValues,_excluded);const finalStatus=status===_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.ACTIVE?_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.ACTIVE:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.INACTIVE;switch(type){case"edit":{if(updateClient===true){module.updateRecord((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},rest),{},{type:formValues.type,phoneCode:phoneCode&&phone?String(phoneCode):undefined,phone:phone?String(phone):undefined,status:finalStatus// Use enum value
}),record).then(res=>{reloadTableData();onCancel();setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));});}else{setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error("You don't have permission to update this record");}break;}case"new":{if(createClient===true){module.createRecord((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},rest),{},{type:formValues.type,phoneCode:phoneCode&&phone?String(phoneCode):undefined,phone:phone?String(phone):undefined,status:finalStatus// Use enum value
})).then(res=>{const{data}=res===null||res===void 0?void 0:res.data;reloadTableData();callback&&callback(data===null||data===void 0?void 0:data.id);onCancel();setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));});}else{setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error("You don't have permission to create this record");}break;}}};return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomModal */ .jo,{visible:openModal,closable:true,onCancel:onCancel,titleText:type==="edit"?"Edit Client":"Add New Client",showFooter:false,children:recordData!==null&&recordData!==void 0&&recordData.loading?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Skeletons__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A,{items:3}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A,{className:_Common_styles_module_scss__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.form,onFinish:onFinish,form:form,children:[(recordData===null||recordData===void 0?void 0:recordData.error)&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomErrorAlert */ .WZ,{description:recordData===null||recordData===void 0?void 0:recordData.error,isClosable:true,onClose:handleAlertClose}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("label",{children:["Client Type",/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"type",rules:[{required:true,message:"Please select an option"}],children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_17__/* ["default"].Group */ .Ay.Group,{onChange:e=>{const value=e.target.value;setClientType(value);},value:clientType,children:Object.entries(_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Ay,{value:value,children:(0,_helpers_common__WEBPACK_IMPORTED_MODULE_4__/* .capitalize */ .ZH)(key)},key);})})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"name",rules:[{required:true,message:"Please add a name"}],children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{size:"w100",label:"Name",asterisk:true,type:"text",placeHolder:"Enter client name"})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"address",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{size:"w100",label:"Address",type:"text"})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"email",rules:[{required:true,message:"Please add email"},{type:"email",message:"Please add valid email"}],children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{asterisk:true,size:"w100",label:"Email",type:"email"})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("label",{className:"font-size-sm",children:["Phone",/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"phone",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .A,{type:"number",addonBefore:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"phoneCode",style:{marginBottom:0},initialValue:"971",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{style:{width:98},placeholder:"Select phone code",defaultValue:"971",children:countries===null||countries===void 0?void 0:countries.map(item=>/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(Option,{value:item.phoneCode,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:item.flag}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"ml-1",children:"+".concat(item.phoneCode)})]}))})}),placeholder:"Enter phone number",controls:false})})]})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"taxRegistrationNumber",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{label:"Tax Registration Number",placeHolder:"Enter Tax RegistrationNumber Number",size:"w100"})})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"status",label:"Status",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A.Option,{value:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.ACTIVE,children:"Active"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A.Option,{value:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.INACTIVE,children:"Inactive"})]})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"whatsapp",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{label:"WhatsApp Number",placeHolder:"Enter WhatsApp Number",size:"w100"})}),clientType===_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq['individual']&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"companyId",children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("label",{className:"font-size-sm",children:"Company"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{allowClear:true,style:{width:"100%"},defaultValue:recordData===null||recordData===void 0?void 0:(_recordData$data=recordData.data)===null||_recordData$data===void 0?void 0:_recordData$data.companyId,placeholder:"Search for the company",className:"selectAntdCustom",onChange:value=>form.setFieldsValue({companyId:value}),showSearch:true,onSearch:value=>setSearchTermClient(value),optionFilterProp:"label",options:clients===null||clients===void 0?void 0:clients.map(item=>{return{label:item.name,value:item.id};}),notFoundContent:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .A,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:"No data found, Please search for the company"})})})]})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"d-flex justify-end",children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomButton */ .Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomButton */ .Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:recordData===null||recordData===void 0?void 0:recordData.buttonLoading,children:type==="edit"?"Edit Client":"Add Client"})]})]})});};

/***/ }),

/***/ 76671:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ Organisms_Leads)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./node_modules/antd/es/segmented/index.js + 2 modules
var segmented = __webpack_require__(84649);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
// EXTERNAL MODULE: ./src/Components/Templates/Layout/index.tsx + 28 modules
var Layout = __webpack_require__(81168);
// EXTERNAL MODULE: ./src/hooks/index.ts + 5 modules
var hooks = __webpack_require__(91970);
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
// EXTERNAL MODULE: ./src/Modules/Leads/index.ts
var Leads = __webpack_require__(3465);
// EXTERNAL MODULE: ./src/Modules/Leads/permissions.ts
var Leads_permissions = __webpack_require__(79569);
// EXTERNAL MODULE: ./src/Modules/Quotation/permissions.ts
var Quotation_permissions = __webpack_require__(95700);
// EXTERNAL MODULE: ./src/helpers/dateHandler.ts
var dateHandler = __webpack_require__(98933);
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js
var objectWithoutProperties = __webpack_require__(80045);
// EXTERNAL MODULE: ./node_modules/antd/es/input/index.js + 5 modules
var input = __webpack_require__(16330);
// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 18 modules
var es_form = __webpack_require__(10678);
// EXTERNAL MODULE: ./node_modules/antd/es/avatar/index.js + 3 modules
var avatar = __webpack_require__(75871);
// EXTERNAL MODULE: ./node_modules/antd/es/tag/index.js + 1 modules
var tag = __webpack_require__(12916);
// EXTERNAL MODULE: ./node_modules/antd/es/popconfirm/index.js + 1 modules
var popconfirm = __webpack_require__(56231);
// EXTERNAL MODULE: ./node_modules/antd/es/checkbox/index.js + 2 modules
var es_checkbox = __webpack_require__(52765);
// EXTERNAL MODULE: ./node_modules/antd/es/spin/index.js
var spin = __webpack_require__(90650);
// EXTERNAL MODULE: ./node_modules/antd/es/radio/index.js + 4 modules
var es_radio = __webpack_require__(17811);
// EXTERNAL MODULE: ./node_modules/antd/es/date-picker/index.js + 56 modules
var date_picker = __webpack_require__(4132);
// EXTERNAL MODULE: ./node_modules/antd/es/button/index.js
var es_button = __webpack_require__(48538);
// EXTERNAL MODULE: ./node_modules/@ant-design/pro-card/es/ProCard.js + 15 modules
var ProCard = __webpack_require__(91692);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/UserOutlined.js + 1 modules
var UserOutlined = __webpack_require__(79378);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js
var DeleteOutlined = __webpack_require__(78433);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/LoadingOutlined.js
var LoadingOutlined = __webpack_require__(29008);
// EXTERNAL MODULE: ./node_modules/moment/moment.js
var moment = __webpack_require__(59051);
var moment_default = /*#__PURE__*/__webpack_require__.n(moment);
// EXTERNAL MODULE: ./src/Components/Icons/index.tsx + 58 modules
var Icons = __webpack_require__(63668);
// EXTERNAL MODULE: ./src/Components/Atoms/ServerErrorHandler/index.tsx
var ServerErrorHandler = __webpack_require__(13321);
// EXTERNAL MODULE: ./src/Components/Atoms/Input/textarea.tsx
var Input_textarea = __webpack_require__(30386);
// EXTERNAL MODULE: ./src/Components/Organisms/Common/styles.module.scss
var styles_module = __webpack_require__(96019);
// EXTERNAL MODULE: ./src/helpers/error-handler.ts
var error_handler = __webpack_require__(38266);
// EXTERNAL MODULE: ./src/helpers/useDebounce.ts
var useDebounce = __webpack_require__(28173);
// EXTERNAL MODULE: ./src/helpers/commonEnums.ts
var commonEnums = __webpack_require__(2360);
// EXTERNAL MODULE: ./src/Modules/ProjectType/index.ts
var ProjectType = __webpack_require__(12975);
// EXTERNAL MODULE: ./src/Modules/Client/index.ts
var Client = __webpack_require__(97097);
// EXTERNAL MODULE: ./src/Modules/Organization/index.ts
var Organization = __webpack_require__(42361);
// EXTERNAL MODULE: ./src/helpers/constants.ts
var constants = __webpack_require__(65944);
;// ./src/Components/Organisms/Leads/Modal/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Modal_styles_module = ({"divider":"styles_divider__5O-jb","notes":"styles_notes__i0Wbc","notes_wrapper":"styles_notes_wrapper__z1AxW","note":"styles_note__6ATPt","note_user_avatar":"styles_note_user_avatar__4RcIp","note_content_wrapper":"styles_note_content_wrapper__GPvt0","note_header":"styles_note_header__yeBKL","note_header_date":"styles_note_header_date__hwPaC","note_header_delete":"styles_note_header_delete__F8pfJ","note_content":"styles_note_content__-NaRn","notes_form_input_wrapper":"styles_notes_form_input_wrapper__KwqhL","notes_form_avatar":"styles_notes_form_avatar__XIPbp","notes_form_input":"styles_notes_form_input__aPrYA","notes_form_send_loader":"styles_notes_form_send_loader__4Ci35","notes_form_send":"styles_notes_form_send__r-PI9","date_picker":"styles_date_picker__MwE-9","z_index":"styles_z_index__QKB0C","date_footer":"styles_date_footer__O-PBL"});
// EXTERNAL MODULE: ./src/Components/Organisms/Dashboard/Clients/modal.tsx
var modal = __webpack_require__(38505);
// EXTERNAL MODULE: ./src/Modules/Client/permissions.ts
var Client_permissions = __webpack_require__(4209);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/Leads/Modal/index.tsx
const _excluded=["attachments"];const{TextArea}=input/* default */.A;const datePresets=[7,14,30,60,90];const LeadsModal=props=>{var _loggedInUserData$dat,_loggedInUserData$dat2,_loggedInUserData$dat3,_xeroTenants$data;const{openModal,onCancel,type,record,reloadTableData,permissions:{createLeads,updateLeads,createClient}}=props;const[form]=es_form/* default */.A.useForm();const{loggedInUserData}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const module=(0,react.useMemo)(()=>new Leads/* LeadsModule */.Q(),[]);const orgModule=(0,react.useMemo)(()=>new Organization/* OrganizationModule */.I(),[]);const projectTypeModule=(0,react.useMemo)(()=>new ProjectType/* ProjectTypeModule */.g(),[]);const clientModule=(0,react.useMemo)(()=>new Client/* ClientModule */.u(),[]);const{data}=(0,hooks/* useConditionFetchData */.P6)({method:()=>module.getRecordById(record),condition:!!record&&type==="edit"});const{data:projectTypeData}=(0,hooks/* useFetchData */.Gs)({method:projectTypeModule.getPublishRecords,initialQuery:{perPage:100}});const{data:orgData}=(0,hooks/* useFetchData */.Gs)({method:orgModule.findPublished});const{data:allClientsData}=(0,hooks/* useConditionFetchData */.P6)({method:clientModule.findPublished,condition:!!(data!==null&&data!==void 0&&data.clientId),initialQuery:{ids:[data===null||data===void 0?void 0:data.clientId,data===null||data===void 0?void 0:data.representativeId]}});const{data:allNotes,onRefresh:onRefreshNotes}=(0,hooks/* useConditionFetchData */.P6)({method:()=>module.getNoteById(record),condition:type==="notes"});const[recordData,setRecordData]=(0,react.useState)({loading:false,error:null});const[openDate,setOpenDate]=(0,react.useState)(false);const[leadType,setLeadType]=(0,react.useState)();const[notes,setNotes]=(0,react.useState)({content:'',loading:false,isConcern:false});const[showDelete,setShowDelete]=(0,react.useState)({});const[openClientModal,setOpenClientModal]=(0,react.useState)(false);const[concernResolved,setConcernResolved]=(0,react.useState)({confirmLoading:false,visible:false});// Clients or Organization Search Term
const[clientsTerm,setSearchClients]=(0,react.useState)("");const[xeroTenants,setXeroTenants]=(0,react.useState)({loading:true,data:[]});const debouncedClientsTerm=(0,useDebounce/* useDebounce */.d)(clientsTerm,500);// Clients Searched Users
const[allClients,setAllClients]=(0,react.useState)({data:[],loading:false});const handleErrors=err=>{const error=(0,error_handler/* errorHandler */.r)(err);if(typeof error.message=="string"){setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:error.message}));}else{let errData=(0,ServerErrorHandler/* HandleServerErrors */.p)(error.message,[]);form.setFields(errData);setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));}};const handleAlertClose=()=>setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));/** Get All Clients or Organization */const GetAllClients=_ref=>{let{name,ids}=_ref;setAllClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));clientModule.findPublished({name,ids}).then(res=>{setAllClients(prev=>{var _res$data,_res$data$data;// if the data is already present in the state, then don't add it again
const filteredData=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$data=_res$data.data)===null||_res$data$data===void 0?void 0:_res$data$data.filter(item=>{return!(prev!==null&&prev!==void 0&&prev.data.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{message/* default */.Ay.error(err.response.data.message||"Something went wrong!");setAllClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});};const onFinish=formValues=>{var _attachments$fileList;setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{loading:true}));const{attachments}=formValues,rest=(0,objectWithoutProperties/* default */.A)(formValues,_excluded);const formData=new FormData();// add attachments to form data 
const files=attachments===null||attachments===void 0?void 0:(_attachments$fileList=attachments.fileList)===null||_attachments$fileList===void 0?void 0:_attachments$fileList.map(file=>{return file.originFileObj;});if(files!==null&&files!==void 0&&files.length){for(let i=0;i<files.length;i++){formData.append('files[]',files[i]);}}switch(type){case"edit":{if(updateLeads===true){module.updateRecord((0,objectSpread2/* default */.A)({},rest),record).then(res=>{var _res$data2;if(res!==null&&res!==void 0&&(_res$data2=res.data)!==null&&_res$data2!==void 0&&_res$data2.data){reloadTableData();}onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}else{setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));message/* default */.Ay.error("You don't have enough permission to update leads");}break;}case"new":{if(createLeads===true){module.createRecord((0,objectSpread2/* default */.A)({},rest)).then(res=>{const{data}=res===null||res===void 0?void 0:res.data;if(data!==null&&data!==void 0&&data.id){var _data$id;formData.append("leadId",data===null||data===void 0?void 0:(_data$id=data.id)===null||_data$id===void 0?void 0:_data$id.toString());if((files===null||files===void 0?void 0:files.length)>0){module.uploadFile(formData).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong while uploading attachments");});}reloadTableData();onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));}else{setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));message/* default */.Ay.error("Something went wrong");}}).catch(err=>{handleErrors(err);const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong");setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}else{setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));message/* default */.Ay.error("You don't have enough permission to create leads");}break;}}};/**Function to add a note
   * @param {string} note note to be added
   */const onAddNote=(note,isConcern)=>{if(!note){message/* default */.Ay.error('Please enter a note');return;}if(!record)return;if(updateLeads===true){setNotes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));module.addNote(record,{note,isConcern}).then(res=>{var _res$data3;message/* default */.Ay.success((res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.message)||'Note added successfully');setNotes({content:'',loading:false,isConcern:false});onRefreshNotes();reloadTableData();}).catch(err=>{var _err$response,_err$response$data;message/* default */.Ay.error((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Something went wrong');setNotes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}else{message/* default */.Ay.error('You do not have permission to add notes');}};/**Function to remove a note
   * @param {number} noteId id of the note to be deleted
   */const onRemoveNote=noteId=>{if(updateLeads===true){module.removeNote(noteId).then(res=>{var _res$data4;message/* default */.Ay.success((res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.message)||'Note deleted successfully');onRefreshNotes();}).catch(err=>{var _err$response2,_err$response2$data;message/* default */.Ay.error((err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Something went wrong');});}else{message/* default */.Ay.error('You do not have permission to delete notes');}};(0,react.useEffect)(()=>{if(debouncedClientsTerm){GetAllClients({name:debouncedClientsTerm});}},[debouncedClientsTerm]);(0,react.useEffect)(()=>{if(data&&type==="edit"){const{clientId,representativeId,message}=data;form.setFieldsValue((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},data),{},{leadType:representativeId?commonEnums/* LeadTypeEnum */.AO.company:commonEnums/* LeadTypeEnum */.AO.individual,message:message?message:undefined,clientId:clientId?clientId:undefined,representativeId:representativeId?representativeId:undefined,dueDateForSubmissions:data.dueDateForSubmissions?moment_default()(data.dueDateForSubmissions):undefined}));!representativeId?setLeadType(commonEnums/* LeadTypeEnum */.AO.individual):setLeadType(commonEnums/* LeadTypeEnum */.AO.company);}},[data,type]);(0,react.useEffect)(()=>{if(allClientsData){setAllClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{data:allClientsData}));}},[allClientsData]);(0,react.useEffect)(()=>{if(type==='edit'||type==='new'){orgModule.getTenants().then(res=>{var _res$data5;if(res.data&&(_res$data5=res.data)!==null&&_res$data5!==void 0&&_res$data5.data){setXeroTenants({loading:false,data:res.data.data});}}).catch(err=>{console.error("Error while fetching tenants",err===null||err===void 0?void 0:err.message);});}},[type]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[openClientModal&&/*#__PURE__*/(0,jsx_runtime.jsx)(modal/* ClientModal */.V,{record:0,type:"new",reloadTableData:()=>{},callback:value=>{GetAllClients({ids:[value]});form.setFieldsValue({clientId:value});},onCancel:()=>setOpenClientModal(false),openModal:openClientModal,permissions:{createClient:createClient}}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomModal */.jo,{visible:openModal,closable:true,showFooter:false,onCancel:onCancel,titleText:type==="edit"?"Edit Lead":type==="notes"?"Notes":"Add Lead",size:type==="notes"?"700px":"600px",zIndex:!openClientModal?10000:undefined,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{className:styles_module/* default */.A.form,onFinish:onFinish,form:form,children:[(recordData===null||recordData===void 0?void 0:recordData.error)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomErrorAlert */.WZ,{description:recordData===null||recordData===void 0?void 0:recordData.error,onClose:handleAlertClose,isClosable:true}),type==="notes"?/*#__PURE__*/(0,jsx_runtime.jsxs)(ProCard/* default */.A,{headStyle:{display:'unset',padding:0},bodyStyle:{padding:0},className:Modal_styles_module.notes,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Modal_styles_module.notes_wrapper,children:[(allNotes===null||allNotes===void 0?void 0:allNotes.length)===0&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Modal_styles_module.notes_empty,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomEmpty */.ZX,{description:"No notes found"})}),allNotes===null||allNotes===void 0?void 0:allNotes.map((note,index)=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Modal_styles_module.note,onMouseEnter:()=>setShowDelete({[note.id]:true}),onMouseLeave:()=>setShowDelete({}),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:40,icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),className:Modal_styles_module.note_user_avatar,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(note.AddedBy.profile),alt:"".concat(note.AddedBy.firstName," ").concat(note.AddedBy.lastName)}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Modal_styles_module.note_content_wrapper,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Modal_styles_module.note_header,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{weight:"bold",color:"dark-main",children:"".concat(note.AddedBy.firstName," ").concat(note.AddedBy.lastName)}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:Modal_styles_module.note_header_date,title:moment_default()(note.addedDate).format("DD MMM, YYYY hh:mm A"),children:[moment_default()(note.addedDate).fromNow(),note.isConcern&&/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{color:"warning",className:"ml-2",children:"Concern"}),note.isResolved&&/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{color:"green",className:"ml-2",children:"Resolved"}),note.isConcern&&!note.isResolved&&/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"Are you sure to mark this concern as resolved?",okText:"Yes",cancelText:"No",placement:"bottomRight",open:concernResolved.visible,zIndex:10000,onOpenChange:open=>setConcernResolved(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{visible:open})),onCancel:()=>setConcernResolved(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{visible:false})),okButtonProps:{loading:concernResolved.confirmLoading},onConfirm:()=>{if(updateLeads===true){module.markConcernAsResolved(note.id).then(res=>{var _res$data6;message/* default */.Ay.success((res===null||res===void 0?void 0:(_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.message)||'Concern resolved successfully');reloadTableData();onRefreshNotes();setConcernResolved(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{visible:false}));}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||'Something went wrong');});}else{message/* default */.Ay.error('You do not have permission to resolve concerns');}},children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_checkbox/* default */.A,{checked:false,onChange:e=>setConcernResolved(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{visible:e.target.checked})),children:"Mark as resolved"})})]}),showDelete[note.id]&&/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"Are you sure to delete this note?",onConfirm:()=>onRemoveNote(note.id),okText:"Yes",cancelText:"No",placement:"left",zIndex:10000,children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{className:Modal_styles_module.note_header_delete})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Modal_styles_module.note_content,children:note.note})]})]},"note-".concat(index)))]}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_checkbox/* default */.A,{checked:notes.isConcern,onChange:e=>setNotes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{isConcern:e.target.checked})),className:"mt-2",children:"Mark as a concern"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Modal_styles_module.notes_form_input_wrapper,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:30,icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),className:Modal_styles_module.notes_form_avatar,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(loggedInUserData===null||loggedInUserData===void 0?void 0:(_loggedInUserData$dat=loggedInUserData.data)===null||_loggedInUserData$dat===void 0?void 0:_loggedInUserData$dat.profile),alt:"".concat(loggedInUserData===null||loggedInUserData===void 0?void 0:(_loggedInUserData$dat2=loggedInUserData.data)===null||_loggedInUserData$dat2===void 0?void 0:_loggedInUserData$dat2.firstName," ").concat(loggedInUserData===null||loggedInUserData===void 0?void 0:(_loggedInUserData$dat3=loggedInUserData.data)===null||_loggedInUserData$dat3===void 0?void 0:_loggedInUserData$dat3.lastName)}),/*#__PURE__*/(0,jsx_runtime.jsx)(TextArea,{placeholder:"Add a note...",className:Modal_styles_module.notes_form_input,autoSize:{minRows:1,maxRows:4},value:notes.content,onChange:e=>setNotes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{content:e.target.value}))}),notes.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(spin/* default */.A,{indicator:/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingOutlined/* default */.A,{style:{fontSize:20},spin:true}),className:Modal_styles_module.notes_form_send_loader}):/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* SendIcon */.qx,{width:30,height:30,className:Modal_styles_module.notes_form_send,onClick:()=>onAddNote(notes.content,notes.isConcern)})]})]}):/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("label",{children:["Lead Type",/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"leadType",rules:[{required:true,message:"Please select a lead type"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_radio/* default.Group */.Ay.Group,{value:leadType,onChange:e=>setLeadType(e.target.value),children:Object.entries(commonEnums/* LeadTypeEnum */.AO).map(_ref2=>{let[key,value]=_ref2;return/*#__PURE__*/(0,jsx_runtime.jsx)(es_radio/* default */.Ay,{value:value,children:(0,common/* capitalize */.ZH)(key)},key);})})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"submissionById",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{label:"Submission By",options:orgData===null||orgData===void 0?void 0:orgData.map(org=>{return{value:(org===null||org===void 0?void 0:org.id)||'',label:org===null||org===void 0?void 0:org.name};})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"xeroTenantId",style:{marginBottom:10},rules:[{required:true,message:"Please select xero account"}],help:/*#__PURE__*/(0,jsx_runtime.jsx)("small",{children:"All Record including invoices, quotations, project of this client will be synced to the selected xero account. This cannot be modified later"}),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{asterisk:true,label:"Choose XERO account",placeholder:"Select XERO Account",options:(_xeroTenants$data=xeroTenants.data)===null||_xeroTenants$data===void 0?void 0:_xeroTenants$data.map(org=>{return{value:(org===null||org===void 0?void 0:org.tenantId)||'',label:org===null||org===void 0?void 0:org.tenantName};})})}),/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("label",{style:{color:"var(--color-dark-main)",fontSize:"var(--font-size-sm)"},children:"Due Date for Submission"}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"dueDateForSubmissions",style:{marginBottom:10},children:/*#__PURE__*/(0,jsx_runtime.jsx)(date_picker/* default */.A,{placeholder:"Due Date for Submission",className:Modal_styles_module.date_picker,open:openDate,showToday:false,popupClassName:Modal_styles_module.z_index,onOpenChange:status=>setOpenDate(status),renderExtraFooter:()=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Modal_styles_module.date_footer,children:datePresets.map(days=>/*#__PURE__*/(0,jsx_runtime.jsxs)(es_button/* default */.A,{type:"ghost",size:"small",onClick:()=>{const date=moment_default()().add(days,'days');form.setFieldsValue({dueDateForSubmissions:date});setOpenDate(false);},children:["In ",days," days"]},days))})})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"clientId",rules:[{required:true,message:"Please select a client"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* SelectWithSearch */.fd,{label:"Client",placeholder:"Search for a client",notFoundDescription:"Could not find any client, try searching with name",onSearch:value=>setSearchClients(value),loading:allClients.loading,options:allClients.data.map(client=>{return{value:(client===null||client===void 0?void 0:client.id)||'',label:client===null||client===void 0?void 0:client.name};}),notFoundFooter:/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{type:"ghost",size:"small",style:{borderColor:"var(--color-primary-main)",fontSize:"var(--font-size-sm)",color:"var(--color-primary-main)"},onClick:()=>{setOpenClientModal(true);setSearchClients("");},children:"Add New Client"})})})}),leadType===commonEnums/* LeadTypeEnum */.AO['company']&&/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"representativeId",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* SelectWithSearch */.fd,{asterisk:false,label:"Client Representative",placeholder:"Search for a representative",notFoundDescription:"Could not find any representative, try searching with name",onSearch:value=>setSearchClients(value),loading:allClients.loading,options:allClients.data.map(user=>{return{value:(user===null||user===void 0?void 0:user.id)||'',label:user===null||user===void 0?void 0:user.name};})// TODO: ask abdullah to give me modal to add new client
,notFoundFooter:/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{type:"ghost",size:"small",style:{borderColor:"var(--color-primary-main)",fontSize:"var(--font-size-sm)",color:"var(--color-primary-main)"},children:"Add New Client Representative"})})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"projectTypeId",rules:[{required:true,message:"Please select project type"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{label:"Project Type",asterisk:true,placeholder:"Select Project Type",options:projectTypeData===null||projectTypeData===void 0?void 0:projectTypeData.map(item=>{return{value:item.id,label:item.title};})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"message",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Input_textarea/* default */.A,{label:"Message"})})}),type==="new"&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* ImageUploader */.GA,{title:"Attachments",name:"attachments",multiple:true})})]}),type!=="notes"&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.footer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:recordData===null||recordData===void 0?void 0:recordData.loading,children:"Submit"})]})]})})]});};
// EXTERNAL MODULE: ./node_modules/antd/es/typography/index.js + 15 modules
var typography = __webpack_require__(30377);
// EXTERNAL MODULE: ./node_modules/antd/es/tooltip/index.js
var tooltip = __webpack_require__(81541);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/EditOutlined.js
var EditOutlined = __webpack_require__(90582);
// EXTERNAL MODULE: ./src/Modules/User/index.ts
var User = __webpack_require__(47645);
// EXTERNAL MODULE: ./node_modules/antd/es/card/index.js + 3 modules
var card = __webpack_require__(2557);
// EXTERNAL MODULE: ./node_modules/antd/es/dropdown/index.js
var dropdown = __webpack_require__(57811);
// EXTERNAL MODULE: ./node_modules/antd/es/space/index.js + 1 modules
var space = __webpack_require__(80737);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DownOutlined.js
var DownOutlined = __webpack_require__(73022);
;// ./src/Components/Organisms/Leads/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Leads_styles_module = ({"rolePermissionAsideContainer":"styles_rolePermissionAsideContainer__vDZB8","active":"styles_active__UKuN+","sideBarHeading":"styles_sideBarHeading__iM3Xi","adminNavPanelsWrap":"styles_adminNavPanelsWrap__SSYq2","textWithIcon":"styles_textWithIcon__c8EVH","textWithIcon__rev":"styles_textWithIcon__rev__sVMpT","collapse":"styles_collapse__d15al","collapse__normal":"styles_collapse__normal__7hKXu","divider":"styles_divider__FB3w8","translated":"styles_translated__SHTh5","animateTranslation":"styles_animateTranslation__8hJU4","__translate":"styles___translate__SBYwI","negAnimateTranslation":"styles_negAnimateTranslation__HMi5x","__negTranslate":"styles___negTranslate__Ue7LG","header":"styles_header__fRUgj","content":"styles_content__ERkuL","contentHeader":"styles_contentHeader__mqRrx","content__layout":"styles_content__layout__JqenN","content__layout__header":"styles_content__layout__header__dM6mO","content__layout__content":"styles_content__layout__content__2BPiU","content__layout__footer":"styles_content__layout__footer__2+tEK","content__layout__footer__button":"styles_content__layout__footer__button__pRnqb","actions":"styles_actions__iBxOu","bg__red":"styles_bg__red__fwlSl","form":"styles_form__vgDsH","footer":"styles_footer__cJjrK","opacity_6":"styles_opacity_6__hMPyY","dropdown":"styles_dropdown__9jZ43","overlay":"styles_overlay__tMnBY","overlay_item":"styles_overlay_item__4XFZ9","overlay_popConfirm":"styles_overlay_popConfirm__QYIsk","disabledButton":"styles_disabledButton__SLj0z","tabs":"styles_tabs__2q2bq","message":"styles_message__onmBv"});
;// ./src/Components/Organisms/Leads/status.tsx
const statusColors={1:"#FFC107",// orange
2:"#FFA000",// darker orange
3:"#E53939",// red
4:"#43A047",// green
5:"#E53935",// red
6:"#E53935",// darker red
7:"#43A047"// darker green
};/** Status Dropdown */const StatusDropdown=props=>{const{status,recordId,reloadTableData,permissions:{updateLeadsStatus}}=props;const[messageApi,contextHolder]=message/* default */.Ay.useMessage();const module=(0,react.useMemo)(()=>new Leads/* LeadsModule */.Q(),[]);const openMessage=data=>{messageApi.open({key:data.key,type:data.type,content:data.content,duration:data.type==="loading"?0:2});};// controls the dropdown visibility
const[visible,setVisible]=(0,react.useState)(false);// handle dropdown menu visibility change event
const onVisibleChange=flag=>setVisible(flag);const onStatusChange=_status=>{if(recordId&&updateLeadsStatus===true){openMessage({key:"update",type:"loading",content:"Updating..."});module.changeStatus(recordId,_status).then(res=>{var _res$data;if(res!==null&&res!==void 0&&(_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.data){var _res$data2;openMessage({key:"update",type:"success",content:res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.message});setVisible(!visible);reloadTableData();}}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);openMessage({key:"update",type:"error",content:errorMessage});});}else{openMessage({key:"update",type:"error",content:"You don't have permission to change status"});}};// Get the status options but remove the numbers from it and only keep the string values
const options=Object.entries(commonEnums/* LeadsStatusOptions */.UB).filter(_ref=>{let[key]=_ref;return isNaN(Number(key))===false;}).map(_ref2=>{let[key,value]=_ref2;return{value:key,label:value};});const overlay=/*#__PURE__*/(0,jsx_runtime.jsx)(card/* default */.A,{className:"".concat(Leads_styles_module.overlay," pa-2"),children:options.map((option,index)=>{const value=Number(option.value);const isSelected=status===value;return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Leads_styles_module.overlay_item,onClick:()=>!isSelected&&onStatusChange(value),children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:isSelected?Leads_styles_module.disabledButton:"",style:{width:"100%"},children:option.label})},"leads-status-".concat(index));})});return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[contextHolder,/*#__PURE__*/(0,jsx_runtime.jsx)(dropdown/* default */.A,{dropdownRender:()=>overlay,trigger:updateLeadsStatus===true?["click"]:[],open:updateLeadsStatus===true?visible:false,onOpenChange:onVisibleChange,className:Leads_styles_module.dropdown,children:/*#__PURE__*/(0,jsx_runtime.jsxs)(space/* default */.A,{style:{backgroundColor:statusColors[status],color:"#fff",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.8rem",display:"flex",width:"100%",justifyContent:"space-between"},children:[commonEnums/* LeadsStatus */.Gp[status],updateLeadsStatus===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(DownOutlined/* default */.A,{})]})})]});};/* harmony default export */ const Leads_status = (StatusDropdown);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/MoreOutlined.js + 1 modules
var MoreOutlined = __webpack_require__(72906);
;// ./src/Components/Organisms/Leads/Card/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Card_styles_module = ({"leads":"styles_leads__3Cf9P","lead_item":"styles_lead_item__MIaIa","lead_item_header":"styles_lead_item_header__ELsiL","lead_item_header_left":"styles_lead_item_header_left__V3kOV","lead_item_header_actions":"styles_lead_item_header_actions__6t2zT","lead_item_header_actions_items":"styles_lead_item_header_actions_items__jXcfC","lead_item_header_actions_status":"styles_lead_item_header_actions_status__p-S0J","lead_item_header_actions_more":"styles_lead_item_header_actions_more__Zi77x","lead_item_header_title":"styles_lead_item_header_title__sMi24","lead_item_header_email":"styles_lead_item_header_email__Hh9cu","lead_item_header_phone":"styles_lead_item_header_phone__9DenO","lead_item_cards":"styles_lead_item_cards__PeMRR"});
;// ./src/Components/Organisms/Leads/Card/actions.tsx
const ActionsDropdown=props=>{const{item,onDelete,onEdit}=props;const[dropdownOpen,setDropdownOpen]=(0,react.useState)({});const[deleteConfirmation,setDeleteConfirmation]=(0,react.useState)(false);return/*#__PURE__*/(0,jsx_runtime.jsx)(dropdown/* default */.A,{trigger:['click'],open:dropdownOpen[item.id],onOpenChange:open=>setDropdownOpen({[item.id]:open}),menu:{items:[{key:'edit',label:'Edit',icon:/*#__PURE__*/(0,jsx_runtime.jsx)(EditOutlined/* default */.A,{}),onClick:()=>{onEdit(item.id);setDropdownOpen({[item.id]:false});}},{key:'delete',label:/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"Are you sure to delete this lead?",onConfirm:()=>{onDelete(item.id);// Close the dropdown and delete confirmation
setDeleteConfirmation(false);setDropdownOpen({[item.id]:false});},okText:"Yes",cancelText:"No",placement:"bottomLeft",open:deleteConfirmation,onOpenChange:open=>setDeleteConfirmation(open),children:"Delete"}),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{}),onClick:e=>{e.domEvent.preventDefault();setDeleteConfirmation(!deleteConfirmation);},danger:true}]},children:/*#__PURE__*/(0,jsx_runtime.jsx)(MoreOutlined/* default */.A,{className:Card_styles_module.lead_item_header_actions_more,onClick:e=>e.preventDefault()})});};/* harmony default export */ const actions = (ActionsDropdown);
// EXTERNAL MODULE: ./node_modules/antd/es/skeleton/index.js + 11 modules
var skeleton = __webpack_require__(46005);
// EXTERNAL MODULE: ./node_modules/antd/es/divider/index.js
var divider = __webpack_require__(40895);
;// ./src/Components/Organisms/Leads/assign-to.tsx
const UserDropDown=props=>{const{AssignedTo,users,loading,permissions:{assignLeads},getUsers,leadId,reloadTableData,avatarSize}=props;const[messageApi,contextHolder]=message/* default */.Ay.useMessage();const module=(0,react.useMemo)(()=>new Leads/* LeadsModule */.Q(),[]);const[searchTerm,setSearchTerm]=(0,react.useState)("");const debouncedSearchTerm=(0,useDebounce/* useDebounce */.d)(searchTerm,500);const openMessage=data=>{messageApi.open({key:data.key,type:data.type,content:data.content,duration:data.type==="loading"?0:2});};// controls the dropdown visibility
const[visible,setVisible]=(0,react.useState)(false);// handle dropdown menu visibility change event
const onVisibleChange=flag=>setVisible(flag);(0,react.useEffect)(()=>{if(debouncedSearchTerm){getUsers({name:debouncedSearchTerm});}},[debouncedSearchTerm]);const onUserChange=userId=>{if(userId&&assignLeads===true){openMessage({key:"update",type:"loading",content:"Updating..."});module.assignLead({assignedToId:userId},leadId).then(res=>{var _res$data;if(res!==null&&res!==void 0&&(_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.data){var _res$data2;openMessage({key:"update",type:"success",content:res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.message});setVisible(!visible);reloadTableData();}}).catch(err=>{var _err$response,_err$response$data;openMessage({key:"update",type:"error",content:(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||"Something went wrong"});});}else{openMessage({key:"update",type:"error",content:"You don't have permission to assign leads"});}};const overlay=/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{className:"".concat(Leads_styles_module.overlay," pa-2"),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{placeHolder:"Search User...",value:searchTerm,size:"w100",onChange:e=>{const{value}=e.target;searchTerm!==value&&setSearchTerm(value);},icon:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"})}),loading?/*#__PURE__*/(0,jsx_runtime.jsx)(skeleton/* default */.A,{active:true,className:"mt-1"}):/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(users===null||users===void 0?void 0:users.length)>0?/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:users===null||users===void 0?void 0:users.map(user=>{return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Leads_styles_module.overlay_item,onClick:()=>{if((AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.id)!==(user===null||user===void 0?void 0:user.id)&&assignLeads===true){const selectedUser=Number(user===null||user===void 0?void 0:user.id);onUserChange(selectedUser);}},children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:(AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.id)===(user===null||user===void 0?void 0:user.id)?Leads_styles_module.disabledButton:"",children:[user===null||user===void 0?void 0:user.firstName," ",user===null||user===void 0?void 0:user.lastName," - ","(".concat(user===null||user===void 0?void 0:user.email,")")]}),/*#__PURE__*/(0,jsx_runtime.jsx)(divider/* default */.A,{className:"my-0"})]},"users-".concat(user===null||user===void 0?void 0:user.id));})}):/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Leads_styles_module.overlay_item_noData,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomEmpty */.ZX,{description:debouncedSearchTerm?"No results found, please modify your search term":"Please search for a user to assign this lead to"})})})]});return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[contextHolder,/*#__PURE__*/(0,jsx_runtime.jsx)(dropdown/* default */.A,{dropdownRender:()=>overlay,trigger:assignLeads===true?["click"]:[],open:assignLeads===true?visible:false,onOpenChange:onVisibleChange,className:Leads_styles_module.dropdown,children:/*#__PURE__*/(0,jsx_runtime.jsx)(space/* default */.A,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",cursor:assignLeads===true?"pointer":"default"},children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),size:avatarSize||30}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",className:"ml-1",children:"".concat(AssignedTo!==null&&AssignedTo!==void 0&&AssignedTo.firstName&&AssignedTo!==null&&AssignedTo!==void 0&&AssignedTo.lastName?"".concat(AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.firstName," ").concat(AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.lastName):"Assign To")})]})})})]});};/* harmony default export */ const assign_to = (UserDropDown);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/PlusCircleOutlined.js + 1 modules
var PlusCircleOutlined = __webpack_require__(53387);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/Card/Dropdown/index.tsx
var Dropdown = __webpack_require__(39799);
;// ./src/Components/Organisms/Leads/Notes/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Notes_styles_module = ({"leads_note":"styles_leads_note__HDIdm","leads_note_container":"styles_leads_note_container__wR7VY","leads_note_item":"styles_leads_note_item__JT5iK","leads_note_view_all":"styles_leads_note_view_all__TmSNQ"});
;// ./src/Components/Organisms/Leads/Notes/index.tsx
const{Paragraph}=typography/* default */.A;const LeadsNote=props=>{const{LeadEnquiryFollowUp,count,onOpenNoteModal}=props;return/*#__PURE__*/(0,jsx_runtime.jsx)(Dropdown/* default */.A,{label:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Notes_styles_module.quotation_title,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",children:"".concat(count&&count>0?count:""," Note").concat(count&&count>1?'s':"")}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Add Notes",children:/*#__PURE__*/(0,jsx_runtime.jsx)(PlusCircleOutlined/* default */.A,{className:"ml-2",style:{fontSize:'1rem'},onClick:e=>{e.stopPropagation();onOpenNoteModal();}})})]})}),children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Notes_styles_module.leads_note_container,children:[(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)>0?LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.map((item,index)=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Notes_styles_module.leads_note_item,style:{borderBottom:index===(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)-1?'':'1px solid var(--color-border)',paddingBottom:index===(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)-1?'':'0.3rem'},children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"font-size-sm color-dark-800",children:item.AddedBy.firstName+" "+item.AddedBy.lastName}),/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"font-size-xs color-dark-sub ml-2",style:{opacity:0.7},children:[moment_default()(item===null||item===void 0?void 0:item.addedDate).fromNow(),item.isConcern&&/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{color:"warning",className:"ml-2",children:"Concern"}),item.isResolved&&/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{color:"green",className:"ml-2",children:"Resolved"})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Paragraph,{ellipsis:{rows:2,expandable:true},className:"font-size-xs color-dark-sub mb-0",children:item===null||item===void 0?void 0:item.note})]},"notes-".concat(index))):/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"font-size-xs color-dark-sub text-center",children:"No Notes"}),(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)>0&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Notes_styles_module.leads_note_view_all,onClick:e=>{e.stopPropagation();onOpenNoteModal();},children:"View All"})]})});};/* harmony default export */ const Notes = (LeadsNote);
// EXTERNAL MODULE: ./node_modules/antd/es/empty/index.js + 2 modules
var empty = __webpack_require__(90247);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/status.tsx
var Quotations_status = __webpack_require__(75492);
;// ./src/Components/Organisms/Leads/Quotation/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Quotation_styles_module = ({"quotation_container":"styles_quotation_container__dQcg3","quotation_title":"styles_quotation_title__trEG6","rte_editor":"styles_rte_editor__jk82v","error":"styles_error__EGV6d","alertText":"styles_alertText__0N3G6"});
;// ./src/Components/Organisms/Leads/Quotation/index.tsx
const LeadsQuotation=props=>{var _items$Quotation;const{items,setDrawer,onRefresh,permissions,setNewProject}=props;// prepare the data and add Lead?.SubmissionBy?.id to the Quotation
const Quotation=items===null||items===void 0?void 0:(_items$Quotation=items.Quotation)===null||_items$Quotation===void 0?void 0:_items$Quotation.map(item=>{var _item$Lead,_item$Lead2;return (0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},item),{},{Lead:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},item===null||item===void 0?void 0:item.Lead),{},{SubmissionBy:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},item===null||item===void 0?void 0:(_item$Lead=item.Lead)===null||_item$Lead===void 0?void 0:_item$Lead.SubmissionBy),{},{id:items===null||items===void 0?void 0:items.submissionById}),ProjectType:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},item===null||item===void 0?void 0:(_item$Lead2=item.Lead)===null||_item$Lead2===void 0?void 0:_item$Lead2.ProjectType),{},{id:items===null||items===void 0?void 0:items.projectTypeId})})});});return/*#__PURE__*/(0,jsx_runtime.jsx)(Dropdown/* default */.A,{label:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Quotation_styles_module.quotation_title,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",children:"Quotation"}),(Quotation===null||Quotation===void 0?void 0:Quotation.length)>0&&/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Add Quotation",children:/*#__PURE__*/(0,jsx_runtime.jsx)(PlusCircleOutlined/* default */.A,{className:"ml-2",style:{fontSize:'1rem'},onClick:e=>{e.stopPropagation();setDrawer(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{open:true,type:"create",submissionById:items===null||items===void 0?void 0:items.submissionById,leadId:items===null||items===void 0?void 0:items.id}));}})})]})}),children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Quotation_styles_module.quotation_container,children:(Quotation===null||Quotation===void 0?void 0:Quotation.length)>0?Quotation===null||Quotation===void 0?void 0:Quotation.map((item,index)=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mb-2 cursor-pointer",style:{borderBottom:index===(Quotation===null||Quotation===void 0?void 0:Quotation.length)-1?'':'1px solid var(--color-border)',paddingBottom:index===(Quotation===null||Quotation===void 0?void 0:Quotation.length)-1?'':'0.5rem'},onClick:()=>setDrawer(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{open:true,type:"preview",quoteId:item===null||item===void 0?void 0:item.id})),children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-space-between align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"font-size-sm color-dark-800",children:(item===null||item===void 0?void 0:item.quoteNumber)||"No Quote Number"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("span",{className:"font-size-sm color-dark-800",children:["Amount: ",(0,common/* formatCurrency */.vv)((item===null||item===void 0?void 0:item.total)||0)]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-space-between align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"font-size-xs color-dark-sub",children:item.sentDate?"Sent ".concat(moment_default()(item===null||item===void 0?void 0:item.sentDate).fromNow()):"Not yet sent"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Quotations_status/* default */.A,{item:item,onRefresh:onRefresh,permissions:permissions,setDrawer:setDrawer,setNewProject:setNewProject})]})]},"notes-".concat(index))):/*#__PURE__*/(0,jsx_runtime.jsx)(empty/* default */.A,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:50},description:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"font-size-xs color-dark-sub",children:"No Quotation"}),children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{type:"link",onClick:()=>setDrawer(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{open:true,type:"create",submissionById:items===null||items===void 0?void 0:items.submissionById,leadId:items===null||items===void 0?void 0:items.id})),children:"Create Now"})})})});};/* harmony default export */ const Quotation = (LeadsQuotation);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/Drawer/index.tsx + 3 modules
var Drawer = __webpack_require__(2352);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/new-project.tsx
var new_project = __webpack_require__(88374);
;// ./src/Components/Organisms/Leads/Card/index.tsx
const{Paragraph: Card_Paragraph}=typography/* default */.A;const LeadsCards=props=>{const{data,onDelete,onEdit,permissions,onOpenNoteModal,onAttachmentClick}=props;const{onRefresh,allLeads}=data;const userModule=(0,react.useMemo)(()=>new User/* UserModule */.U(),[]);const[users,setUsers]=(0,react.useState)({data:[],loading:false});const{drawer,setDrawer}=(0,hooks/* useQuotationDrawer */.V1)();// Create Project Modal State
const{newProject,setNewProject}=(0,hooks/* useNewProjectModal */.QZ)();/**This function is used to search users by name
   * @param query: { name: string }
  */const getUsers=query=>{var _query;setUsers(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));query={name:((_query=query)===null||_query===void 0?void 0:_query.name)||''};userModule.getAllRecords(query).then(res=>{var _res$data;const data=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;setUsers({data:data,loading:false});}).catch(err=>{const errMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errMessage||"Something went wrong");setUsers(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(allLeads===null||allLeads===void 0?void 0:allLeads.length)===0&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomEmpty */.ZX,{description:"No leads found",className:"my-5"}),/*#__PURE__*/(0,jsx_runtime.jsx)("section",{className:Card_styles_module.leads,children:allLeads===null||allLeads===void 0?void 0:allLeads.map((item,index)=>{var _item$ProjectType,_item$Attachments,_item$Attachments2;const{AssignedTo,Client}=item;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Card_styles_module.lead_item,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Card_styles_module.lead_item_header,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Card_styles_module.lead_item_header_left,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h4",{className:Card_styles_module.lead_item_header_title,children:Client===null||Client===void 0?void 0:Client.name}),(Client===null||Client===void 0?void 0:Client.email)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Card_Paragraph,{className:Card_styles_module.lead_item_header_email,ellipsis:{rows:1,expandable:false},copyable:{text:Client===null||Client===void 0?void 0:Client.email},children:Client===null||Client===void 0?void 0:Client.email}),Client.phone!=="undefined"&&Client.phone&&/*#__PURE__*/(0,jsx_runtime.jsx)(Card_Paragraph,{className:Card_styles_module.lead_item_header_phone,ellipsis:{rows:1,expandable:false},copyable:{text:Client===null||Client===void 0?void 0:Client.phone},children:"+".concat(Client===null||Client===void 0?void 0:Client.phoneCode).concat(Client===null||Client===void 0?void 0:Client.phone)})]})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Card_styles_module.lead_item_header_actions,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Card_styles_module.lead_item_header_actions_items,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(assign_to,{AssignedTo:AssignedTo,avatarSize:24,leadId:item.id,permissions:permissions,loading:users.loading,users:users.data,getUsers:getUsers,reloadTableData:onRefresh}),/*#__PURE__*/(0,jsx_runtime.jsx)(Leads_status,{recordId:item.id,status:item.status,permissions:permissions,reloadTableData:onRefresh}),/*#__PURE__*/(0,jsx_runtime.jsx)(actions,{item:item,onDelete:onDelete,onEdit:onEdit})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column",children:[(item===null||item===void 0?void 0:item.addedDate)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex mt-1 align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* CalenderIcon */.e$,{className:"mr-2",width:13}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"xs",className:"mt-1",children:"Added: ".concat((0,dateHandler/* convertDate */.ic)(item.addedDate,"dd MM yy"))||0})]}),(item===null||item===void 0?void 0:item.dueDateForSubmissions)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex mt-1 align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* CalenderIcon */.e$,{className:"mr-2",width:13}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:(0,common/* isDateGreaterThan */.uh)(item.dueDateForSubmissions,new Date())&&[commonEnums/* LeadsStatus */.Gp['In Progress'],commonEnums/* LeadsStatus */.Gp.New].includes(item.status)?"red-yp":"dark-sub",size:"xs",className:"mt-1",children:"Due Date: ".concat((0,dateHandler/* convertDate */.ic)(item.dueDateForSubmissions,"dd MM yy"))||0})]}),(item===null||item===void 0?void 0:item.modifiedDate)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* CalenderIcon */.e$,{className:"mr-2",width:13}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"xs",className:"mt-1",children:"Modified: ".concat((0,dateHandler/* convertDate */.ic)(item.modifiedDate,"dd MM yy"))||0})]})]})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",className:"mt-1 text-underline",children:"Requirements"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"xs",className:"mt-1 mb-3",children:item.message||"N/A"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:"Project Type: ".concat((item===null||item===void 0?void 0:(_item$ProjectType=item.ProjectType)===null||_item$ProjectType===void 0?void 0:_item$ProjectType.title)||"N/A")}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-inline-flex align-center mt-1",onClick:()=>onAttachmentClick(item),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",className:"cursor-pointer",children:"".concat((item===null||item===void 0?void 0:(_item$Attachments=item.Attachments)===null||_item$Attachments===void 0?void 0:_item$Attachments.length)>0?(item===null||item===void 0?void 0:(_item$Attachments2=item.Attachments)===null||_item$Attachments2===void 0?void 0:_item$Attachments2.length)+" files Attached":"  No Attachments"," ")}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Manage Attachments",children:/*#__PURE__*/(0,jsx_runtime.jsx)(EditOutlined/* default */.A,{className:"ml-2 cursor-pointer"})})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Card_styles_module.lead_item_cards,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Quotation,{items:item,onRefresh:onRefresh,permissions:permissions,setDrawer:setDrawer,setNewProject:setNewProject}),/*#__PURE__*/(0,jsx_runtime.jsx)(Notes,{count:item._count.LeadEnquiryFollowUp,LeadEnquiryFollowUp:item.LeadEnquiryFollowUp,onOpenNoteModal:()=>onOpenNoteModal({open:true,type:"notes",recordId:item.id})})]})]},"leads-".concat(index));})}),drawer.open&&/*#__PURE__*/(0,jsx_runtime.jsx)(Drawer/* default */.A,{drawer:drawer,setDrawer:setDrawer,permissions:permissions,onRefresh:onRefresh}),(newProject===null||newProject===void 0?void 0:newProject.isOpen)&&/*#__PURE__*/(0,jsx_runtime.jsx)(new_project/* default */.A,{setNewProject:setNewProject,newProject:newProject,onRefresh:onRefresh,permissions:permissions})]});};/* harmony default export */ const Card = (LeadsCards);
// EXTERNAL MODULE: ./src/Components/Atoms/CustomFilter/more.tsx
var more = __webpack_require__(38714);
// EXTERNAL MODULE: ./src/Modules/Enquiry/index.ts
var Enquiry = __webpack_require__(81471);
// EXTERNAL MODULE: ./src/Components/Organisms/Leads/FileManagement/index.tsx + 1 modules
var FileManagement = __webpack_require__(99668);
// EXTERNAL MODULE: ./src/Components/Atoms/CardShimmer/index.tsx + 1 modules
var CardShimmer = __webpack_require__(87031);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
;// ./src/Components/Organisms/Leads/actions.tsx
const ActionComponent=props=>{const{record,onEditIconClick,onAddNoteClick,reloadTableData,permissions:{deleteLeads}}=props;const module=(0,react.useMemo)(()=>new Leads/* LeadsModule */.Q(),[]);const[actionState,setActionState]=(0,react.useState)({confirmLoading:false,openPopConfirm:false});const showPopconfirm=()=>setActionState(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{openPopConfirm:true}));const handleDelete=()=>{setActionState(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{confirmLoading:true}));if(deleteLeads===false){message/* default */.Ay.error("You don't have permission to delete this record, please contact your admin.");setActionState(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{confirmLoading:false,openPopConfirm:false}));return;}module.deleteRecord(record.id).then(()=>{setActionState(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{openPopConfirm:false,confirmLoading:false}));reloadTableData();}).catch(err=>{var _err$response,_err$response$data;const errorMessage=err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message;message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setActionState(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{confirmLoading:false,openPopConfirm:false}));});};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Leads_styles_module.actions,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{onClick:()=>onEditIconClick(record),children:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/editicon.svg",alt:"Edit Icon"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{onClick:()=>onAddNoteClick(record),children:/*#__PURE__*/(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#fff",width:19,height:19,children:/*#__PURE__*/(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{open:actionState.openPopConfirm,placement:"rightBottom",title:"Are you sure?",onConfirm:handleDelete,onCancel:()=>setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false})),okButtonProps:{loading:actionState.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:visible=>{if(!visible){setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));}},children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{className:Leads_styles_module.bg__red,onClick:showPopconfirm})})]});};/* harmony default export */ const Leads_actions = (ActionComponent);
;// ./src/Components/Organisms/Leads/table-columns.tsx
const{Paragraph: table_columns_Paragraph}=typography/* default */.A;const LeadsTable=props=>{const{tableData,tableLoading,emptyText,reloadTableData,onEditIconClick,onAddNoteClick,permissions,rowSelection}=props;const{updateLeads}=permissions;const userModule=(0,react.useMemo)(()=>new User/* UserModule */.U(),[]);const[users,setUsers]=(0,react.useState)({data:[],loading:false});const getUsers=query=>{var _query;setUsers(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));query={name:((_query=query)===null||_query===void 0?void 0:_query.name)||''};userModule.getAllRecords(query).then(res=>{var _res$data;const data=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;setUsers({data:data,loading:false});}).catch(err=>{var _err$response,_err$response$data;message/* default */.Ay.error((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||"Something went wrong");setUsers(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});};const columns=[{title:"S.No",dataIndex:"index",key:"index",render:(_text,_record,index)=>index+1,width:"60px"},{title:"Message/Note",dataIndex:"message",key:"message",render:(message,record)=>{const{LeadEnquiryFollowUp,status,id}=record;return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{backgroundColor:"var(--color-border)",padding:"10px",borderRadius:"2px",fontSize:"var(--font-size-sm)",display:'flex',flexDirection:'column'},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{marginBottom:'8px'},children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{dangerouslySetInnerHTML:{__html:message}})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{display:'flex',alignItems:'center'},children:[(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)===0&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"xs",fontSize:"xs",type:"plain",className:"mr-2 w-100",onClick:()=>onAddNoteClick(record),children:"Add Note"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Leads_status,{recordId:id,status:status,permissions:permissions,reloadTableData:reloadTableData})]})]}),(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)>0&&/*#__PURE__*/(0,jsx_runtime.jsx)(card/* default */.A,{size:"small",title:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-space-between align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-main",size:"sm",weight:"semi",children:"Notes"}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:updateLeads===false?"You don't have permission to add notes":"",children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{type:"link",size:"small",onClick:()=>onAddNoteClick(record),style:{padding:"0px 0.5rem",margin:0,fontSize:'12px',fontWeight:500,color:"var(--color-dark-sub)",backgroundColor:"var(--color-inactive)"},disabled:updateLeads===false,children:"Manage Notes"})})]}),headStyle:{padding:"0px 0.5rem",margin:0},className:"mt-2",children:(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)>0?LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.map((item,index)=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"mb-2",style:{borderBottom:index===(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)-1?'':'1px solid var(--color-border)',paddingBottom:index===(LeadEnquiryFollowUp===null||LeadEnquiryFollowUp===void 0?void 0:LeadEnquiryFollowUp.length)-1?'':'0.5rem'},children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"font-size-sm color-dark-800",children:item.AddedBy.firstName+" "+item.AddedBy.lastName}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"font-size-xs color-dark-sub ml-2",style:{opacity:0.7},children:moment_default()(item===null||item===void 0?void 0:item.addedDate).fromNow()})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(table_columns_Paragraph,{ellipsis:{rows:2,expandable:true},className:"font-size-xs color-dark-sub mb-0",children:item===null||item===void 0?void 0:item.note})]},"notes-".concat(index))):/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"font-size-xs color-dark-sub text-center",children:"No Notes"})})]});}},// {
//   title: 'Client Name',
//   dataIndex: "Client",
//   key: "client",
//   render: (client: LeadsTypes['Client']) => client?.name || 'N/A',
//   width: "150px",
// },
{title:'Client Info',dataIndex:"Client",key:"ClientInfo",render:client=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",style:{fontSize:'24px'},children:"Name: ".concat((client===null||client===void 0?void 0:client.name)||'N/A')}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",className:"",size:"sm",style:{fontSize:'24px'},children:"Email: ".concat((client===null||client===void 0?void 0:client.email)||'N/A')}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",style:{fontSize:'20px'},children:"Phone: ".concat((client===null||client===void 0?void 0:client.phone)||'N/A')})]}),width:"220px"},{title:'Project Type',dataIndex:"ProjectType",key:"ProjectType",render:projectType=>(projectType===null||projectType===void 0?void 0:projectType.title)||'N/A',width:"180px"},{title:'Assigned To',dataIndex:"AssignedTo",key:"AssignedTo",render:(AssignedTo,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(assign_to,{AssignedTo:AssignedTo,leadId:record.id,permissions:permissions,loading:users.loading,users:users.data,getUsers:getUsers,reloadTableData:reloadTableData}),width:"180px"},{title:'Date',dataIndex:"added",key:"added",render:(_user,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"d-flex",children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"my-auto",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:"Added: ".concat((0,dateHandler/* convertDate */.ic)(record===null||record===void 0?void 0:record.addedDate,"dd M,yy-t"))}),(record===null||record===void 0?void 0:record.modifiedDate)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:"Modified: ".concat((0,dateHandler/* convertDate */.ic)(record===null||record===void 0?void 0:record.modifiedDate,"dd M,yy-t"))}),(record===null||record===void 0?void 0:record.dueDateForSubmissions)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:"End Date: ".concat((0,dateHandler/* convertDate */.ic)(record===null||record===void 0?void 0:record.dueDateForSubmissions,"dd M,yy-t"))})]})}),width:"15%"},{title:"Actions",dataIndex:"actions",key:"actions",render:(_actions,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Leads_actions,{record:record,onEditIconClick:onEditIconClick,reloadTableData:reloadTableData,onAddNoteClick:onAddNoteClick,permissions:permissions}),width:"120px"}];return/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{sticky:true,dataSource:tableData,columns:columns,pagination:false,scroll:{x:991},loading:tableLoading,rowKey:record=>"leads-".concat(record.id),locale:{emptyText:emptyText},rowSelection:rowSelection});};/* harmony default export */ const table_columns = (LeadsTable);
// EXTERNAL MODULE: ./node_modules/antd/es/modal/index.js + 7 modules
var es_modal = __webpack_require__(32645);
;// ./src/Components/Organisms/Leads/PopModel/index.tsx
const AddNoteModal=_ref=>{let{visible,onClose,onSave,record}=_ref;const[note,setNote]=(0,react.useState)('');const handleSave=()=>{if(note.trim()){onSave(note);setNote('');onClose();}};return/*#__PURE__*/(0,jsx_runtime.jsx)(es_modal/* default */.A,{title:"Add Note for Lead ".concat(record.id),visible:visible,onCancel:onClose,footer:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{onClick:onClose,children:"Cancel"},"cancel"),/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{type:"primary",onClick:handleSave,children:"Save"},"save")],children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{label:"Note",children:/*#__PURE__*/(0,jsx_runtime.jsx)(input/* default */.A.TextArea,{rows:4,value:note,onChange:e=>setNote(e.target.value)})})})});};/* harmony default export */ const PopModel = (AddNoteModal);
;// ./src/Components/Organisms/Leads/index.tsx
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:false,text:"Leads"}];const Leads_Leads=()=>{var _enquiries$data,_representatives$data,_projectTypes$data,_clients$data,_assignedTo$data;const[searchTerm,setSearchTerm]=(0,react.useState)();const[isModalVisible,setIsModalVisible]=(0,react.useState)(false);const[selectedRecord,setSelectedRecord]=(0,react.useState)(null);const[titleSearchTerm,setTitleSearchTerm]=(0,react.useState)("");const[selectedRowKeys,setSelectedRowKeys]=(0,react.useState)([]);const debouncedTitleSearchTerm=(0,useDebounce/* useDebounce */.d)(titleSearchTerm,500);const leadsModule=new Leads/* LeadsModule */.Q();// Search Debounce
const debouncedSearchTerm=(0,useDebounce/* useDebounce */.d)(searchTerm,500);const reloadTableData=()=>{// Implement the logic to reload the table data
};const handleNoteSave=async(note,isConcern)=>{if(selectedRecord){const recordId=selectedRecord.id;try{// Call the API to save the note using leadsModule instance
const response=await leadsModule.addNote(recordId,{note,isConcern});// Handle successful response
console.log('Note saved successfully:',response);message/* default */.Ay.success('Note saved successfully');// Optionally, you might want to update the UI or perform additional actions
// For example, you could close the modal
setIsModalVisible(false);// Assuming you have a state to control modal visibility
}catch(error){// Handle error response
console.error('Error saving note:',error);// const errMessage = error.response?.data?.message || 'Error saving note'; // Define errMessage here
// message.error(errMessage);
}}};const handleAddNoteClick=record=>{setSelectedRecord(record);setIsModalVisible(true);};const handleModalClose=()=>{setIsModalVisible(false);setSelectedRecord(null);};const handleRowSelectionChange=selectedKeys=>{setSelectedRowKeys(selectedKeys);};// available permissions for this page
const permissionSlug=(0,common/* getPermissionSlugs */.AH)(Leads_permissions/* LeadsPermissionsEnum */.p);// Quotation permissions slugs
const quotationPermissionSlug=(0,common/* getPermissionSlugs */.AH)(Quotation_permissions/* QuotationPermissionsEnum */.Y);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readLeads,createLeads,updateLeads,deleteLeads}=permissions;const module=(0,react.useMemo)(()=>new Leads/* LeadsModule */.Q(),[]);const clientModule=(0,react.useMemo)(()=>new Client/* ClientModule */.u(),[]);const userModule=(0,react.useMemo)(()=>new User/* UserModule */.U(),[]);const enquiryModule=(0,react.useMemo)(()=>new Enquiry/* EnquiryModule */.y(),[]);const projectTypeModule=(0,react.useMemo)(()=>new ProjectType/* ProjectTypeModule */.g(),[]);// Status Filters
const statusValues={active:[commonEnums/* LeadsStatus */.Gp.New,commonEnums/* LeadsStatus */.Gp["In Progress"]],confirmed:[commonEnums/* LeadsStatus */.Gp.Confirmed],unqualified:[commonEnums/* LeadsStatus */.Gp["Invalid Request"],commonEnums/* LeadsStatus */.Gp.Spam,commonEnums/* LeadsStatus */.Gp.Canceled,commonEnums/* LeadsStatus */.Gp.Unqualified]};const handleNoteSaveWrapper=note=>{// Default value for isConcern
const isConcern=false;// Adjust based on your logic or UI state
handleNoteSave(note,isConcern);};const{data,onRefresh,meta,loading}=(0,hooks/* useFetchData */.Gs)({method:module.getAllRecords,initialQuery:{__status:statusValues.active}});// Status Counts
const{data:statusCounts,onRefresh:onRefreshStatusCount}=(0,hooks/* useFetchData */.Gs)({method:module.getCounts});const[modalOpen,setModalOpen]=(0,react.useState)({type:"new",recordId:0,open:false});const[filesDrawer,setFilesDrawer]=(0,react.useState)({open:false,record:null});const[selectedFilters,setSelectedFilters]=(0,react.useState)({dateRange:[""],__status:statusValues.active,sortOrder:"",sortByField:""});const[moreFilters,setMoreFilters]=(0,react.useState)([]);const[reset,setReset]=(0,react.useState)(false);const[excelData]=(0,react.useState)([]);// client search term
const[clientTerm,setClientTerm]=(0,react.useState)("");// Search Debounce
const debouncedClientTerm=(0,useDebounce/* useDebounce */.d)(clientTerm,500);// enquiry search term
const[enquiryTerm,setEnquiryTerm]=(0,react.useState)("");// Search Debounce
const debouncedEnquiryTerm=(0,useDebounce/* useDebounce */.d)(enquiryTerm,500);// representative search term
const[representativeTerm,setRepresentativeTerm]=(0,react.useState)("");// Search Debounce
const debouncedRepresentativeTerm=(0,useDebounce/* useDebounce */.d)(representativeTerm,500);// assigned to search term
const[assignedToTerm,setAssignedToTerm]=(0,react.useState)("");// Search Debounce
const debouncedAssignedToTerm=(0,useDebounce/* useDebounce */.d)(assignedToTerm,500);// project type search term
const[projectTypeTerm,setProjectTypeTerm]=(0,react.useState)("");// Search Debounce
const debouncedProjectTypeTerm=(0,useDebounce/* useDebounce */.d)(projectTypeTerm,500);const[clients,setClients]=(0,react.useState)({data:[],loading:false});const[enquiries,setEnquiries]=(0,react.useState)({data:[],loading:false});const[representatives,setRepresentatives]=(0,react.useState)({data:[],loading:false});const[assignedTo,setAssignedTo]=(0,react.useState)({data:[],loading:false});const[projectTypes,setProjectTypes]=(0,react.useState)({data:[],loading:false});// headers for the excel export
const headers=[{label:"Name",key:"name"},{label:"Email",key:"email"}];const[projectViewAs,setProjectViewAs]=(0,react.useState)(()=>{const viewAs=localStorage.getItem("projectViewAs");if(viewAs==="table"){return"table";}return"grid";});const onSelected=event=>{const{name,value}=event===null||event===void 0?void 0:event.target;const fieldsNames=["clientId","enquiryId","projectTypeId","representativeId"];if(fieldsNames.includes(name)){const isValidNumber=(0,common/* isNumber */.Et)(value);if(!isValidNumber){let label="";switch(name){case"clientId":label="Client ID";break;case"enquiryId":label="Enquiry ID";break;case"projectTypeId":label="Project Type ID";break;case"representativeId":label="Representative ID";break;case"assignedToId":label="Assigned To ID";break;}return message/* default */.Ay.error("".concat(label," should be a number"));}}setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{[name]:value}));};const onReset=(0,react.useCallback)((name,value)=>{if(name){setReset(true);setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{[name]:value}));}},[selectedFilters]);const onModalOpen=_ref=>{let{type,recordId,open}=_ref;return setModalOpen({type,recordId,open});};const onAddNewClick=()=>{if(createLeads===false){message/* default */.Ay.error("You don't have permission to create new record");return;}onModalOpen({type:"new",open:true,recordId:0});};const onEditIconClick=recordId=>{if(updateLeads===false){message/* default */.Ay.error("You don't have permission to update record");return;}onModalOpen({type:"edit",open:true,recordId:recordId});};/**Function to delete a lead
   * @param {number} id id of the lead to be deleted
   */const onDelete=id=>{if(deleteLeads===true){module.deleteRecord(id).then(()=>{onRefresh();onRefreshStatusCount();}).catch(err=>{const errorMessages=err.response.data.message||"Something went wrong!";message/* default */.Ay.error(errorMessages);});}else{message/* default */.Ay.error("You don't have permission to delete this lead, Please contact your admin");}};const onUpdate=(0,react.useCallback)(query=>{var _selectedFilters$date,_selectedFilters$date2;const fromDateString=((_selectedFilters$date=selectedFilters.dateRange)===null||_selectedFilters$date===void 0?void 0:_selectedFilters$date[0])||"";const toDateString=((_selectedFilters$date2=selectedFilters.dateRange)===null||_selectedFilters$date2===void 0?void 0:_selectedFilters$date2[1])||"";const fromDate=fromDateString?(0,dateHandler/* convertDate */.ic)(fromDateString,"yy-mm-dd"):undefined;const toDate=toDateString?(0,dateHandler/* convertDate */.ic)(toDateString,"yy-mm-dd"):undefined;const data=(0,objectSpread2/* default */.A)({fromDate:fromDate,toDate:toDate,__status:selectedFilters.__status||undefined,clientId:selectedFilters.clientId||undefined,// assignedToId: debouncedKeySearchTerm || undefined,
enquiryId:selectedFilters.enquiryId||undefined,projectTypeId:selectedFilters.projectTypeId||undefined,representativeId:selectedFilters.representativeId||undefined,fetchCompleted:selectedFilters.fetchCompleted||undefined,sortOrder:selectedFilters.sortOrder||undefined,sortByField:selectedFilters.sortByField||undefined,hasConcerns:selectedFilters.hasConcerns||undefined,assignedToId:selectedFilters.assignedToId||undefined,projectTypeTitle:debouncedTitleSearchTerm||selectedFilters.projectTypeTitle||undefined},query);// get the data from the api
onRefresh(data);// get the status counts
onRefreshStatusCount();},[selectedFilters,debouncedTitleSearchTerm]);const onPaginationChange=(page,pageSize)=>onUpdate({page,perPage:pageSize});const moreFiltersOptions=[{label:"Enquiry",value:"enquiryId"},{label:"Representative",value:"representativeId"},{label:"Project Type",value:"projectTypeId"}];const sortByField=[{label:"Name",value:"name"},{label:"Email",value:"email"},{label:"Date Added",value:"addedDate"}];const moreComponents={enquiryId:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Enquiry",name:"enquiryId",withSearch:true,options:enquiries===null||enquiries===void 0?void 0:(_enquiries$data=enquiries.data)===null||_enquiries$data===void 0?void 0:_enquiries$data.map(item=>{return{label:item.name,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.enquiryId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.enquiryId):"",onReset:()=>{onReset("enquiryId",0);// reset the search term
setEnquiryTerm("");},onUpdate:onUpdate// START: For search
,loading:enquiries===null||enquiries===void 0?void 0:enquiries.loading,searchTerm:enquiryTerm,onSearch:event=>setEnquiryTerm(event.currentTarget.value)// END: For search
,defaultVisible:moreFilters.includes("enquiryId")}),representativeId:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Representative",name:"representativeId",withSearch:true,options:representatives===null||representatives===void 0?void 0:(_representatives$data=representatives.data)===null||_representatives$data===void 0?void 0:_representatives$data.map(item=>{return{label:item.name,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.representativeId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.representativeId):"",onReset:()=>{onReset("representativeId",0);// reset the search term
setRepresentativeTerm("");},onUpdate:onUpdate// START: For search
,loading:representatives===null||representatives===void 0?void 0:representatives.loading,searchTerm:representativeTerm,onSearch:event=>setRepresentativeTerm(event.currentTarget.value)// END: For search
,defaultVisible:moreFilters.includes("representativeId")}),projectTypeId:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Project Type",name:"projectTypeId",withSearch:true,options:projectTypes===null||projectTypes===void 0?void 0:(_projectTypes$data=projectTypes.data)===null||_projectTypes$data===void 0?void 0:_projectTypes$data.map(item=>{return{label:item.title,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectTypeId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectTypeId):"",onReset:()=>{onReset("projectTypeId",0);// reset the search term
setProjectTypeTerm("");},onUpdate:onUpdate// START: For search
,loading:projectTypes===null||projectTypes===void 0?void 0:projectTypes.loading,searchTerm:projectTypeTerm,onSearch:event=>setProjectTypeTerm(event.currentTarget.value)// END: For search
,defaultVisible:moreFilters.includes("projectTypeId")})};/** Get the search result for the client */const GetSearchClients=(0,react.useCallback)(()=>{if(debouncedClientTerm){setClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));clientModule.findPublished({name:debouncedClientTerm}).then(res=>{var _res$data;const data=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;setClients(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data;return!(prev!==null&&prev!==void 0&&(_prev$data=prev.data)!==null&&_prev$data!==void 0&&_prev$data.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedClientTerm]);/** Get the search result for the enquiry */const GetSearchEnquiries=(0,react.useCallback)(()=>{if(debouncedEnquiryTerm){setEnquiries(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));enquiryModule.getAllRecords({name:debouncedEnquiryTerm}).then(res=>{var _res$data2;const data=res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data;setEnquiries(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data2;return!(prev!==null&&prev!==void 0&&(_prev$data2=prev.data)!==null&&_prev$data2!==void 0&&_prev$data2.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setEnquiries(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedEnquiryTerm]);/** Get the search result for the representative */const GetSearchRepresentatives=(0,react.useCallback)(()=>{if(debouncedRepresentativeTerm){setRepresentatives(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));clientModule.findPublished({name:debouncedRepresentativeTerm}).then(res=>{var _res$data3;const data=res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data;setRepresentatives(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data3;return!(prev!==null&&prev!==void 0&&(_prev$data3=prev.data)!==null&&_prev$data3!==void 0&&_prev$data3.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setRepresentatives(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedRepresentativeTerm]);/** Get the search result for the assigned to */const GetSearchAssignedTo=(0,react.useCallback)(()=>{if(debouncedAssignedToTerm){setAssignedTo(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));userModule.getAllRecords({name:debouncedAssignedToTerm}).then(res=>{var _res$data4;const data=res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.data;setAssignedTo(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data4;return!(prev!==null&&prev!==void 0&&(_prev$data4=prev.data)!==null&&_prev$data4!==void 0&&_prev$data4.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setAssignedTo(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedAssignedToTerm]);/** Get the search result for the project type */const GetSearchProjectTypes=(0,react.useCallback)(()=>{if(debouncedProjectTypeTerm){setProjectTypes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));projectTypeModule.getPublishRecords({title:debouncedProjectTypeTerm}).then(res=>{var _res$data5;const data=res===null||res===void 0?void 0:(_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.data;setProjectTypes(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data5;return!(prev!==null&&prev!==void 0&&(_prev$data5=prev.data)!==null&&_prev$data5!==void 0&&_prev$data5.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setProjectTypes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedProjectTypeTerm]);(0,react.useEffect)(()=>{if(reset){onUpdate();}// after 2 seconds set reset clicked state to false
const timer=setTimeout(()=>{setReset(false);},2000);return()=>clearTimeout(timer);},[reset,selectedFilters,onUpdate]);(0,react.useEffect)(()=>{onUpdate({projectTypeTitle:debouncedTitleSearchTerm});},[debouncedTitleSearchTerm,onUpdate]);(0,react.useEffect)(()=>{GetSearchAssignedTo();},[GetSearchAssignedTo]);(0,react.useEffect)(()=>{GetSearchClients();},[GetSearchClients]);(0,react.useEffect)(()=>{GetSearchEnquiries();},[GetSearchEnquiries]);(0,react.useEffect)(()=>{GetSearchRepresentatives();},[GetSearchRepresentatives]);(0,react.useEffect)(()=>{GetSearchAssignedTo();},[GetSearchAssignedTo]);(0,react.useEffect)(()=>{GetSearchProjectTypes();},[GetSearchProjectTypes]);const onSearchChange=e=>{setTitleSearchTerm(e.target.value);};const segmentedOptions=[{label:"All (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.all)||0,")"),value:"all"},{label:"Active (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.active)||0,")"),value:"active"},{label:"Has Concerns (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.hasConcerns)||0,")"),value:"hasConcerns"},{label:"Confirmed (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.confirmed)||0,")"),value:"confirmed"},{label:"Completed (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.completed)||0,")"),value:"completed"},{label:"Unqualified (".concat((statusCounts===null||statusCounts===void 0?void 0:statusCounts.unqualified)||0,")"),value:"unqualified"}];return/*#__PURE__*/(0,jsx_runtime.jsxs)(Layout/* default */.A,{permissionSlug:[...permissionSlug,...quotationPermissionSlug,Client_permissions/* ClientPermissionsEnum */.j.CREATE],children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* PageHeader */.zY,{heading:"Leads",breadCrumbData:breadCrumbsData,showAdd:permissions.createLeads===true?true:false,buttonText:"Add Lead",onButtonClick:onAddNewClick,positionChildren:"new-line",filters:readLeads?/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{name:"projectTypeTitle"// placeholder="Search by Project Type"
,onChange:onSearchChange,value:titleSearchTerm,style:{maxWidth:200}})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{overflow:"auto"},children:/*#__PURE__*/(0,jsx_runtime.jsx)(segmented/* default */.A,{size:"middle",defaultValue:"active",options:segmentedOptions.map(item=>{return (0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},item),{},{title:item.label,value:item.value});}),style:{fontSize:"var(--font-size-sm)"},onChange:value=>{if(value==="all"){setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{fetchCompleted:undefined}));onReset("__status","");}else if(value==="hasConcerns"){onUpdate({hasConcerns:true,__status:undefined});}else if(value==="completed"){const finalValues={fetchCompleted:true,__status:undefined};onUpdate(finalValues);setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),finalValues));}else{const finalValues={fetchCompleted:undefined,__status:statusValues[value]};onUpdate(finalValues);setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),finalValues));}}})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Client",name:"clientId",withSearch:true,options:clients===null||clients===void 0?void 0:(_clients$data=clients.data)===null||_clients$data===void 0?void 0:_clients$data.map(item=>{return{label:item.name,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.clientId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.clientId):"",onReset:()=>{onReset("clientId",0);// reset the search term
setClientTerm("");},onUpdate:onUpdate// START: For search
,loading:clients===null||clients===void 0?void 0:clients.loading,searchTerm:clientTerm,onSearch:event=>setClientTerm(event.currentTarget.value)// END: For search
})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Assigned To",name:"assignedToId",withSearch:true,options:assignedTo===null||assignedTo===void 0?void 0:(_assignedTo$data=assignedTo.data)===null||_assignedTo$data===void 0?void 0:_assignedTo$data.map(item=>{return{label:"".concat(item.firstName," ").concat(item.lastName),value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.assignedToId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.assignedToId):"",onReset:()=>{onReset("assignedToId",0);// reset the search term
setAssignedToTerm("");},onUpdate:onUpdate// START: For search
,loading:assignedTo===null||assignedTo===void 0?void 0:assignedTo.loading,searchTerm:assignedToTerm,onSearch:event=>setAssignedToTerm(event.currentTarget.value)// END: For search
,defaultVisible:moreFilters.includes("assignedToId")})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"datepicker",label:"Date",name:"dateRange",onChange:value=>setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{dateRange:value})),onReset:()=>onReset("dateRange",[]),onUpdate:onUpdate})}),/**  Find the selected filter and render the component based on the name of the filter */Object.keys(moreComponents).map(key=>{const _key=key;return moreFilters!==null&&moreFilters!==void 0&&moreFilters.includes(_key)?moreComponents[_key]:null;}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(more/* default */.A,{options:moreFiltersOptions===null||moreFiltersOptions===void 0?void 0:moreFiltersOptions.map(option=>({label:option.label,value:option.value})),onChange:value=>setMoreFilters(value),value:moreFilters})}),/*#__PURE__*/(0,jsx_runtime.jsx)(segmented/* default */.A,{options:[{label:"Grid View",value:"grid"},{label:"Table View",value:"table"}],value:projectViewAs,onChange:value=>{setProjectViewAs(value);localStorage.setItem("projectViewAs",value);}}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{marginLeft:"auto",marginRight:"0px"},children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Sort By",name:"sortByField",options:sortByField,value:selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.sortByField,onChange:onSelected,onReset:()=>onReset("sortByField",""),onUpdate:onUpdate,withSort:true})})]}):null,excelExport:readLeads===true&&(data===null||data===void 0?void 0:data.length)>0&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* ExcelExport */.yh,{fileName:"Leads",headers:headers,data:excelData,icon:/*#__PURE__*/(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",className:"mr-1",children:/*#__PURE__*/(0,jsx_runtime.jsx)("path",{fill:"#42526E",d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2zm1.06 10.33c0 .41-.34.75-.75.75s-.75-.34-.75-.75V9.31l-7.72 7.72c-.15.15-.34.22-.53.22s-.38-.07-.53-.22a.754.754 0 010-1.06l7.72-7.72h-3.02c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h4.83c.41 0 .75.34.75.75v4.83z"})})})}),!data&&loading&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{display:"flex",flexWrap:"wrap",width:"100%",gap:10},children:Array(6).fill(0).map((_item,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)(CardShimmer/* CardShimmer */.S,{},"shimmerItem-".concat(index)))}),readLeads===true&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.antdTableWrapper,children:[projectViewAs==="grid"?/*#__PURE__*/(0,jsx_runtime.jsx)(Card,{permissions:permissions,onDelete:onDelete,onEdit:onEditIconClick,onOpenNoteModal:onModalOpen,data:{allLeads:data,onRefresh:()=>{onUpdate({perPage:(meta===null||meta===void 0?void 0:meta.perPage)||10,page:(meta===null||meta===void 0?void 0:meta.page)||1});// refresh the status counts
onRefreshStatusCount();}},onAttachmentClick:record=>setFilesDrawer({open:true,record:record})}):/*#__PURE__*/(0,jsx_runtime.jsx)(table_columns,{tableData:data||[],tableLoading:false,emptyText:"No leads available",reloadTableData:reloadTableData,onEditIconClick:record=>onEditIconClick(record.id),onAddNoteClick:handleAddNoteClick,permissions:permissions,rowSelection:{selectedRowKeys,onChange:handleRowSelectionChange}}),selectedRecord&&/*#__PURE__*/(0,jsx_runtime.jsx)(PopModel,{visible:isModalVisible,onClose:handleModalClose,onSave:handleNoteSaveWrapper,record:selectedRecord})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Pagination */.dK,{total:meta===null||meta===void 0?void 0:meta.total,current:meta===null||meta===void 0?void 0:meta.page,defaultPageSize:meta!==null&&meta!==void 0&&meta.perPage?meta===null||meta===void 0?void 0:meta.perPage:10,pageSizeOptions:[10,20,50,100],onChange:onPaginationChange})]}),readLeads===false&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),modalOpen.open&&/*#__PURE__*/(0,jsx_runtime.jsx)(LeadsModal,{record:modalOpen.recordId,type:modalOpen.type,openModal:modalOpen.open,permissions:permissions,onCancel:()=>onModalOpen({type:"new",recordId:0,open:false}),reloadTableData:()=>{onUpdate({perPage:(meta===null||meta===void 0?void 0:meta.perPage)||10,page:(meta===null||meta===void 0?void 0:meta.page)||1});}}),filesDrawer.open&&/*#__PURE__*/(0,jsx_runtime.jsx)(FileManagement/* default */.A,{open:filesDrawer.open,record:filesDrawer.record,permissions:permissions,onClose:()=>setFilesDrawer({open:false,record:null}),onRefresh:()=>{onUpdate({perPage:(meta===null||meta===void 0?void 0:meta.perPage)||10,page:(meta===null||meta===void 0?void 0:meta.page)||1});// refresh the status counts
onRefreshStatusCount();}})]});};/* harmony default export */ const Organisms_Leads = (Leads_Leads);

/***/ }),

/***/ 64913:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ AccountModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class AccountModule{constructor(){this.endPoint="account";/**Get all Account records
     * @param query - query params
     */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Get Account record by id
     * @param id - Account id
     */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/**Delete Account record
    * @param id - Account id
    */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/**Create new Account record
     * @param data - Account data
     */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};/**Update Account record
    * @param data - Account data
    * @param id - Account id
    */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};}}

/***/ }),

/***/ 65450:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ BrandingThemeModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class BrandingThemeModule{constructor(){this.endPoint="branding-theme";/** Get All Records */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/** Get Record By Id */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/** Delete Record By Id */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/** Create Record */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};/** Update Record */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};}}

/***/ }),

/***/ 97097:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ ClientModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class ClientModule{constructor(){this.endPoint="client";/**Get all Client records
     * @param query - query params
     */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Get Client record by id
     * @param id - Client id
     */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/**Find published client records
     * @param query - query params
     */this.findPublished=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/find-published"),{params:query});};/**Delete Client record
    * @param id - Client id
    */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/**Create new Client record
     * @param data - Client data
     */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};/**Update Client record
    * @param data - Client data
    * @param id - Client id
    */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};}}

/***/ }),

/***/ 80145:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   U: () => (/* binding */ ProductModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class ProductModule{constructor(){this.endPoint="product";/** Get All Records */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Find published client records
	* @param slug - product slug
	*/this.findByCode=slug=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/find-by-product-code/").concat(slug));};/** Get Record By Id
	 * @param id - Product id
	 */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/** Delete Record By Id
	 * @param id - Product id
	 */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/** Create Record 
	 * @param data - Product data
	*/this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};/** Update Record
	 * @param data - Product data
	 */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};}}

/***/ }),

/***/ 83480:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ QuotationModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _modules_Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class QuotationModule{constructor(){this.endPoint="quotation";/** Get all quotation records
   * @param query - query params
   */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};this.fetchTasksAssignedToMe=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/tasks/assignedToMe"),{params:query});};/** Get quotation record by id
   * @param id - quotation id
   */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/findOne/").concat(id));};/** Create new quotation record
   * @param data - quotation data
   */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};/** autoCreateFromApprovedQuotation
   * @param {AutoCreateFromApprovedQuotationTypes} data - Data to be created
   */this.autoCreateFromApprovedQuotation=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post("".concat(this.endPoint,"/autoCreateProjectFromApprovedQuotation/"),data);};/** Update quotation record
   * @param data - quotation data
   * @param id - quotation id
   */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/updateOne/").concat(id),data);};/** Submit quotation by id
   * @param id - quotation id
   */this.submitQuotation=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/submitQuotation/").concat(id));};/** Change quotation status
   * @param id - quotation id
   * @param status - quotation status
   */this.changeStatus=(id,status)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/changeStatus/").concat(id),{status});};/** Delete quotation record
   * @param id - quotation id
   */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/remove/").concat(id));};/** Mark Milestone as completed
   * @param id - milestone id
   */this.completeMilestone=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/completeMilestone/").concat(id));};/** Mark As Sent 
   * @param id - quotation id
   */this.markAsSent=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/markAsSent/").concat(id));};/** Prepare Unique Quote Number */this.prepareUniqueQuoteNumber=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/prepareUniqueQuoteNumber"),{params:query});};/** Check for duplicacy */this.checkForDuplicacy=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/checkForDuplicacy"),{params:query});};/** Quick Update 
   * @param id - quotation id
   * @param data.projectId - project id
   * @param data.submissionById - submission by id
   */this.quickUpdate=(id,data)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/quickUpdate/").concat(id),data);};}async fetchPaymentTermsByProjectId(projectId){try{// Fetch data from API
const response=await this.getAllRecords({projectId});// Log the entire response and response.data to inspect the format
console.log("API Response:",response);console.log("Response Data:",response.data);// Check if response.data is an object with a specific property containing the array
if(response.data&&response.data.data&&Array.isArray(response.data.data)){const quotations=response.data.data;// Extract payment terms from each quotation and flatten the array
const paymentTerms=quotations.flatMap(q=>q.paymentTerms||[]);return paymentTerms;}else{// Handle unexpected data format
console.error("Unexpected response data format:",response);throw new Error("Unexpected response data format");}}catch(error){console.error("Error fetching payment terms:",error);throw error;// Re-throw error for further handling if necessary
}}/** Fetch overall payment status
   * @param query - query params
   */ /** Update overall payment status
   * @param status - payment status
   */}

/***/ }),

/***/ 20761:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ TaxRateModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class TaxRateModule{constructor(){this.endPoint="tax-rate";/**Get all TaxRate records
     * @param query - query params
     */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Get TaxRate record by id
     * @param id - TaxRate id
     */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/**Delete TaxRate record
    * @param id - TaxRate id
    */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/**Create new TaxRate record
     * @param data - TaxRate data
     */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};/**Update TaxRate record
    * @param data - TaxRate data
    * @param id - TaxRate id
    */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};}}

/***/ }),

/***/ 90582:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58168);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var _ant_design_icons_svg_es_asn_EditOutlined__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(42701);
/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(61187);

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY




var EditOutlined = function EditOutlined(props, ref) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)({}, props, {
    ref: ref,
    icon: _ant_design_icons_svg_es_asn_EditOutlined__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A
  }));
};
if (false) {}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(EditOutlined));

/***/ }),

/***/ 72906:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ icons_MoreOutlined)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/extends.js
var esm_extends = __webpack_require__(58168);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
;// ./node_modules/@ant-design/icons-svg/es/asn/MoreOutlined.js
// This icon file is generated automatically.
var MoreOutlined = {
  "icon": {
    "tag": "svg",
    "attrs": {
      "viewBox": "64 64 896 896",
      "focusable": "false"
    },
    "children": [{
      "tag": "path",
      "attrs": {
        "d": "M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"
      }
    }]
  },
  "name": "more",
  "theme": "outlined"
};
/* harmony default export */ const asn_MoreOutlined = (MoreOutlined);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/components/AntdIcon.js + 5 modules
var AntdIcon = __webpack_require__(61187);
;// ./node_modules/@ant-design/icons/es/icons/MoreOutlined.js

// GENERATE BY ./scripts/generate.ts
// DON NOT EDIT IT MANUALLY




var MoreOutlined_MoreOutlined = function MoreOutlined(props, ref) {
  return /*#__PURE__*/react.createElement(AntdIcon/* default */.A, (0,esm_extends/* default */.A)({}, props, {
    ref: ref,
    icon: asn_MoreOutlined
  }));
};
if (false) {}
/* harmony default export */ const icons_MoreOutlined = (/*#__PURE__*/react.forwardRef(MoreOutlined_MoreOutlined));

/***/ })

}]);