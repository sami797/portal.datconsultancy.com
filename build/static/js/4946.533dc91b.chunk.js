"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[4946],{

/***/ 14234:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(30377);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(73780);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(46005);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(9206);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(81541);
/* harmony import */ var _helpers_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(65944);
/* harmony import */ var hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(91970);
/* harmony import */ var _modules_Permits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(30982);
/* harmony import */ var _styles_module_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60388);
/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(92966);
/* harmony import */ var _icons_external__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(19642);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(44414);
const{Text}=antd__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A;const ViewPermitFiles=props=>{var _data$Resources;const{onClose,open,id}=props;const module=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>new _modules_Permits__WEBPACK_IMPORTED_MODULE_3__/* .PermitsModule */ .v(),[]);const access_token=_services_tokenService__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.getLocalAccessToken();const{data,loading}=(0,hooks__WEBPACK_IMPORTED_MODULE_2__/* .useConditionFetchData */ .P6)({method:()=>module.getRecordById(id),condition:!!id&&open&&id>0});return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A,{open:open,onClose:onClose,width:window.innerWidth>500?500:"100%",title:"".concat(data===null||data===void 0?void 0:data.title," Files"),placement:"right",destroyOnClose:true,bodyStyle:{padding:"0px 25px"},children:loading?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A,{active:true}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:data===null||data===void 0?void 0:(_data$Resources=data.Resources)===null||_data$Resources===void 0?void 0:_data$Resources.map((item,idx)=>{var _item$fileType,_item$fileType2;return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:_styles_module_scss__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.permitFiles,children:[(_item$fileType=item.fileType)!==null&&_item$fileType!==void 0&&_item$fileType.includes('image')?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{src:"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_1__/* .PROTECTED_RESOURCE_BASE_URL */ .SO).concat(item.path,"?authKey=").concat(access_token),alt:item.title,width:100,height:70,style:{borderRadius:5,objectFit:'cover'}}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{src:"/images/doc.png",alt:"Document-".concat(idx),width:100,height:70,preview:false,style:{objectFit:'contain'}}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(Text,{ellipsis:{tooltip:item.title},children:item.title||item.name}),!((_item$fileType2=item.fileType)!==null&&_item$fileType2!==void 0&&_item$fileType2.includes('image'))&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A,{title:"View Document",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("a",{href:"".concat(_helpers_constants__WEBPACK_IMPORTED_MODULE_1__/* .APPLICATION_RESOURCE_BASE_URL */ .Ur).concat(item.path),target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_icons_external__WEBPACK_IMPORTED_MODULE_6__/* .ExternalIcon */ .X,{})})})]},idx);})})});};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ViewPermitFiles);

/***/ }),

/***/ 71708:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ States)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./node_modules/antd/es/typography/index.js + 15 modules
var typography = __webpack_require__(30377);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./node_modules/antd/es/dropdown/index.js
var dropdown = __webpack_require__(57811);
// EXTERNAL MODULE: ./node_modules/antd/es/divider/index.js
var divider = __webpack_require__(40895);
// EXTERNAL MODULE: ./node_modules/antd/es/tooltip/index.js
var tooltip = __webpack_require__(81541);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DownOutlined.js
var DownOutlined = __webpack_require__(73022);
// EXTERNAL MODULE: ./src/Modules/Project/index.ts
var Project = __webpack_require__(50167);
;// ./src/Components/Organisms/Projects/Details/Sections/States/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const styles_module = ({"dropdownOverlay":"styles_dropdownOverlay__8pes8","dropdownContainer":"styles_dropdownContainer__LqiO1","searchContainer":"styles_searchContainer__Xk+nm","searchInput":"styles_searchInput__-3cFL"});
// EXTERNAL MODULE: ./src/Components/Atoms/Input/index.tsx + 2 modules
var Input = __webpack_require__(58516);
// EXTERNAL MODULE: ./src/Components/Atoms/CustomEmpty/index.tsx
var CustomEmpty = __webpack_require__(49758);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/Projects/Details/Sections/States/index.tsx
const{Text}=typography/* default */.A;/** Change States component */const ChangeStates=_ref=>{var _searchedStates$data,_project$ProjectState2,_project$ProjectState3,_project$ProjectState4,_project$ProjectState5;let{data,permissions,style}=_ref;const{projectStates,project:{data:project,onRefresh}}=data;const module=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);const[searchedStates,setSearchedStates]=(0,react.useState)({data:projectStates,query:''});const onStatesChange=stateId=>{const updateData={projectId:project.id,projectStateId:stateId};if(permissions.updateProject===true){module.updateProjectStatus(updateData).then(res=>{const{data}=res;message/* default */.Ay.success((data===null||data===void 0?void 0:data.message)||'States changed successfully');onRefresh();}).catch(err=>{var _err$response,_err$response$data;const errorMessages=err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message;message/* default */.Ay.error(errorMessages||'Something went wrong');});}else{message/* default */.Ay.error('You do not have permission to update project States, please contact your administrator');}};(0,react.useEffect)(()=>{setSearchedStates({data:projectStates,query:''});},[projectStates]);return/*#__PURE__*/(0,jsx_runtime.jsx)(dropdown/* default */.A,{trigger:['click'],menu:{items:(_searchedStates$data=searchedStates.data)===null||_searchedStates$data===void 0?void 0:_searchedStates$data.map(state=>{var _project$ProjectState;return{key:"state-".concat(state.id),label:state.title,onClick:()=>onStatesChange(state.id),disabled:state.id===(project===null||project===void 0?void 0:(_project$ProjectState=project.ProjectState)===null||_project$ProjectState===void 0?void 0:_project$ProjectState.id)};})},overlayClassName:styles_module.dropdownOverlay,dropdownRender:menu=>{var _searchedStates$data2;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module.dropdownContainer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.searchContainer,children:/*#__PURE__*/(0,jsx_runtime.jsx)(Input/* default */.A,{placeHolder:"Search",size:"w100",value:searchedStates.query,onChange:e=>{var _value$trim;const value=e.target.value||'';const query=value===null||value===void 0?void 0:(_value$trim=value.trim())===null||_value$trim===void 0?void 0:_value$trim.toLowerCase();const filteredStates=projectStates.filter(state=>state.title.toLowerCase().includes(query));setSearchedStates({data:filteredStates,query});},className:styles_module.searchInput})}),/*#__PURE__*/(0,jsx_runtime.jsx)(divider/* default */.A,{style:{marginBottom:10,marginTop:0}}),menu,!((_searchedStates$data2=searchedStates.data)!==null&&_searchedStates$data2!==void 0&&_searchedStates$data2.length)&&/*#__PURE__*/(0,jsx_runtime.jsx)(CustomEmpty/* default */.A,{description:"No data found"})]});},children:/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:project===null||project===void 0?void 0:(_project$ProjectState2=project.ProjectState)===null||_project$ProjectState2===void 0?void 0:_project$ProjectState2.title,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:(0,objectSpread2/* default */.A)({display:"flex",alignItems:"center",background:"".concat(project===null||project===void 0?void 0:(_project$ProjectState3=project.ProjectState)===null||_project$ProjectState3===void 0?void 0:_project$ProjectState3.bgColor),cursor:"pointer",color:"".concat((project===null||project===void 0?void 0:(_project$ProjectState4=project.ProjectState)===null||_project$ProjectState4===void 0?void 0:_project$ProjectState4.textColor)||"var(--color-dark-sub"),padding:"5px 10px",borderRadius:"5px",fontSize:"14px",// add no wrap to prevent text overflow
whiteSpace:"nowrap"},style),children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",maxWidth:window.innerWidth>1500?"30ch":"15ch"},children:(project===null||project===void 0?void 0:(_project$ProjectState5=project.ProjectState)===null||_project$ProjectState5===void 0?void 0:_project$ProjectState5.title)||'Select States'}),/*#__PURE__*/(0,jsx_runtime.jsx)(DownOutlined/* default */.A,{style:{marginLeft:5}})]})})});};/* harmony default export */ const States = (ChangeStates);

/***/ }),

/***/ 62359:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ Projects_Details)
});

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js
var dist = __webpack_require__(42074);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
// EXTERNAL MODULE: ./src/Components/Templates/Layout/index.tsx + 28 modules
var Layout = __webpack_require__(81168);
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
// EXTERNAL MODULE: ./src/Components/Atoms/BreadCrumbs/index.tsx
var BreadCrumbs = __webpack_require__(64160);
// EXTERNAL MODULE: ./src/hooks/index.ts + 5 modules
var hooks = __webpack_require__(91970);
// EXTERNAL MODULE: ./src/Modules/Project/index.ts
var Project = __webpack_require__(50167);
// EXTERNAL MODULE: ./src/Modules/Project/permissions.ts
var Project_permissions = __webpack_require__(31203);
// EXTERNAL MODULE: ./src/Modules/ProjectState/index.ts
var ProjectState = __webpack_require__(45732);
// EXTERNAL MODULE: ./src/Modules/Invoice/permissions.ts
var Invoice_permissions = __webpack_require__(92325);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react-router/dist/index.js
var react_router_dist = __webpack_require__(28429);
// EXTERNAL MODULE: ./node_modules/antd/es/tag/index.js + 1 modules
var tag = __webpack_require__(12916);
// EXTERNAL MODULE: ./node_modules/antd/es/dropdown/index.js
var dropdown = __webpack_require__(57811);
// EXTERNAL MODULE: ./node_modules/antd/es/popconfirm/index.js + 1 modules
var popconfirm = __webpack_require__(56231);
// EXTERNAL MODULE: ./node_modules/antd/es/card/index.js + 3 modules
var card = __webpack_require__(2557);
// EXTERNAL MODULE: ./node_modules/antd/es/progress/index.js + 10 modules
var progress = __webpack_require__(37781);
// EXTERNAL MODULE: ./node_modules/antd/es/divider/index.js
var divider = __webpack_require__(40895);
// EXTERNAL MODULE: ./node_modules/antd/es/tabs/index.js + 22 modules
var tabs = __webpack_require__(92555);
// EXTERNAL MODULE: ./node_modules/antd/es/badge/index.js + 4 modules
var badge = __webpack_require__(74947);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/EditOutlined.js
var EditOutlined = __webpack_require__(90582);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js
var DeleteOutlined = __webpack_require__(78433);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/MoreOutlined.js + 1 modules
var MoreOutlined = __webpack_require__(72906);
// EXTERNAL MODULE: ./src/helpers/commonEnums.ts
var commonEnums = __webpack_require__(2360);
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Icons/notes.tsx
const NotesIcon=props=>{return/*#__PURE__*/(0,jsx_runtime.jsx)("svg",(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#fff",width:19,height:19},props),{},{children:/*#__PURE__*/(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}));};
// EXTERNAL MODULE: ./node_modules/antd/es/notification/index.js + 1 modules
var notification = __webpack_require__(1158);
// EXTERNAL MODULE: ./node_modules/antd/es/spin/index.js
var spin = __webpack_require__(90650);
// EXTERNAL MODULE: ./node_modules/antd/es/image/index.js + 13 modules
var es_image = __webpack_require__(9206);
// EXTERNAL MODULE: ./node_modules/antd/es/upload/index.js + 19 modules
var upload = __webpack_require__(28013);
// EXTERNAL MODULE: ./node_modules/antd/es/button/index.js
var es_button = __webpack_require__(48538);
// EXTERNAL MODULE: ./node_modules/antd/es/mentions/index.js + 8 modules
var mentions = __webpack_require__(7817);
// EXTERNAL MODULE: ./node_modules/antd/es/drawer/index.js + 6 modules
var drawer = __webpack_require__(73780);
// EXTERNAL MODULE: ./node_modules/@ant-design/pro-card/es/ProCard.js + 15 modules
var ProCard = __webpack_require__(91692);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/LoadingOutlined.js
var LoadingOutlined = __webpack_require__(29008);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/PaperClipOutlined.js
var PaperClipOutlined = __webpack_require__(78188);
// EXTERNAL MODULE: ./src/Components/Icons/index.tsx + 58 modules
var Icons = __webpack_require__(63668);
// EXTERNAL MODULE: ./src/helpers/constants.ts
var constants = __webpack_require__(65944);
;// ./src/Components/Organisms/Projects/Details/Sections/Conversations/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const styles_module = ({"divider":"styles_divider__JSdxv","conversations":"styles_conversations__uecHS","conversations_scroll":"styles_conversations_scroll__NZnCB","conversations_loader":"styles_conversations_loader__R9BSf","conversations_wrapper":"styles_conversations_wrapper__8aQcW","conversation":"styles_conversation__z0HmD","conversation_header":"styles_conversation_header__vCFsx","conversation_header_user":"styles_conversation_header_user__itJaZ","conversation_header_date":"styles_conversation_header_date__EOhZe","conversation_header_delete":"styles_conversation_header_delete__-Bul8","conversation__content":"styles_conversation__content__0cSAP","conversations_form":"styles_conversations_form__FLIqK","conversations_form_wrapper":"styles_conversations_form_wrapper__CeLiq","conversations_form_input_wrapper":"styles_conversations_form_input_wrapper__BMq4K","conversations_form_input":"styles_conversations_form_input__CCdKG","conversations_form_send":"styles_conversations_form_send__sgUku","conversations_form_send_loader":"styles_conversations_form_send_loader__7-BRV","conversations_form_switch":"styles_conversations_form_switch__6eAYy","conversations_form_actions":"styles_conversations_form_actions__tKlEo","card":"styles_card__sEQlu","card_wrapper_container":"styles_card_wrapper_container__aAu+h","card_wrapper":"styles_card_wrapper__iD31W","card_wrapper_owner":"styles_card_wrapper_owner__cRQl8","card_content":"styles_card_content__5xih3","card_content_owner":"styles_card_content_owner__ZrZrc","card_content_other":"styles_card_content_other__p3Qgx","card_sender":"styles_card_sender__xQ+og","card_sender_owner":"styles_card_sender_owner__6ZtLc","card_sender_other":"styles_card_sender_other__g-q5n","card_sender_name":"styles_card_sender_name__huYPT","card_sent_at":"styles_card_sent_at__cAlL5","card_message":"styles_card_message__G1MxS","card_message_mention":"styles_card_message_mention__ABkxo"});
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
// EXTERNAL MODULE: ./src/helpers/chat.gateway.ts
var chat_gateway = __webpack_require__(98891);
// EXTERNAL MODULE: ./node_modules/react-infinite-scroll-component/dist/index.es.js
var index_es = __webpack_require__(50416);
// EXTERNAL MODULE: ./src/services/axiosInstance.ts
var axiosInstance = __webpack_require__(83365);
// EXTERNAL MODULE: ./src/Components/Atoms/PreviewFile/index.tsx
var PreviewFile = __webpack_require__(10036);
// EXTERNAL MODULE: ./node_modules/antd/es/avatar/index.js + 3 modules
var avatar = __webpack_require__(75871);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/UserOutlined.js + 1 modules
var UserOutlined = __webpack_require__(79378);
// EXTERNAL MODULE: ./src/Components/Atoms/UserPopver/index.ts
var UserPopver = __webpack_require__(54405);
// EXTERNAL MODULE: ./src/services/tokenService.ts
var tokenService = __webpack_require__(92966);
// EXTERNAL MODULE: ./src/Components/Atoms/PhotoView/index.tsx + 8 modules
var PhotoView = __webpack_require__(53447);
// EXTERNAL MODULE: ./node_modules/moment/moment.js
var moment = __webpack_require__(59051);
var moment_default = /*#__PURE__*/__webpack_require__.n(moment);
;// ./src/Components/Organisms/Projects/Details/Sections/Conversations/card.tsx
const ConversationCards=props=>{var _data$User,_data$User2,_data$User3,_data$User4,_data$message,_data$Media,_data$Media2;const{data,setSelectedFile,onRemoveConversation,projectMembers}=props;const currentUser=tokenService/* default */.A.getUserData();const access_token=tokenService/* default */.A.getLocalAccessToken();const isOwner=(data===null||data===void 0?void 0:(_data$User=data.User)===null||_data$User===void 0?void 0:_data$User.id)===(currentUser===null||currentUser===void 0?void 0:currentUser.id);const isDateGreaterThan15Min=new Date(data===null||data===void 0?void 0:data.addedDate).getTime()+15*60*1000<new Date().getTime();const[showDelete,setShowDelete]=(0,react.useState)(false);return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"".concat(styles_module.card_wrapper_container," ").concat(isOwner?styles_module.card_wrapper_owner:styles_module.card_wrapper),onMouseEnter:()=>setShowDelete(true),onMouseLeave:()=>setShowDelete(false),children:[isOwner&&showDelete&&!isDateGreaterThan15Min&&/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"Are you sure you want to delete this conversation?",okText:"Yes",cancelText:"No",placement:"left",zIndex:9999,onConfirm:()=>onRemoveConversation(data===null||data===void 0?void 0:data.id),children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{style:{color:"red"}})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"".concat(styles_module.card),children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.card_avatar,children:!isOwner&&/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(data===null||data===void 0?void 0:(_data$User2=data.User)===null||_data$User2===void 0?void 0:_data$User2.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),size:'default'})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"".concat(styles_module.card_content," ").concat(isOwner?styles_module.card_content_owner:styles_module.card_content_other),children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"".concat(styles_module.card_sender," ").concat(isOwner?styles_module.card_sender_owner:styles_module.card_sender_other),children:[!isOwner&&/*#__PURE__*/(0,jsx_runtime.jsx)(UserPopver/* UserPopover */.t,{user:data===null||data===void 0?void 0:data.User,type:"user",zIndex:9999,children:/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:styles_module.card_sender_name,children:"".concat(data===null||data===void 0?void 0:(_data$User3=data.User)===null||_data$User3===void 0?void 0:_data$User3.firstName," ").concat(data===null||data===void 0?void 0:(_data$User4=data.User)===null||_data$User4===void 0?void 0:_data$User4.lastName)})}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:styles_module.card_sent_at,title:moment_default()(data.addedDate).format("DD MMM, YYYY hh:mm A"),children:moment_default()(data.addedDate).fromNow()})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.card_message,children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{dangerouslySetInnerHTML:{__html:data===null||data===void 0?void 0:(_data$message=data.message)===null||_data$message===void 0?void 0:_data$message.replace(/@(\w+\s*\w*)/g,(match,p1)=>{const name=p1.replace(/@|\(|\)/g,'');// console.log('userId', name);
const user=projectMembers===null||projectMembers===void 0?void 0:projectMembers.find(member=>{var _ref,_member$User,_member$User2;return(_ref="".concat(member===null||member===void 0?void 0:(_member$User=member.User)===null||_member$User===void 0?void 0:_member$User.firstName," ").concat(member===null||member===void 0?void 0:(_member$User2=member.User)===null||_member$User2===void 0?void 0:_member$User2.lastName))===null||_ref===void 0?void 0:_ref.includes(name);});/**
                   *  <UserPopover user={user?.User} type='user'>
                   *   <span className={styles.card_message_mention}>
                   *    {match}{" "}
                   *  </span>
                   * </UserPopover> as any
                   *  */if(user){return"<span class=".concat(styles_module.card_message_mention,">").concat(match,"</span>");}else{return match;}})}})}),(data===null||data===void 0?void 0:(_data$Media=data.Media)===null||_data$Media===void 0?void 0:_data$Media.length)>0&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.conversation__files,children:data===null||data===void 0?void 0:(_data$Media2=data.Media)===null||_data$Media2===void 0?void 0:_data$Media2.map((media,index)=>{var _media$fileType;return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.conversation__files_item,children:(_media$fileType=media.fileType)!==null&&_media$fileType!==void 0&&_media$fileType.includes("image")?/*#__PURE__*/(0,jsx_runtime.jsx)(PhotoView/* default */.A,{images:["".concat(constants/* PROTECTED_RESOURCE_BASE_URL */.SO).concat(media.path,"?authKey=").concat(access_token)],width:300,height:150,style:{borderRadius:5,objectFit:'cover'}}):/*#__PURE__*/(0,jsx_runtime.jsx)(es_image/* default */.A,{src:"/images/doc.png",alt:"Document-".concat(index),preview:false,width:300,height:150,style:{borderRadius:5,objectFit:'contain'},onClick:()=>setSelectedFile({path:media.path,open:true})})},"media-".concat(index));})})]})]})]});};/* harmony default export */ const Conversations_card = (ConversationCards);
;// ./src/Components/Organisms/Projects/Details/Sections/Conversations/index.tsx
const ProjectConversations=props=>{const{setProjectConversations,conversations:{data,meta,loading},projectId,onRefresh,permissions,projectMembers}=props;const currentUser=tokenService/* default */.A.getUserData();const[messageApi,contextHolderMessage]=message/* default */.Ay.useMessage();const[notificationApi,contextHolderNotification]=notification/* default */.A.useNotification();const module=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);/** Whether there's more data to be fetched or not in the conversations */const hasMore=(0,react.useMemo)(()=>(data===null||data===void 0?void 0:data.length)<(meta===null||meta===void 0?void 0:meta.total),[data,meta]);/** Project Members For Mentions */const projectMembersOptions=(0,react.useMemo)(()=>{return projectMembers===null||projectMembers===void 0?void 0:projectMembers.map(member=>{var _member$User,_member$User2,_member$User3;const name="".concat(member===null||member===void 0?void 0:(_member$User=member.User)===null||_member$User===void 0?void 0:_member$User.firstName," ").concat(member===null||member===void 0?void 0:(_member$User2=member.User)===null||_member$User2===void 0?void 0:_member$User2.lastName);const userId=member===null||member===void 0?void 0:(_member$User3=member.User)===null||_member$User3===void 0?void 0:_member$User3.id;return{label:name,value:"[".concat(name,"](").concat(userId,")")};});},[projectMembers]);const[conversations,setConversations]=(0,react.useState)({content:'',loading:false});const[fileList,setFileList]=(0,react.useState)([]);const[selectedFile,setSelectedFile]=(0,react.useState)({path:'',open:false});const[hasUserInteracted,setHasUserInteracted]=(0,react.useState)(false);const[isShiftPressed,setIsShiftPressed]=(0,react.useState)(false);const chatContainerRef=(0,react.useRef)(null);const interactionRef=(0,react.useRef)();interactionRef.current=hasUserInteracted;const handleInteraction=()=>{setHasUserInteracted(true);document.removeEventListener('click',handleInteraction);};/**Function to add a conversation
   * @param {AddConversationType} values values of the conversation to be added
   */const onAddConversation=values=>{if(!values.message){message/* default */.Ay.error('Please enter a conversation');return;}if(!projectId)return;if(permissions.updateProject===true){setConversations(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));module.addProjectConversation((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},values),{},{projectId:projectId})).then(res=>{var _res$data;const newMessage=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;setConversations({content:'',loading:false});setProjectConversations(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{data:[newMessage,...prev.data]}));}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||'Something went wrong');setConversations(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}else{message/* default */.Ay.error('You do not have permission to add conversations');}};/**Function to remove a conversation
   * @param {number} conversationId id of the conversation to be deleted
   */const onRemoveConversation=conversationId=>{if(permissions.updateProject===true){module.removeProjectConversations(conversationId).then(res=>{var _res$data2;message/* default */.Ay.success((res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.message)||'conversation deleted successfully');onRefresh({projectId:projectId});// remove the conversation from the list
setProjectConversations(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{data:prev.data.filter(item=>item.id!==conversationId)}));}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||'Something went wrong');});}else{message/* default */.Ay.error('You do not have permission to delete conversations');}};/** Upload file to server */const fileUpload=async options=>{const{onSuccess,onError,file}=options;const fmData=new FormData();const config={headers:{"content-type":"multipart/form-data"}};fmData.append("files[]",file);try{if(permissions.updateProject===true){await axiosInstance/* default */.A.post("project/uploadConversationFiles/".concat(projectId),fmData,config);onSuccess&&onSuccess({status:200});setFileList([]);onRefresh({projectId:projectId});}else{setFileList([]);throw new Error("You do not have permission to upload files");}}catch(err){const errorMessage=(0,common/* handleError */.H4)(err);setFileList([]);if(errorMessage==="You do not have permission to upload files"){messageApi.open({key:"permission",type:"error",duration:5,content:errorMessage});}else{messageApi.open({key:"error",type:"error",content:errorMessage});}onError&&onError(new Error('Upload failed'));}};/** Get next conversations */const onGetNextConversations=(0,react.useCallback)(()=>{if((meta===null||meta===void 0?void 0:meta.page)<(meta===null||meta===void 0?void 0:meta.pageCount)){var _data;const dataLength=(data===null||data===void 0?void 0:data.length)||0;const lastMessageId=data===null||data===void 0?void 0:(_data=data[dataLength-1])===null||_data===void 0?void 0:_data.id;const params={projectId:projectId,before:lastMessageId};setProjectConversations(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));onRefresh(params);}},[data,meta,projectId]);const updateConversation=message=>{if(message&&message.projectId){const _Project=message.Project;const _User=message.User;if(message.projectId===projectId){setProjectConversations(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false,// remove the duplicate data
data:[message,...prev.data.filter(ele=>ele.id!==message.id)]}));}// Alert the user that there's a new message in a different project
if(message.projectId!==projectId){notificationApi.info({placement:"bottomLeft",message:"New Message",description:/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"mb-0",children:["New message from ",/*#__PURE__*/(0,jsx_runtime.jsxs)("b",{children:[_User===null||_User===void 0?void 0:_User.firstName," ",_User===null||_User===void 0?void 0:_User.lastName]})," in ","",/*#__PURE__*/(0,jsx_runtime.jsxs)("a",{href:"/chats?projectId=".concat(message===null||message===void 0?void 0:message.projectId),target:"_blank",rel:"noreferrer",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("b",{children:[_Project===null||_Project===void 0?void 0:_Project.referenceNumber," | ",_Project===null||_Project===void 0?void 0:_Project.title]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* ExternalIcon */.XM,{height:18,width:18,cursor:'pointer'})]})]})});}if(interactionRef.current&&message.userId!==(currentUser===null||currentUser===void 0?void 0:currentUser.id)){(0,common/* PlayNotificationSound */.rK)();}}};/** Handle Keyboards events */const handleKeyDown=event=>{if(event.key==='Enter'&&isShiftPressed){event.preventDefault();if(conversations.content.trim()==='')return;onAddConversation({message:conversations===null||conversations===void 0?void 0:conversations.content});}else if(event.key==='Shift'){setIsShiftPressed(true);}};/** Handle Keyboards events */const handleKeyUp=event=>{if(event.key==='Shift'){setIsShiftPressed(false);}};// Scroll to bottom of the chat container
(0,react.useEffect)(()=>{if(chatContainerRef.current){chatContainerRef.current.scrollTop=chatContainerRef.current.scrollHeight;}},[data===null||data===void 0?void 0:data.length]);// Real time chat
(0,react.useEffect)(()=>{let socketConnection=(0,chat_gateway/* getWebSocket */.m)();socketConnection.on('chat',message=>{updateConversation(message);});return()=>{socketConnection.disconnect();(0,chat_gateway/* disConnectWebSocket */.i)();};},[]);// Handle user interaction
(0,react.useEffect)(()=>{document.addEventListener('click',handleInteraction);return()=>{document.removeEventListener('click',handleInteraction);};},[]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(react.Fragment,{children:contextHolderMessage},'messageAlert'),/*#__PURE__*/(0,jsx_runtime.jsx)(react.Fragment,{children:contextHolderNotification},'notificationAlert'),/*#__PURE__*/(0,jsx_runtime.jsxs)(ProCard/* default */.A,{title:/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center justify-space-between w-100",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"primary-main",size:"normal",weight:"bold",children:"Conversations"}),/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"/chats?projectId=".concat(projectId),target:"_blank",rel:"noreferrer",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* ExpandIcon */.mS,{height:18,width:18,cursor:'pointer'})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(divider/* default */.A,{className:styles_module.divider})]}),headStyle:{display:'unset',padding:0},bodyStyle:{padding:0},className:styles_module.conversations,ref:chatContainerRef,children:[!loading&&(data===null||data===void 0?void 0:data.length)===0&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomEmpty */.ZX,{description:"No conversations yet"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module.conversations_wrapper,style:{height:(data===null||data===void 0?void 0:data.length)!==0?365:'unset',widows:'100%'},children:[(data===null||data===void 0?void 0:data.length)>0&&/*#__PURE__*/(0,jsx_runtime.jsx)(index_es/* default */.A,{dataLength:data?data.length:0,height:365,hasMore:hasMore,inverse:true,loader:loading&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.conversations_loader,children:/*#__PURE__*/(0,jsx_runtime.jsx)(spin/* default */.A,{indicator:/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingOutlined/* default */.A,{style:{fontSize:20},spin:true})})}),next:onGetNextConversations,endMessage:data.length===(meta===null||meta===void 0?void 0:meta.total)&&/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"font-size-xs color-dark-sub",style:{textAlign:'center'},children:"End of conversations"}),className:styles_module.conversations_scroll,children:data===null||data===void 0?void 0:data.map(conversation=>/*#__PURE__*/(0,jsx_runtime.jsx)(Conversations_card,{data:conversation,setSelectedFile:setSelectedFile,onRemoveConversation:onRemoveConversation,projectMembers:projectMembers},conversation.id))}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.conversations_form,children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module.conversations_form_wrapper,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module.conversations_form_input_wrapper,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{width:30},children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_image/* default */.A,{preview:false,width:30,height:30,className:styles_module.conversations_form_avatar,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(currentUser===null||currentUser===void 0?void 0:currentUser.profile),alt:"".concat(currentUser===null||currentUser===void 0?void 0:currentUser.firstName," ").concat(currentUser===null||currentUser===void 0?void 0:currentUser.lastName),style:{objectFit:"cover",borderRadius:"100%"}})}),/*#__PURE__*/(0,jsx_runtime.jsx)(upload/* default */.A,{fileList:fileList,customRequest:fileUpload,showUploadList:false,beforeUpload:(_file,fileList)=>{if(fileList.length>0){setFileList(fileList);return true;}return false;},children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"px-1",children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{size:"small",type:"text",style:{backgroundColor:'transparent'},icon:/*#__PURE__*/(0,jsx_runtime.jsx)(PaperClipOutlined/* default */.A,{style:{fontSize:18}})})})}),/*#__PURE__*/(0,jsx_runtime.jsx)(mentions/* default */.A,{placeholder:"Tips: (Shift + Enter to send) (@ to mention)",className:"".concat(styles_module.conversations_form_input," w-100"),autoSize:{minRows:1,maxRows:4},placement:"top",onKeyDown:handleKeyDown,onKeyUp:handleKeyUp,options:projectMembersOptions===null||projectMembersOptions===void 0?void 0:projectMembersOptions.map(member=>({label:member.label,value:member.value})),value:conversations.content,onChange:value=>{setConversations(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{content:value===null||value===void 0?void 0:value.replace(/\[(.*?)\]\(.*?\)/g,'$1')}));}}),conversations.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(spin/* default */.A,{indicator:/*#__PURE__*/(0,jsx_runtime.jsx)(LoadingOutlined/* default */.A,{style:{fontSize:20},spin:true}),className:styles_module.conversations_form_send_loader}):/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* SendIcon */.qx,{className:styles_module.conversations_form_send,onClick:()=>onAddConversation({message:conversations===null||conversations===void 0?void 0:conversations.content})})]})})})]})]}),selectedFile.open&&/*#__PURE__*/(0,jsx_runtime.jsx)(drawer/* default */.A,{open:selectedFile.open,onClose:()=>setSelectedFile({path:'',open:false}),width:window.innerWidth>700?700:"100%",title:"Preview File",placement:"right",zIndex:9999,children:/*#__PURE__*/(0,jsx_runtime.jsx)(PreviewFile/* default */.A,{file:selectedFile.path})})]});};/* harmony default export */ const Conversations = (ProjectConversations);
// EXTERNAL MODULE: ./node_modules/antd/es/select/index.js + 30 modules
var es_select = __webpack_require__(97554);
// EXTERNAL MODULE: ./node_modules/antd/es/tooltip/index.js
var tooltip = __webpack_require__(81541);
// EXTERNAL MODULE: ./node_modules/antd/es/checkbox/index.js + 2 modules
var es_checkbox = __webpack_require__(52765);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/CheckOutlined.js
var CheckOutlined = __webpack_require__(65472);
// EXTERNAL MODULE: ./src/Modules/Quotation/index.ts
var Quotation = __webpack_require__(83480);
// EXTERNAL MODULE: ./src/Components/Atoms/Headings/index.tsx
var Headings = __webpack_require__(35751);
;// ./src/Components/Organisms/Projects/Details/Sections/Info/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Info_styles_module = ({"info_wrapper":"styles_info_wrapper__t6bpN","info":"styles_info__E5a94","textBox":"styles_textBox__7shaa","customOption":"styles_customOption__BuPK4","customTag":"styles_customTag__v+THR","info_item":"styles_info_item__TJm5j","info_item_label":"styles_info_item_label__OAzAg","info_item_value":"styles_info_item_value__5NMeA","infoWrapperInner":"styles_infoWrapperInner__Z7nTn","milestone_item":"styles_milestone_item__s6rTG","milestone_item_content":"styles_milestone_item_content__xV0u8","milestone_item_value":"styles_milestone_item_value__xXdRb","milestone_item_status":"styles_milestone_item_status__Cb7ps"});
// EXTERNAL MODULE: ./src/Components/Atoms/CustomEmpty/index.tsx
var CustomEmpty = __webpack_require__(49758);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
// EXTERNAL MODULE: ./node_modules/antd/es/pagination/index.js + 12 modules
var pagination = __webpack_require__(24575);
// EXTERNAL MODULE: ./node_modules/antd/es/typography/index.js + 15 modules
var typography = __webpack_require__(30377);
// EXTERNAL MODULE: ./node_modules/react-sticky-box/dist/index.js
var react_sticky_box_dist = __webpack_require__(76266);
;// ./src/Components/Organisms/Dashboard/Overview/TaskProject/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const TaskProject_styles_module = ({"tabBar_header":"styles_tabBar_header__DeAEE","tabLabelWithPagination":"styles_tabLabelWithPagination__hEjDe","spinnerContainer":"styles_spinnerContainer__1mirN","paginationTab":"styles_paginationTab__O3tVv","cellBorder":"styles_cellBorder__QDl-r","tableHeader":"styles_tableHeader__Ldjm5","tableFooter":"styles_tableFooter__aCuIP","kanbanItem":"styles_kanbanItem__PpgxP","kanbanItemBottom":"styles_kanbanItemBottom__IH7yS","priorityPill":"styles_priorityPill__pDiZ4","kanbanItemBottomBottom":"styles_kanbanItemBottomBottom__pTOsH","taskEndOn":"styles_taskEndOn__s6Hah"});
// EXTERNAL MODULE: ./src/Modules/Task/index.ts
var Task = __webpack_require__(12671);
;// ./src/Components/Organisms/Dashboard/Overview/TaskProject/index.tsx
// Enums for status and priority labels
const taskColumnLabels={1:"To Do",2:"In Progress",3:"Done"};const techSupportColumnLabels={1:"Open",2:"In Progress",3:"Closed"};const TaskProject=_ref=>{let{style}=_ref;const[tab,setTab]=(0,react.useState)("assigned_to_me");const[currentPage,setCurrentPage]=(0,react.useState)(1);const pageSize=10;const module=(0,react.useMemo)(()=>new Task/* TaskModule */._(),[]);const{data=[],onRefresh,loading,error}=(0,hooks/* useFetchData */.Gs)({method:module.getAllRecords,initialQuery:{type:"myTask"}});const onRefreshTasks=(0,react.useMemo)(()=>{return()=>onRefresh({type:tab==="assigned_by_me"?"assignedTask":"myTask"});},[tab,onRefresh]);const renderTabBar=(props,DefaultTabBar)=>/*#__PURE__*/(0,jsx_runtime.jsx)(react_sticky_box_dist/* default */.A,{offsetTop:0,offsetBottom:20,style:{zIndex:1},className:TaskProject_styles_module.tabBar_header,children:/*#__PURE__*/(0,jsx_runtime.jsx)(DefaultTabBar,(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},props),{},{className:"mb-0"}))});const formatDate=date=>{return moment_default()(date).format('MMM D, h:mm a');};const columns=[{title:'Task Title',dataIndex:'title',key:'title'},{title:'Project ID',dataIndex:'id',key:'id'},{title:'Status',dataIndex:'status',key:'status',render:status=>taskColumnLabels[status]||techSupportColumnLabels[status]||status},{title:'Priority',dataIndex:'priority',key:'priority',render:priority=>taskColumnLabels[priority]||techSupportColumnLabels[priority]||priority},{title:'Added Date',dataIndex:'addedDate',key:'addedDate',render:date=>formatDate(date)},{title:'Start Date',dataIndex:'taskStartFrom',key:'taskStartFrom',render:date=>formatDate(date)},{title:'End Date',dataIndex:'taskEndOn',key:'taskEndOn',render:date=>formatDate(date)}];const handlePageChange=page=>{setCurrentPage(page);// Add logic to handle page change if necessary
};const renderTable=()=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:TaskProject_styles_module.scrollableTableContainer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{columns:columns,dataSource:data.slice((currentPage-1)*pageSize,currentPage*pageSize),rowKey:"id"// Ensure each row has a unique key
,pagination:false// Hide the default pagination
,bordered:true,scroll:{y:400}// Set fixed height for table content
}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TaskProject_styles_module.tableFooter,children:/*#__PURE__*/(0,jsx_runtime.jsx)(pagination/* default */.A,{className:TaskProject_styles_module.paginationTab,size:"small",total:data.length,showSizeChanger:false,pageSize:pageSize,current:currentPage,onChange:handlePageChange})})]});return/*#__PURE__*/(0,jsx_runtime.jsx)(tabs/* default */.A,{className:TaskProject_styles_module.taskOverview,activeKey:tab,onChange:key=>{const _key=key;setTab(_key);setCurrentPage(1);// Reset to the first page on tab change
onRefresh({type:_key==="assigned_by_me"?"assignedTask":"myTask"});},renderTabBar:renderTabBar,items:[{label:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TaskProject_styles_module.tabLabelWithPagination,children:/*#__PURE__*/(0,jsx_runtime.jsx)(typography/* default */.A.Text,{children:"Assigned To Me"})}),key:"assigned_to_me",children:loading?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TaskProject_styles_module.spinnerContainer,children:/*#__PURE__*/(0,jsx_runtime.jsx)(spin/* default */.A,{size:"large"})}):renderTable()},{label:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TaskProject_styles_module.tabLabelWithPagination,children:/*#__PURE__*/(0,jsx_runtime.jsx)(typography/* default */.A.Text,{children:"Assigned By Me"})}),key:"assigned_by_me",children:loading?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:TaskProject_styles_module.spinnerContainer,children:/*#__PURE__*/(0,jsx_runtime.jsx)(spin/* default */.A,{size:"large"})}):renderTable()}],style:(0,objectSpread2/* default */.A)({paddingBottom:"0.2rem"},style)});};/* harmony default export */ const Overview_TaskProject = (TaskProject);
;// ./src/Components/Organisms/Projects/Details/Sections/Info/index.tsx
const{Option}=es_select/* default */.A;const termIds=(/* unused pure expression or super */ null && ([1,2,3]));const ProjectInfoSection=_ref=>{let{data,onRefresh}=_ref;const quotation=data===null||data===void 0?void 0:data.Quotation;const[selected,setSelected]=(0,react.useState)({open:false,ids:[]});const module=(0,react.useMemo)(()=>new Quotation/* QuotationModule */.v(),[]);const[paymentTerms,setPaymentTerms]=(0,react.useState)([]);// Define this function in the same file or import it if it's in a utility file
const getTagColor=status=>{switch(status){case commonEnums/* PaymentTermsStatus */.Ob.NotStarted:return'gray';case commonEnums/* PaymentTermsStatus */.Ob.InProgress:return'blue';case commonEnums/* PaymentTermsStatus */.Ob.Completed:return'green';case commonEnums/* PaymentTermsStatus */.Ob.Overdue:return'red';default:return'default';}};const handleStatusChange=(termId,status)=>{// handleUpdateStatus(termId, status);
};(0,react.useEffect)(()=>{if(data!==null&&data!==void 0&&data.id){module.fetchPaymentTermsByProjectId(data.id).then(async terms=>{// Assuming each term is a string and you need to add a default `id` and `status`
const mappedTerms=terms.map((term,index)=>({term,id:index+1,// Ensuring IDs are unique; consider fetching real IDs
status:commonEnums/* PaymentTermsStatus */.Ob.NotStarted// Default status
}));// Array of term IDs for which we need to fetch the status (1, 2, 3, 4, 5)
const termIdsToFetch=[1,2,3,4,5];// Fetch status for each term in termIdsToFetch
const fetchStatuses=async()=>{const updatedTerms=await Promise.all(mappedTerms.map(async term=>{if(termIdsToFetch.includes(term.id)){try{const status=await fetchTermsAndStatuses(term.id);return (0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},term),{},{status});}catch(error){console.error("Failed to fetch status for term ID ".concat(term.id,":"),error);message/* default */.Ay.error("Failed to fetch status for term ID ".concat(term.id));return term;// Return the term without changing it if there's an error
}}return term;// If term.id is not in termIdsToFetch, return the term as-is
}));setPaymentTerms(updatedTerms);};// Fetch the statuses for the relevant terms
fetchStatuses();}).catch(err=>{console.error("Failed to fetch payment terms:",err);message/* default */.Ay.error('Failed to fetch payment terms');});}},[data===null||data===void 0?void 0:data.id,module]);const fetchTermsAndStatuses=async termId=>{try{const response=await axiosInstance/* default */.A.get("/payment-terms/".concat(termId));console.log("Status Response:",response);if(response.data){return response.data.status;// Assuming the API response contains a `status` field
}else{console.error("Unexpected response data format:",response);throw new Error("Unexpected response data format");}}catch(error){console.error("Error fetching payment term status:",error);throw error;}};// Usage
const fetchStatuses=async()=>{try{// Fetch status for specific term IDs
const termIds=[1];// Example term ID
const statuses=new Map();for(const termId of termIds){const status=await fetchTermsAndStatuses(termId);statuses.set(termId,status);}console.log("Statuses:",statuses);// Access a specific status
const statusForTermId1=statuses.get(1);console.log("Status for term ID 1:",statusForTermId1);}catch(error){console.error("Failed to fetch statuses:",error);}};const handleCheckboxChange=id=>{setSelected(prev=>{const isChecked=prev.ids.includes(id);return (0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{open:!isChecked,ids:isChecked?prev.ids.filter(itemId=>itemId!==id):[...prev.ids,id]});});};const updatePaymentTermStatus=async(termId,newStatus)=>{try{var _response$data;// Optimistically update local state before API call
setPaymentTerms(prevTerms=>prevTerms.map(pt=>pt.id===termId?(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},pt),{},{status:newStatus}):pt));// Call the API to update the status
const response=await axiosInstance/* default */.A.patch("/payment-terms/".concat(termId,"/status"),{status:newStatus});const successMessage=(response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message)||'Payment term status updated successfully';message/* default */.Ay.success(successMessage);}catch(err){var _err$response,_err$response$data;// Rollback local state if API call fails
setPaymentTerms(prevTerms=>prevTerms.map(pt=>{var _prevTerms$find;return pt.id===termId?(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},pt),{},{status:(_prevTerms$find=prevTerms.find(pt=>pt.id===termId))===null||_prevTerms$find===void 0?void 0:_prevTerms$find.status}):pt;}));const errMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to update status';message/* default */.Ay.error(errMessage);}};const handleCompleteMilestone=id=>{module.completeMilestone(id).then(res=>{var _res$data;message/* default */.Ay.success((res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.message)||'Milestone completed successfully');setSelected(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{open:false,ids:prev.ids.filter(itemId=>itemId!==id)}));onRefresh();}).catch(err=>{const errMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errMessage||'Something went wrong');});};return/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{className:Info_styles_module.info_wrapper,style:{borderRadius:5,marginTop:10},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Info_styles_module.infoWrapperInner,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Info_styles_module.info,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{backgroundColor:'var(--color-primary-main)',width:'100%'},children:/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{weight:"semi",style:{color:'white'},className:"ml-2 my-2",children:"Milestones"})}),(quotation===null||quotation===void 0?void 0:quotation.length)===0&&/*#__PURE__*/(0,jsx_runtime.jsx)(CustomEmpty/* default */.A,{description:"No milestones found",imageStyle:{height:50}}),quotation===null||quotation===void 0?void 0:quotation.map(item=>{const milestones=item===null||item===void 0?void 0:item.QuotationMilestone;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[(milestones===null||milestones===void 0?void 0:milestones.length)===0&&/*#__PURE__*/(0,jsx_runtime.jsx)(CustomEmpty/* default */.A,{description:"No milestones found",imageStyle:{height:50}}),milestones===null||milestones===void 0?void 0:milestones.map((milestone,index)=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Info_styles_module.milestone_item,style:{alignItems:"flex-start"},children:[milestone.status!==commonEnums/* MilestoneStatus */.jY['Not Completed']?/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"This milestone is already completed",children:/*#__PURE__*/(0,jsx_runtime.jsx)(CheckOutlined/* default */.A,{style:{color:'var(--color-primary-main)'}})}):/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"This will mark the milestone as completed. Are you sure?",okText:"Yes",cancelText:"No",onConfirm:()=>handleCompleteMilestone(milestone.id),children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_checkbox/* default */.A,{checked:selected.ids.includes(milestone.id),onChange:()=>handleCheckboxChange(milestone.id)})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Info_styles_module.milestone_item_content,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:Info_styles_module.milestone_item_value,style:{textDecoration:milestone.status!==commonEnums/* MilestoneStatus */.jY['Not Completed']?'line-through':'none'},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{width:'70%'},children:milestone.title}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:Info_styles_module.milestone_item_status,children:commonEnums/* MilestoneStatus */.jY[milestone.status]})]})})]},"milestone-".concat(index)))]},"quotation-item-".concat(item.id));})]})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Info_styles_module.info,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{backgroundColor:'var(--color-primary-main)',width:'100%'},children:/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{weight:"semi",style:{color:'white'},className:"ml-2 my-2",children:"Payment Terms"})}),paymentTerms.length===0?/*#__PURE__*/(0,jsx_runtime.jsx)(CustomEmpty/* default */.A,{description:"No payment terms found",imageStyle:{height:50}}):paymentTerms.map((term,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Info_styles_module.info_item,children:/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:Info_styles_module.info_item_value,children:[term.term," - ",/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{color:getTagColor(term.status),children:term.status}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_select/* default */.A,{value:term.status,onChange:status=>updatePaymentTermStatus(term.id,status),style:{marginLeft:8},children:Object.values(commonEnums/* PaymentTermsStatus */.Ob).map(status=>/*#__PURE__*/(0,jsx_runtime.jsx)(Option,{value:status,children:status},status))})]})},"payment-term-".concat(index)))]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Info_styles_module.info,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{backgroundColor:'var(--color-primary-main)',width:'100%'},children:/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{weight:"semi",style:{color:'white'},className:"ml-2 my-2",children:"Task Overview"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(Overview_TaskProject,{style:{width:'100%'}})]})]});};/* harmony default export */ const Info = (ProjectInfoSection);
// EXTERNAL MODULE: ./node_modules/antd/es/input/index.js + 5 modules
var input = __webpack_require__(16330);
// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 18 modules
var es_form = __webpack_require__(10678);
// EXTERNAL MODULE: ./node_modules/antd/es/popover/index.js
var popover = __webpack_require__(65059);
// EXTERNAL MODULE: ./node_modules/antd/es/switch/index.js + 1 modules
var es_switch = __webpack_require__(25933);
;// ./src/Components/Organisms/Projects/Details/Sections/Status/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Status_styles_module = ({"title":"styles_title__+Xo9C","holdBy":"styles_holdBy__TjwxW","holdBy_user":"styles_holdBy_user__yppzh","holdBy_user_name":"styles_holdBy_user_name__FRWZg"});
;// ./src/Components/Organisms/Projects/Details/Sections/Status/index.tsx
const{TextArea}=input/* default */.A;/** Change Status component */const ChangeStatus=_ref=>{var _project$ProjectHoldB,_project$ProjectHoldB2,_project$ProjectHoldB3;let{data,permissions}=_ref;const{project,onRefresh}=data;const module=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);const[form]=es_form/* default */.A.useForm();const[holdProject,setHoldProject]=(0,react.useState)({loading:false,onHold:false});const onStatusChange=values=>{if(permissions.updateProject===true){const data={comment:values===null||values===void 0?void 0:values.comment};setHoldProject(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));if((project===null||project===void 0?void 0:project.onHold)===false){module.holdProject(data,project===null||project===void 0?void 0:project.id).then(res=>{const data=res===null||res===void 0?void 0:res.data;message/* default */.Ay.success((data===null||data===void 0?void 0:data.message)||'Project is now on hold');onRefresh();form.resetFields();}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||'Something went wrong');}).finally(()=>{setHoldProject(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}else{module.unholdProject(data,project===null||project===void 0?void 0:project.id).then(res=>{const data=res===null||res===void 0?void 0:res.data;message/* default */.Ay.success((data===null||data===void 0?void 0:data.message)||'Project is now active');onRefresh();form.resetFields();}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||'Something went wrong');}).finally(()=>{setHoldProject(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}}else{message/* default */.Ay.error('You do not have permission to hold project, please contact your administrator');}};(0,react.useEffect)(()=>{setHoldProject(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{onHold:project===null||project===void 0?void 0:project.onHold}));},[project]);return/*#__PURE__*/(0,jsx_runtime.jsx)(popover/* default */.A,{destroyTooltipOnHide:true,title:/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Status_styles_module.title,children:["Project Status",/*#__PURE__*/(0,jsx_runtime.jsx)(es_switch/* default */.A,{defaultChecked:project===null||project===void 0?void 0:project.onHold,checkedChildren:"On Hold",unCheckedChildren:"Active",className:holdProject.onHold?'on-hold-switch':'active',onChange:checked=>setHoldProject(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{onHold:checked}))})]}),(project===null||project===void 0?void 0:project.comment)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{marginTop:10},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{fontWeight:600,fontStyle:"italic"},children:"Reason: \xA0"}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"font-size-sm",style:{fontWeight:'normal'},children:project===null||project===void 0?void 0:project.comment})]}),(project===null||project===void 0?void 0:project.ProjectHoldBy)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Status_styles_module.holdBy,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{fontStyle:"italic"},children:project!==null&&project!==void 0&&project.onHold?'Hold By:':'Resumed By:'}),/*#__PURE__*/(0,jsx_runtime.jsxs)(UserPopver/* UserPopover */.t,{type:"user",user:project===null||project===void 0?void 0:project.ProjectHoldBy,className:Status_styles_module.holdBy_user,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:28,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(project===null||project===void 0?void 0:(_project$ProjectHoldB=project.ProjectHoldBy)===null||_project$ProjectHoldB===void 0?void 0:_project$ProjectHoldB.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),style:{border:'1px solid var(--color-border)'}}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Status_styles_module.holdBy_user_name,children:"".concat(project===null||project===void 0?void 0:(_project$ProjectHoldB2=project.ProjectHoldBy)===null||_project$ProjectHoldB2===void 0?void 0:_project$ProjectHoldB2.firstName," ").concat(project===null||project===void 0?void 0:(_project$ProjectHoldB3=project.ProjectHoldBy)===null||_project$ProjectHoldB3===void 0?void 0:_project$ProjectHoldB3.lastName)})]})]})]}),content:/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{form:form,onFinish:onStatusChange,layout:"vertical",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"comment",rules:[{required:true,message:'Please enter reason'}],style:{marginBottom:10,width:'100%'},children:/*#__PURE__*/(0,jsx_runtime.jsx)(TextArea,{placeholder:"Reason",style:{width:'100%'},autoSize:{minRows:1,maxRows:4}})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{type:"ghost",size:"small",htmlType:"submit",loading:holdProject===null||holdProject===void 0?void 0:holdProject.loading,children:"Save"})]}),overlayClassName:"change-width",children:/*#__PURE__*/(0,jsx_runtime.jsx)(badge/* default */.A,{count:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{background:project!==null&&project!==void 0&&project.onHold?"#F5222D":"radial-gradient(#1C6758, #367E18, #5BB318)",boxShadow:"0px 2px 10px rgba(0, 0, 0, 0.4)",fontSize:20,width:20,height:20,borderRadius:'50%'}})})});};/* harmony default export */ const Status = (ChangeStatus);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/CloseOutlined.js
var CloseOutlined = __webpack_require__(45908);
// EXTERNAL MODULE: ./src/helpers/dateHandler.ts
var dateHandler = __webpack_require__(98933);
// EXTERNAL MODULE: ./src/helpers/useDebounce.ts
var useDebounce = __webpack_require__(28173);
// EXTERNAL MODULE: ./src/Modules/User/index.ts
var User = __webpack_require__(47645);
// EXTERNAL MODULE: ./src/Components/Atoms/UserPopver/select.tsx
var UserPopver_select = __webpack_require__(81467);
// EXTERNAL MODULE: ./src/Components/Atoms/UserPopver/user-popover.tsx
var user_popover = __webpack_require__(57702);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Details/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Details_styles_module = ({"details":"styles_details__WliNW","details_item":"styles_details_item__QmIMS","details_item_label":"styles_details_item_label__5N7wE","details_item_value":"styles_details_item_value__j38-A","details_item_value_deadline":"styles_details_item_value_deadline__l2Ciw","details_item_value_org_name":"styles_details_item_value_org_name__s34rF","details_item_value_submitted_by":"styles_details_item_value_submitted_by__xiLp0","details_support":"styles_details_support__CYkM0","details_support_title":"styles_details_support_title__jdgEW","details_support_list":"styles_details_support_list__KYNCm","details_support_list_item":"styles_details_support_list_item__HC1xJ","details_support_list_item_name":"styles_details_support_list_item_name__jYO3y","details_support_list_item_remove":"styles_details_support_list_item_remove__1vUWe","details_clients":"styles_details_clients__APGOl","details_clients_title":"styles_details_clients_title__aeaa5","details_clients_list":"styles_details_clients_list__toCEy","details_clients_list_item":"styles_details_clients_list_item__5s-Mg","details_clients_list_item_name":"styles_details_clients_list_item_name__sSstQ","details_clients_list_item_remove":"styles_details_clients_list_item_remove__U-9t3"});
// EXTERNAL MODULE: ./src/Modules/Client/index.ts
var Client = __webpack_require__(97097);
// EXTERNAL MODULE: ./src/Modules/Organization/index.ts
var Organization = __webpack_require__(42361);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Details/index.tsx
// Types for the search params
const DetailsTab=_ref=>{var _projectIncharge$data,_supportEngineers$dat,_project$Client,_project$Client2,_project$ProjectType,_submissionByOptions$;let{data,permissions,onEdit}=_ref;const{project:{data:project,onRefresh}}=data;const module=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);const userModule=(0,react.useMemo)(()=>new User/* UserModule */.U(),[]);const clientModule=(0,react.useMemo)(()=>new Client/* ClientModule */.u(),[]);const orgModule=(0,react.useMemo)(()=>new Organization/* OrganizationModule */.I(),[]);// State to show remove button on hover of support engineers
const[showRemoveSupportEng,setShowRemoveSupportEng]=(0,react.useState)({});// State to show remove button on hover of clients
const[showRemoveClient,setShowRemoveClient]=(0,react.useState)({});// State to show update button on hover of end date
const[isUpdate,setIsUpdate]=(0,react.useState)({endDate:{show:false,value:''}});const projectMembers=project===null||project===void 0?void 0:project.ProjectMembers;// Initial Project Incharge
//const initialMemberInCharge = projectMembers?.filter((member) => member.projectRole === ProjectRoleEnum['projectIncharge']) || []
const initialMemberInCharge=(projectMembers===null||projectMembers===void 0?void 0:projectMembers.filter(member=>member.projectRole===commonEnums/* ProjectRoleEnum */.b2['projectIncharge']))||[];console.log("Initial members are :"+initialMemberInCharge);// Initial Support Engineers from project members
const initialSupportEngineers=(projectMembers===null||projectMembers===void 0?void 0:projectMembers.filter(member=>member.projectRole===commonEnums/* ProjectRoleEnum */.b2['supportEngineers']))||[];// Initial Clients and their representatives
const initialAllClients=project===null||project===void 0?void 0:project.ProjectClient;// Clients Search Term
const[clientsTerm,setSearchClients]=(0,react.useState)("");const debouncedClientsTerm=(0,useDebounce/* useDebounce */.d)(clientsTerm,500);// Project Incharge Search Term
const[projectInchargeTerm,setSearchProjectIncharge]=(0,react.useState)("");const debouncedProjectInchargeTerm=(0,useDebounce/* useDebounce */.d)(projectInchargeTerm,500);// Support Engineers Search Term
const[supportEngineersTerm,setSearchSupportEngineers]=(0,react.useState)("");const debouncedSupportEngineersTerm=(0,useDebounce/* useDebounce */.d)(supportEngineersTerm,500);// Submission By Search Term
const[submissionByTerm,setSubmissionByTerm]=(0,react.useState)("");const debouncedSubmissionByTerm=(0,useDebounce/* useDebounce */.d)(submissionByTerm,500);// Project Incharge Searched Users
const[projectIncharge,setProjectIncharge]=(0,react.useState)({data:[],loading:false});// Support Engineers Searched Users
const[supportEngineers,setSupportEngineers]=(0,react.useState)({data:[],loading:false});// Client Representative Searched Users
const[allClients,setAllClients]=(0,react.useState)({data:[],loading:false});// Submission By Searched Companies
const[submissionByOptions,setSubmissionByOptions]=(0,react.useState)({data:[],loading:false});/** Get Project Incharge From API 
   * @param {string} params.name - Search Term
   */const GetProjectIncharge=params=>{setProjectIncharge(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));userModule.getAllRecords(params).then(res=>{setProjectIncharge(prev=>{var _res$data;const responseData=(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data)||[];// if the data is already present in the state, then don't add it again
const filteredData=responseData.filter(item=>{return!(prev!==null&&prev!==void 0&&prev.data.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{message/* default */.Ay.error(err.response.data.message||"Something went wrong!");setProjectIncharge(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});};/** Get Support Engineers From API
   * @param {string} params.name - Search Term
   */const GetSupportEngineers=params=>{setSupportEngineers(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));userModule.getAllRecords(params).then(res=>{console.log('API response:',res);setSupportEngineers(prev=>{var _res$data2;const responseData=(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data)||[];// if the data is already present in the state, then don't add it again
const filteredData=responseData.filter(item=>{return!(prev!==null&&prev!==void 0&&prev.data.find(prevItem=>prevItem.id===item.id));});console.log('Filtered data:',filteredData);// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{message/* default */.Ay.error(err.response.data.message||"Something went wrong!");setSupportEngineers(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});};/** Get All Clients and their representatives
   * @param {string} params.name - Search Term
   * @param {number} params.organizationId - Organization Id
   */const GetAllClients=params=>{setAllClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));clientModule.findPublished(params).then(res=>{setAllClients(prev=>{var _res$data3;const responseData=(res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data)||[];// if the data is already present in the state, then don't add it again
const filteredData=responseData.filter(item=>{return!(prev!==null&&prev!==void 0&&prev.data.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{message/* default */.Ay.error(err.response.data.message||"Something went wrong!");setAllClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});};/** Get All Companies for Submission By Field */const GetAllCompanies=params=>{setSubmissionByOptions(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));const{getAllRecords:GetOrganizations}=orgModule;GetOrganizations(params).then(res=>{setSubmissionByOptions(prev=>{var _res$data4;const responseData=(res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.data)||[];// if the data is already present in the state, then don't add it again
const filteredData=responseData.filter(item=>{return!(prev!==null&&prev!==void 0&&prev.data.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{message/* default */.Ay.error(err.response.data.message||"Something went wrong!");setSubmissionByOptions(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});};// Project InCharge Search
const onProjectInChargeSearch=(0,react.useCallback)(()=>{if(debouncedProjectInchargeTerm){GetProjectIncharge({name:debouncedProjectInchargeTerm});}},[debouncedProjectInchargeTerm]);(0,react.useEffect)(()=>{onProjectInChargeSearch();},[onProjectInChargeSearch]);// Support Engineer Search
const onSupportEngineerSearch=(0,react.useCallback)(()=>{if(debouncedSupportEngineersTerm){GetSupportEngineers({name:debouncedSupportEngineersTerm});}},[debouncedSupportEngineersTerm]);(0,react.useEffect)(()=>{onSupportEngineerSearch();},[onSupportEngineerSearch]);// Clients Search
const onClientsSearch=(0,react.useCallback)(()=>{if(debouncedClientsTerm){const params={name:debouncedClientsTerm,organizationId:project===null||project===void 0?void 0:project.clientId};GetAllClients(params);}},[debouncedClientsTerm]);(0,react.useEffect)(()=>{onClientsSearch();},[onClientsSearch]);// Submission By Search
const onSubmissionBySearch=(0,react.useCallback)(()=>{if(debouncedSubmissionByTerm){GetAllCompanies({name:debouncedSubmissionByTerm});}else{GetAllCompanies();}},[debouncedSubmissionByTerm]);(0,react.useEffect)(()=>{onSubmissionBySearch();},[onSubmissionBySearch]);/** Remove Project Member */const onRemoveMembers=(userId,type)=>{if(permissions.modifyProjectMembers===true){switch(type){case"client":{module.removeProjectClients(project===null||project===void 0?void 0:project.id,userId).then(res=>{var _res$data5;message/* default */.Ay.success(res===null||res===void 0?void 0:(_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.message);onRefresh();}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong!");});break;}case"user":{module.removeProjectMembers(project===null||project===void 0?void 0:project.id,userId).then(res=>{var _res$data6;message/* default */.Ay.success(res===null||res===void 0?void 0:(_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.message);onRefresh();}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong!");});break;}}}else{message/* default */.Ay.error("You don't have permission to remove project members");}};/** Update Project Member */const onUpdateProjectMember=data=>{if(permissions.modifyProjectMembers===true){module.updateProjectMembers((0,objectSpread2/* default */.A)({projectId:project===null||project===void 0?void 0:project.id},data)).then(res=>{var _res$data7;message/* default */.Ay.success(res===null||res===void 0?void 0:(_res$data7=res.data)===null||_res$data7===void 0?void 0:_res$data7.message);onRefresh();}).catch(err=>{var _err$response,_err$response$data;const errorMessage=err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message;message/* default */.Ay.error(errorMessage);});}else{message/* default */.Ay.error("You don't have permission to update project members");}};/**Update Deadline
   * @param {string} endDate - End Date
   */const onUpdateDeadline=endDate=>{if(permissions.updateProject===true){// format the date to ISO string
endDate=new Date(endDate).toISOString();module.updateRecord({endDate:endDate},project===null||project===void 0?void 0:project.id).then(res=>{if(res){var _res$data8;setIsUpdate(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{endDate:{show:false,value:""}}));onRefresh();message/* default */.Ay.success((res===null||res===void 0?void 0:(_res$data8=res.data)===null||_res$data8===void 0?void 0:_res$data8.message)||"Deadline updated successfully");}}).catch(err=>{var _err$response2,_err$response2$data;const errorMessage=(err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||"Something went wrong!";message/* default */.Ay.error(errorMessage);});}else{message/* default */.Ay.error("You don't have permission to update deadline");}};// Set Initial Project Incharge
// useEffect(() => {
//   console.log('Initial Member In Charge:', initialMemberInCharge);
//   if (initialMemberInCharge) {
//     console.log('User in Initial Member In Charge:', initialMemberInCharge.User);
//     setProjectIncharge({
//       ...projectIncharge,
//       data: [initialMemberInCharge?.User],
//     });
//   }
// }, [initialMemberInCharge]);
return/*#__PURE__*/(0,jsx_runtime.jsxs)("section",{className:Details_styles_module.details,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Project Incharge"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_support_list,children:[initialMemberInCharge===null||initialMemberInCharge===void 0?void 0:initialMemberInCharge.map(member=>{const{User}=member;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_support_list_item,onMouseEnter:()=>setShowRemoveSupportEng({[User===null||User===void 0?void 0:User.uuid]:true}),onMouseLeave:()=>setShowRemoveSupportEng({}),children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(user_popover/* default */.A,{type:"user",user:User,className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:32,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(User===null||User===void 0?void 0:User.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),style:{border:'1px solid var(--color-border)'}}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_support_list_item_name,children:"".concat(User===null||User===void 0?void 0:User.firstName," ").concat(User===null||User===void 0?void 0:User.lastName)})]}),showRemoveSupportEng[User===null||User===void 0?void 0:User.uuid]&&/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{placement:"left",okText:"Yes",cancelText:"No",title:"Are you sure to remove this support engineer?",onConfirm:()=>onRemoveMembers(User===null||User===void 0?void 0:User.id,"user"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* XMarkIcon */.fK,{className:Details_styles_module.details_support_list_item_remove,color:"var(--color-red-yp)"})})]},User===null||User===void 0?void 0:User.uuid);}),/*#__PURE__*/(0,jsx_runtime.jsx)(UserPopver_select/* default */.A,{showPopover:false,placeholder:"Add Project Incharge",notFoundDescription:"No Project Incharge Found, Search with name",loading:projectIncharge===null||projectIncharge===void 0?void 0:projectIncharge.loading,onSearch:value=>setSearchProjectIncharge(value)// Don't show the already added support engineers
,options:projectIncharge===null||projectIncharge===void 0?void 0:(_projectIncharge$data=projectIncharge.data.filter(member=>!(initialMemberInCharge!==null&&initialMemberInCharge!==void 0&&initialMemberInCharge.find(support=>{var _support$User;return(support===null||support===void 0?void 0:(_support$User=support.User)===null||_support$User===void 0?void 0:_support$User.uuid)===(member===null||member===void 0?void 0:member.uuid);}))))===null||_projectIncharge$data===void 0?void 0:_projectIncharge$data.map(member=>{return{value:member===null||member===void 0?void 0:member.uuid,label:"".concat(member===null||member===void 0?void 0:member.firstName," ").concat(member===null||member===void 0?void 0:member.lastName),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:32,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(member===null||member===void 0?void 0:member.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{})})};}),onSelect:value=>{const{data}=projectIncharge;const selectedUser=data===null||data===void 0?void 0:data.find(member=>(member===null||member===void 0?void 0:member.uuid)===value);onUpdateProjectMember({projectInchargeId:[selectedUser===null||selectedUser===void 0?void 0:selectedUser.id]});}})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Assigned Engineers"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_support_list,children:[initialSupportEngineers===null||initialSupportEngineers===void 0?void 0:initialSupportEngineers.map(member=>{const{User}=member;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_support_list_item,onMouseEnter:()=>setShowRemoveSupportEng({[User===null||User===void 0?void 0:User.uuid]:true}),onMouseLeave:()=>setShowRemoveSupportEng({}),children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(user_popover/* default */.A,{type:"user",user:User,className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:32,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(User===null||User===void 0?void 0:User.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),style:{border:'1px solid var(--color-border)'}}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_support_list_item_name,children:"".concat(User===null||User===void 0?void 0:User.firstName," ").concat(User===null||User===void 0?void 0:User.lastName)})]}),showRemoveSupportEng[User===null||User===void 0?void 0:User.uuid]&&/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{placement:"left",okText:"Yes",cancelText:"No",title:"Are you sure to remove this support engineer?",onConfirm:()=>onRemoveMembers(User===null||User===void 0?void 0:User.id,"user"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* XMarkIcon */.fK,{className:Details_styles_module.details_support_list_item_remove,color:"var(--color-red-yp)"})})]},User===null||User===void 0?void 0:User.uuid);}),/*#__PURE__*/(0,jsx_runtime.jsx)(UserPopver_select/* default */.A,{showPopover:false,placeholder:"Add Support Engineer",notFoundDescription:"No Support Engineer Found, Search with name",loading:supportEngineers===null||supportEngineers===void 0?void 0:supportEngineers.loading,onSearch:value=>setSearchSupportEngineers(value)// Don't show the already added support engineers
,options:supportEngineers===null||supportEngineers===void 0?void 0:(_supportEngineers$dat=supportEngineers.data.filter(member=>!(initialSupportEngineers!==null&&initialSupportEngineers!==void 0&&initialSupportEngineers.find(support=>{var _support$User2;return(support===null||support===void 0?void 0:(_support$User2=support.User)===null||_support$User2===void 0?void 0:_support$User2.uuid)===(member===null||member===void 0?void 0:member.uuid);}))))===null||_supportEngineers$dat===void 0?void 0:_supportEngineers$dat.map(member=>{return{value:member===null||member===void 0?void 0:member.uuid,label:"".concat(member===null||member===void 0?void 0:member.firstName," ").concat(member===null||member===void 0?void 0:member.lastName),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:32,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(member===null||member===void 0?void 0:member.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{})})};}),onSelect:value=>{const{data}=supportEngineers;const selectedUser=data===null||data===void 0?void 0:data.find(member=>(member===null||member===void 0?void 0:member.uuid)===value);onUpdateProjectMember({supportEngineersId:[selectedUser===null||selectedUser===void 0?void 0:selectedUser.id]});// Remove the selected user from the searched users
// setSupportEngineers((prev) => ({
//   ...prev,
//   data: prev?.data.filter((member) => member?.uuid !== value)
// }))
}})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Clients Members"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_clients_list,children:[initialAllClients===null||initialAllClients===void 0?void 0:initialAllClients.map(member=>{const{Client,isRepresentative}=member;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_clients_list_item,onMouseEnter:()=>setShowRemoveClient({[Client===null||Client===void 0?void 0:Client.uuid]:true}),onMouseLeave:()=>setShowRemoveClient({}),children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(user_popover/* default */.A,{type:"client",client:Client,className:"d-flex align-center",extra:/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"color-dark-sub mb-0 mr-2",children:"Make as rep"}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:isRepresentative&&"You can't make this client as representative as he/she is already a representative",placement:"bottomRight",children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_switch/* default */.A,{checkedChildren:/*#__PURE__*/(0,jsx_runtime.jsx)(CheckOutlined/* default */.A,{}),unCheckedChildren:/*#__PURE__*/(0,jsx_runtime.jsx)(CloseOutlined/* default */.A,{}),defaultChecked:isRepresentative,onChange:checked=>{if(checked){onUpdateProjectMember({clientRepresentativeId:Client===null||Client===void 0?void 0:Client.id});}},disabled:isRepresentative,size:"small",className:"color-dark-sub"})})]})}),children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:32,icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),style:{border:'1px solid var(--color-border)'}}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:Details_styles_module.details_clients_list_item_name,children:[Client===null||Client===void 0?void 0:Client.name,isRepresentative&&/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{color:"var(--color-green-yp)",className:"ml-4",children:"Rep."})]})]}),showRemoveClient[Client===null||Client===void 0?void 0:Client.uuid]&&/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{placement:"left",okText:"Yes",cancelText:"No",title:"Are you sure to remove this client?",onConfirm:()=>onRemoveMembers(Client===null||Client===void 0?void 0:Client.id,"client"),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* XMarkIcon */.fK,{className:Details_styles_module.details_clients_list_item_remove,color:"var(--color-red-yp)"})})]},Client===null||Client===void 0?void 0:Client.uuid);}),/*#__PURE__*/(0,jsx_runtime.jsx)(UserPopver_select/* default */.A,{showPopover:false,placeholder:"Add Client Member",notFoundDescription:"No Client Found, Search with name",loading:allClients.loading,onSearch:value=>setSearchClients(value),options:allClients.data.map(client=>{return{value:(client===null||client===void 0?void 0:client.uuid)||'',label:client===null||client===void 0?void 0:client.name,icon:/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:32,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(client===null||client===void 0?void 0:client.logo),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{})})};}),onSelect:value=>{const{data}=allClients;const selectedClient=data.find(client=>(client===null||client===void 0?void 0:client.uuid)===value);onUpdateProjectMember({clients:[selectedClient===null||selectedClient===void 0?void 0:selectedClient.id]});}})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Client"}),(project===null||project===void 0?void 0:project.Client)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item_value,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{size:32,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(project===null||project===void 0?void 0:(_project$Client=project.Client)===null||_project$Client===void 0?void 0:_project$Client.logo),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),style:{border:'1px solid var(--color-border)'}}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_value_org_name,children:project===null||project===void 0?void 0:(_project$Client2=project.Client)===null||_project$Client2===void 0?void 0:_project$Client2.name})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Total Hours Worked"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_value,children:"N/A"})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Date Created"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_value,children:(0,dateHandler/* convertDate */.ic)(project===null||project===void 0?void 0:project.addedDate,"dd MM,yy")})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Start Date"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_value,children:(0,dateHandler/* convertDate */.ic)(project===null||project===void 0?void 0:project.startDate,"dd MM,yy")})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Deadline"}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item_value,children:[!isUpdate.endDate.show?/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"".concat(Details_styles_module.details_item_value_deadline," ").concat((0,common/* isDateGreaterThan */.uh)(project===null||project===void 0?void 0:project.endDate,new Date().toISOString())?'color-red-yp':''),onClick:()=>setIsUpdate(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{endDate:{show:true,value:""}})),children:(0,dateHandler/* convertDate */.ic)(project===null||project===void 0?void 0:project.endDate,"dd MM,yy")}):/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* EditableDatePicker */.dZ,{defaultValue:moment_default()(project===null||project===void 0?void 0:project.endDate),onChange:value=>setIsUpdate(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{endDate:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev.endDate),{},{value:(value===null||value===void 0?void 0:value.toString())||""})})),onBlur:()=>setIsUpdate(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{endDate:{show:false,value:""}})),onMouseDown:()=>onUpdateDeadline(isUpdate.endDate.value)}),(project===null||project===void 0?void 0:project.isExtended)&&/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{color:"warning",className:"ml-2",children:"Extended"})]})]}),(project===null||project===void 0?void 0:project.reasonOfExtension)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Reason of Extension"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_value,children:project===null||project===void 0?void 0:project.reasonOfExtension})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Project Type"}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_value,children:project===null||project===void 0?void 0:(_project$ProjectType=project.ProjectType)===null||_project$ProjectType===void 0?void 0:_project$ProjectType.title})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Details_styles_module.details_item,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_label,children:"Submitted By"}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{width:'70%'},children:project!==null&&project!==void 0&&project.submissionById?/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* SelectWithSearch */.fd,{bordered:false,placeholder:"Select Company",notFoundDescription:"No Company Found, Search with name",className:"selectWithIcon",customOption:true,onSearch:value=>{// search only if the value is not present in the options
const isValuePresent=submissionByOptions.data.find(item=>{const{name}=item;return name.toLowerCase().includes(value.toLowerCase());});if(!isValuePresent){setSubmissionByTerm(value);}},onSelect:value=>onEdit({submissionById:value},project===null||project===void 0?void 0:project.id),defaultValue:project===null||project===void 0?void 0:project.submissionById,options:(_submissionByOptions$=submissionByOptions.data)===null||_submissionByOptions$===void 0?void 0:_submissionByOptions$.map(item=>({label:item.name,value:item.id,icon:/*#__PURE__*/(0,jsx_runtime.jsx)(es_image/* default */.A,{src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(item.logo),alt:item.name,preview:false,width:24,style:{objectFit:'contain'}})}))}):/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Details_styles_module.details_item_value_submitted_by,children:"N/A"})})]})]});};/* harmony default export */ const Details = (DetailsTab);
// EXTERNAL MODULE: ./src/Components/Organisms/Projects/Details/Sections/Tabs/Files/media.tsx
var media = __webpack_require__(48262);
// EXTERNAL MODULE: ./src/Components/Organisms/Projects/Details/Sections/Tabs/Files/styles.module.scss
var Files_styles_module = __webpack_require__(18439);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Files/links.tsx
const LinksTab=_ref=>{let{onEdit,project}=_ref;const{data:projectData}=project;const[form]=es_form/* default */.A.useForm();const[projectFileLinks,setProjectFileLinks]=(0,react.useState)([]);const projectLinkActions=(0,react.useCallback)((link,action,linkName)=>{switch(action){case'add':{// if the link is already present in the array, then don't add it
let existingLink=projectFileLinks.find(ele=>ele.link===link);if(existingLink)return;const allLinks=[...projectFileLinks,{name:linkName,link:link}];setProjectFileLinks(allLinks);form.setFieldsValue({projectFilesLink:'',projectFilesLinkName:''});// update the project file links in the database
onEdit({projectFilesLink:allLinks.join(',')},projectData===null||projectData===void 0?void 0:projectData.id);break;}case'remove':{const removeLink=projectFileLinks.filter(item=>item.link!==link);setProjectFileLinks(removeLink);// update the project file links in the database
onEdit({projectFilesLink:JSON.stringify(removeLink)},projectData===null||projectData===void 0?void 0:projectData.id);break;}}},[projectFileLinks]);(0,react.useEffect)(()=>{try{const links=JSON.parse(projectData===null||projectData===void 0?void 0:projectData.projectFilesLink);if(typeof links==="string"){setProjectFileLinks([{link:links}]);}else{setProjectFileLinks(links);}}catch(err){console.log("Some error while parsing links");}},[]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{form:form,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Files_styles_module/* default */.A.linkFormContainer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{style:{width:'50%',marginTop:10},name:"projectFilesLinkName",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{label:"Link Name",placeHolder:"Name of the link",className:Files_styles_module/* default */.A.projectFilesLinkName,size:"w100"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"projectFilesLink",rules:[{required:(projectFileLinks===null||projectFileLinks===void 0?void 0:projectFileLinks.length)===0?true:false,message:"Please add at least one link."},{type:'url',message:"Please enter a valid url."},()=>({validator(_,value){if(!value||!(projectFileLinks!==null&&projectFileLinks!==void 0&&projectFileLinks.includes(value))){return Promise.resolve();}return Promise.reject(new Error('This link is already added.'));}})],style:{marginTop:10,width:"50%"},children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{label:"Project Files Link",placeHolder:"Add project file link",size:"w100",suffix:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* PlusCircleIcon */.GY,{style:{cursor:'pointer'},onClick:()=>{const enteredLink=form.getFieldValue('projectFilesLink');const linkName=form.getFieldValue('projectFilesLinkName');projectLinkActions(enteredLink,'add',linkName);}})})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Files_styles_module/* default */.A.projectFileLinks,children:projectFileLinks===null||projectFileLinks===void 0?void 0:projectFileLinks.map((link,index)=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Files_styles_module/* default */.A.projectFileLink,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:link.link,target:"_blank",rel:"noreferrer",children:link.name?link.name:link.link}),/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"Are you sure to delete this link?",okText:"Yes",cancelText:"No",placement:"left",onConfirm:()=>projectLinkActions(link.link,'remove'),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* DeleteIcon */.d7,{className:Files_styles_module/* default */.A.projectFileLink__deleteIcon})})]},"".concat(link,"-").concat(index)))})]});};/* harmony default export */ const links = (LinksTab);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Files/uploader.tsx
const FilesUploader=_ref=>{let{data,permissions}=_ref;const{project,projectFiles}=data;const[form]=es_form/* default */.A.useForm();const[messageApi,contextHolder]=message/* default */.Ay.useMessage();const[fileList,setFileList]=(0,react.useState)([]);const[upload,setUpload]=(0,react.useState)({status:"normal",progress:{}});const[documentType,setDocumentType]=(0,react.useState)("other");/** Upload file to server */const fileUpload=async options=>{const{onSuccess,onError,file,filename}=options;const fmData=new FormData();const config={headers:{"content-type":"multipart/form-data"}};fmData.append("files[]",file);// fmData.append("title", filename!);
fmData.append("documentType",documentType);fmData.append("projectId",project.data.id.toString());setUpload({status:"active",progress:{[filename]:0}});const onUploadProgress=progressEvent=>{const{loaded,total}=progressEvent;let percent=0;if(total!==null&&total!==undefined){percent=Math.floor(loaded*100/total);}setUpload({status:"active",progress:{[filename]:percent}});};try{if(permissions.updateProject===true){await axiosInstance/* default */.A.post("project/uploadProjectFiles",fmData,(0,objectSpread2/* default */.A)({onUploadProgress},config));onSuccess&&onSuccess({status:200});setUpload({status:"success",progress:{[filename]:100}});setFileList([]);projectFiles.onRefresh({projectId:project.data.id});//after 3 seconds, reset the upload status
setTimeout(()=>{setUpload({status:"normal",progress:{}});},3000);}else{throw new Error("You do not have permission to upload files");}}catch(err){var _err$response,_err$response$data;let errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||err.message||"Something went wrong";if(typeof errorMessage!=='string')errorMessage="Something went wrong";if(errorMessage==="You do not have permission to upload files"){messageApi.open({key:"permission",type:"error",duration:5,content:errorMessage});}else{messageApi.open({key:"error",type:"error",content:errorMessage});}setUpload({status:"exception",progress:{[filename]:0}});onError&&onError(new Error('Upload failed'));}};return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[contextHolder,upload.progress&&Object.entries(upload.progress).map(_ref2=>{let[key,value]=_ref2;return/*#__PURE__*/(0,jsx_runtime.jsx)(progress/* default */.A,{percent:value,status:upload.status,showInfo:false},key);}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Files_styles_module/* default */.A.uploadSection,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{className:Files_styles_module/* default */.A.uploadSection_content_select,placeholder:"Select Document Type",defaultValue:documentType,onChange:value=>setDocumentType(value),options:Object.entries(commonEnums/* ProjectDocumentsTypes */.T5).map(_ref3=>{let[key,value]=_ref3;return{label:value,value:key};}),bordered:false,clearIcon:false,style:{width:120}}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A,{form:form,layout:"vertical",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* ImageUploader */.GA,{name:"file",multiple:true,listType:"picture-card",style:{marginTop:10},className:Files_styles_module/* default */.A.uploadSection_content_uploader,fileList:fileList,customRequest:fileUpload,beforeUpload:(_file,fileList)=>{if(fileList.length>0){setFileList(fileList);return true;}return false;},customLabel:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{marginTop:-20},children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"ant-upload-drag-icon mb-0",children:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/picture.svg",alt:""})}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"ant-upload-hint",children:"Drag here or click to upload"})]})})})]})]});};/* harmony default export */ const uploader = (FilesUploader);
// EXTERNAL MODULE: ./src/Components/Organisms/Projects/Details/Sections/Tabs/Files/manage-media.tsx
var manage_media = __webpack_require__(26778);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Files/index.tsx
const FilesTab=_ref=>{var _project$data,_project$data2;let{data,permissions,onEdit}=_ref;const{project,projectFiles}=data;const[tabKey,setTabKey]=(0,react.useState)("documents");const[isManageMediaOpen,setIsManageMediaOpen]=(0,react.useState)(false);const renderTabBar=(props,DefaultTabBar)=>/*#__PURE__*/(0,jsx_runtime.jsxs)(react_sticky_box_dist/* default */.A,{offsetTop:0,offsetBottom:20,style:{zIndex:1},className:Files_styles_module/* default */.A.tabBar_header,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(DefaultTabBar,(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},props),{},{className:"mb-0",style:{fontSize:'var(--font-size-md)'}})),tabKey!=="links"&&/*#__PURE__*/(0,jsx_runtime.jsx)(es_button/* default */.A,{type:"link",onClick:()=>setIsManageMediaOpen(true),className:"ml-auto font-size-sm color-dark-main",style:{paddingBottom:'0px'},children:"Manage"})]});return/*#__PURE__*/(0,jsx_runtime.jsxs)("section",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(tabs/* default */.A,{type:"card",renderTabBar:renderTabBar,className:"files-tab",items:[{label:'Documents',key:'documents',children:/*#__PURE__*/(0,jsx_runtime.jsx)(media/* default */.A,{data:projectFiles===null||projectFiles===void 0?void 0:projectFiles.data,meta:projectFiles===null||projectFiles===void 0?void 0:projectFiles.meta,onRefresh:projectFiles===null||projectFiles===void 0?void 0:projectFiles.onRefresh,projectId:project===null||project===void 0?void 0:(_project$data=project.data)===null||_project$data===void 0?void 0:_project$data.id})},{label:'Links',key:'links',children:/*#__PURE__*/(0,jsx_runtime.jsx)(links,{onEdit:onEdit,project:{data:project===null||project===void 0?void 0:project.data,onRefresh:project===null||project===void 0?void 0:project.onRefresh}})}],onChange:key=>setTabKey(key)}),tabKey!=="links"&&/*#__PURE__*/(0,jsx_runtime.jsx)(uploader,{data:{project,projectFiles},permissions:permissions}),tabKey!=="links"&&/*#__PURE__*/(0,jsx_runtime.jsx)(manage_media/* default */.A,{projectId:project===null||project===void 0?void 0:(_project$data2=project.data)===null||_project$data2===void 0?void 0:_project$data2.id,isManageMediaOpen:isManageMediaOpen,setIsManageMediaOpen:setIsManageMediaOpen,shareFiles:true,media:{loading:projectFiles===null||projectFiles===void 0?void 0:projectFiles.loading,data:projectFiles===null||projectFiles===void 0?void 0:projectFiles.data,onRefresh:projectFiles===null||projectFiles===void 0?void 0:projectFiles.onRefresh,meta:projectFiles===null||projectFiles===void 0?void 0:projectFiles.meta}})]});};/* harmony default export */ const Files = (FilesTab);
// EXTERNAL MODULE: ./node_modules/antd/es/collapse/index.js + 6 modules
var collapse = __webpack_require__(98412);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Reports/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Reports_styles_module = ({"sharedFiles":"styles_sharedFiles__pLzqA","sharedFiles__details":"styles_sharedFiles__details__Dq+AE"});
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Reports/shared-files-details.tsx
const{Text}=typography/* default */.A;const SharedFilesDetails=props=>{const{onClose,open,data,batchNumber}=props;const access_token=tokenService/* default */.A.getLocalAccessToken();return/*#__PURE__*/(0,jsx_runtime.jsx)(drawer/* default */.A,{open:open,onClose:onClose,width:window.innerWidth>500?500:"100%",title:"Shared Files with batch number ".concat(batchNumber),placement:"right",destroyOnClose:true,bodyStyle:{padding:"0px 25px"},children:data===null||data===void 0?void 0:data.map((item,idx)=>{var _item$fileType,_item$AddedBy,_item$AddedBy2,_item$AddedBy3;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Reports_styles_module.sharedFiles,children:[(_item$fileType=item.fileType)!==null&&_item$fileType!==void 0&&_item$fileType.includes('image')?/*#__PURE__*/(0,jsx_runtime.jsx)(es_image/* default */.A,{src:"".concat(constants/* PROTECTED_RESOURCE_BASE_URL */.SO).concat(item.path,"?authKey=").concat(access_token),alt:item.title,width:100,height:70,style:{borderRadius:5,objectFit:'cover'},preview:false}):/*#__PURE__*/(0,jsx_runtime.jsx)(es_image/* default */.A,{src:"/images/doc.png",alt:"Document-".concat(idx),width:100,height:70,preview:false,style:{objectFit:'contain'}}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Reports_styles_module.sharedFiles__details,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Text,{ellipsis:{tooltip:item.title},children:item.title}),/*#__PURE__*/(0,jsx_runtime.jsx)(Text,{ellipsis:{tooltip:item.documentType},children:commonEnums/* ProjectDocumentsTypes */.T5[item.documentType]}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"".concat(item===null||item===void 0?void 0:(_item$AddedBy=item.AddedBy)===null||_item$AddedBy===void 0?void 0:_item$AddedBy.firstName," ").concat(item===null||item===void 0?void 0:(_item$AddedBy2=item.AddedBy)===null||_item$AddedBy2===void 0?void 0:_item$AddedBy2.lastName),children:/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),size:"small",src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(item===null||item===void 0?void 0:(_item$AddedBy3=item.AddedBy)===null||_item$AddedBy3===void 0?void 0:_item$AddedBy3.profile)})})]})]},idx);})});};/* harmony default export */ const shared_files_details = (SharedFilesDetails);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Reports/shared-files.tsx
const SharedFilesReport=_ref=>{let{data,loading}=_ref;const[sharedFiles,setSharedFiles]=(0,react.useState)();const columns=[{title:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",weight:"semi",children:"Batch No."}),dataIndex:'batchNumber',key:'batchNumber',render:batchNumber=>/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",children:batchNumber})},{title:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",weight:"semi",children:"Total Files"}),dataIndex:'sharedFiles',key:'sharedFiles',render:(sharedFiles,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",className:"text-underline cursor-pointer",onClick:()=>setSharedFiles({open:true,data:sharedFiles,batchNumber:record.batchNumber}),children:"".concat(sharedFiles===null||sharedFiles===void 0?void 0:sharedFiles.length," Files")})},{title:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",weight:"semi",children:"Date Shared"}),dataIndex:'sharedDate',key:'sharedDate',render:sharedDate=>/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",children:(0,dateHandler/* convertDate */.ic)(sharedDate,"dd M,yy-t")})}];return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{dataSource:data,columns:columns,pagination:false,loading:loading,rowKey:"batchNumber",onHeaderRow:(_columns,_index)=>{return{style:{backgroundColor:'var(--color-light)'}};}}),(sharedFiles===null||sharedFiles===void 0?void 0:sharedFiles.open)&&/*#__PURE__*/(0,jsx_runtime.jsx)(shared_files_details,{open:sharedFiles===null||sharedFiles===void 0?void 0:sharedFiles.open,batchNumber:sharedFiles===null||sharedFiles===void 0?void 0:sharedFiles.batchNumber,onClose:()=>setSharedFiles({open:false,data:[],batchNumber:0}),data:sharedFiles===null||sharedFiles===void 0?void 0:sharedFiles.data})]});};/* harmony default export */ const shared_files = (SharedFilesReport);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/Reports/index.tsx
const{Panel}=collapse/* default */.A;const ReportTab=_ref=>{let{projectId}=_ref;const module=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);const{data,loading}=(0,hooks/* useFetchData */.Gs)({method:()=>module.sharedFiles(projectId)});return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(collapse/* default */.A,{defaultActiveKey:['sharedFiles'],expandIconPosition:"end",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Panel,{header:"Shared Files",children:/*#__PURE__*/(0,jsx_runtime.jsx)(shared_files,{data:data,loading:loading})},"sharedFiles")})});};/* harmony default export */ const Reports = (ReportTab);
;// ./src/Components/Organisms/Projects/Details/Sections/Tabs/index.ts

;// ./src/Components/Organisms/Projects/Details/Sections/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Sections_styles_module = ({"wrapper":"styles_wrapper__r-Szw","chat":"styles_chat__PFJlc","chat_icon":"styles_chat_icon__Z6VME","main":"styles_main__MZOq4","main_body":"styles_main_body__4RSKN","main_body_title_wrap":"styles_main_body_title_wrap__lLNdw","main_body_title":"styles_main_body_title__QYJgh","main_body_instructions_wrap":"styles_main_body_instructions_wrap__-GhXk","main_body_instructions":"styles_main_body_instructions__tZaoi","main_body_stats":"styles_main_body_stats__57K1T","main_body_stats_card":"styles_main_body_stats_card__uO0UZ","main_body_stats_card_title":"styles_main_body_stats_card_title__2ayYm","main_body_stats_card_value":"styles_main_body_stats_card_value__E5EM1","main_body_stats_progress":"styles_main_body_stats_progress__jwUQZ","main_body_content":"styles_main_body_content__Ro+Lf","divider":"styles_divider__sRjXe","sidebar":"styles_sidebar__Dfj3w","main__header":"styles_main__header__nEvTZ","main__header__top":"styles_main__header__top__JxjSi","main__header__priority":"styles_main__header__priority__pDfiB","main_header_dropdowns":"styles_main_header_dropdowns__CLE-w","main_header_dropdowns_icon":"styles_main_header_dropdowns_icon__ZRDAT"});
// EXTERNAL MODULE: ./src/Components/Organisms/Projects/Details/Sections/States/index.tsx + 1 modules
var States = __webpack_require__(71708);
// EXTERNAL MODULE: ./src/Modules/Invoice/index.ts
var Invoice = __webpack_require__(49925);
;// ./src/Components/Organisms/Projects/Details/Sections/Invoice/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Invoice_styles_module = ({"badge":"styles_badge__LLaix","actionButtons":"styles_actionButtons__tZpj4"});
// EXTERNAL MODULE: ./src/Components/Icons/plus-circle.tsx
var plus_circle = __webpack_require__(24130);
;// ./src/Components/Organisms/Projects/Details/Sections/Invoice/index.tsx
const{Paragraph}=typography/* default */.A;const ProjectInvoice=_ref=>{let{projectId}=_ref;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readInvoice}=permissions;const module=(0,react.useMemo)(()=>new Invoice/* InvoiceModule */.O(),[]);const[showManage,setShowManage]=(0,react.useState)({});const[xeroInvoices,setXeroInvoices]=(0,react.useState)(undefined);const condition=(0,react.useMemo)(()=>projectId&&readInvoice===true,[readInvoice,projectId]);const{data,loading}=(0,hooks/* useConditionFetchData */.P6)({method:module.getAllRecords,initialQuery:{projectId:projectId},condition:condition});// Fetch Xero invoices and handle errors
(0,react.useEffect)(()=>{const fetchXeroInvoices=async()=>{try{const response=await module.getAllRecords({// __status: [InvoiceStatus.AUTHORIZED], // Pass as an array
id:0,projectId:0,clientId:0,projectTypeId:0,fromDate:'',toDate:'',hasConcerns:false,invoiceNumber:''});// Check if response.data is an array of InvoiceTypes
if(Array.isArray(response.data)){setXeroInvoices(response.data);}else{console.error('Response data is not an array of InvoiceTypes:',response.data);}}catch(error){console.error('Failed to fetch invoices from Xero:',error);}};fetchXeroInvoices();},[]);// Ensure xeroInvoices is an array, even if undefined
const xeroInvoicesArray=xeroInvoices!==null&&xeroInvoices!==void 0?xeroInvoices:[];// Combine data from your system and Xero
const combinedInvoices=[...(data!==null&&data!==void 0?data:[]),...xeroInvoicesArray];const columns=[{title:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex items-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"Invoice Number"}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Create Invoice",children:/*#__PURE__*/(0,jsx_runtime.jsx)(plus_circle/* PlusCircleIcon */.G,{className:"ml-2",style:{cursor:"pointer"},stroke:"var(--color-dark-main)",onClick:()=>window.location.href="/invoice?projectId=".concat(projectId,"&actionType=create")})})]}),dataIndex:'id',key:'id',render:(id,record)=>{return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex items-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",children:record.invoiceNumber||"INV-".concat(id)}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Invoice_styles_module.actionButtons,children:showManage[id]&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:()=>/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[record.status===commonEnums/* InvoiceStatus */.Sx['Generated']&&"Edit Invoice",record.status===commonEnums/* InvoiceStatus */.Sx['Paid']&&"Cannot edit invoice because it is paid",record.status===commonEnums/* InvoiceStatus */.Sx['Canceled']&&"Cannot edit invoice because it is canceled",record.status===commonEnums/* InvoiceStatus */.Sx['Sent']&&"Cannot edit invoice because it is sent to the client"]}),children:/*#__PURE__*/(0,jsx_runtime.jsx)(EditOutlined/* default */.A,{className:"ml-3",style:{cursor:"pointer"},onClick:()=>{if(record.status!==commonEnums/* InvoiceStatus */.Sx['Generated'])return;window.location.href="/invoice?id=".concat(id,"&projectId=").concat(projectId,"&actionType=edit");}})}),/*#__PURE__*/(0,jsx_runtime.jsx)(badge/* default */.A,{className:"ml-3",size:"small",count:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Invoice_styles_module.badge,onClick:()=>window.location.href="/invoice?id=".concat(id,"&projectId=").concat(projectId,"&actionType=preview"),children:/*#__PURE__*/(0,jsx_runtime.jsx)("span",{style:{fontSize:'10px'},children:"Preview"})})})]})})]});},width:240},{title:'Last Message',dataIndex:'total',key:'total',render:(total,record)=>{var _record$InvoiceFollow;return/*#__PURE__*/(0,jsx_runtime.jsx)(Paragraph,{className:"mb-0",ellipsis:{rows:4,expandable:false},style:{width:'100%'},children:((_record$InvoiceFollow=record.InvoiceFollowUp)===null||_record$InvoiceFollow===void 0?void 0:_record$InvoiceFollow.length)>0?record.InvoiceFollowUp[0].note:""});},width:400},{title:'Status',dataIndex:'status',key:'status',render:status=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",children:commonEnums/* InvoiceStatus */.Sx[status]}),width:120},{title:'Amount',dataIndex:'total',key:'total',render:total=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",children:(0,common/* formatCurrency */.vv)(total)}),width:120}];return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:readInvoice===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{dataSource:combinedInvoices,columns:columns,pagination:false,loading:loading,sticky:true,rowKey:"id",style:{minHeight:'200px',overflowY:'auto'},onHeaderRow:(_columns,_index)=>({style:{backgroundColor:'var(--color-light)'}}),onRow:record=>({onMouseEnter:()=>setShowManage({[record.id]:true}),onMouseLeave:()=>setShowManage({})})})});};/* harmony default export */ const Sections_Invoice = (ProjectInvoice);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/EyeOutlined.js
var EyeOutlined = __webpack_require__(54021);
// EXTERNAL MODULE: ./src/Modules/Permits/index.ts
var Permits = __webpack_require__(30982);
// EXTERNAL MODULE: ./src/Components/Organisms/Permits/view-files.tsx
var view_files = __webpack_require__(14234);
;// ./src/Components/Organisms/Projects/Details/Sections/Permits/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Permits_styles_module = ({"badge":"styles_badge__NwxSd","actionButtons":"styles_actionButtons__0lkAL"});
;// ./src/Components/Organisms/Projects/Details/Sections/Permits/index.tsx
const statusEnum={financeColors:{[commonEnums/* PermitFinanceStatus */.cY["Pending Payment"]]:"var(--color-yellow-dark)",[commonEnums/* PermitFinanceStatus */.cY.Paid]:"var(--color-primary-main)",[commonEnums/* PermitFinanceStatus */.cY.Canceled]:"var(--color-red-yp)"},clientColors:{[commonEnums/* PermitClientStatus */.Vn["To be sent"]]:"var(--color-yellow-dark)",[commonEnums/* PermitClientStatus */.Vn.Sent]:"var(--color-primary-main)"}};const ProjectPermits=_ref=>{let{projectId}=_ref;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readPermit}=permissions;const module=(0,react.useMemo)(()=>new Permits/* PermitsModule */.v(),[]);const[showManage,setShowManage]=(0,react.useState)({});const[permitFiles,setPermitFiles]=(0,react.useState)();const condition=(0,react.useMemo)(()=>projectId&&readPermit===true,[readPermit,projectId]);const{data,loading}=(0,hooks/* useConditionFetchData */.P6)({method:module.getAllRecords,initialQuery:{projectId:projectId},condition:condition});const columns=[{title:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex items-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0",children:"Permits"}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Create Permits",children:/*#__PURE__*/(0,jsx_runtime.jsx)(plus_circle/* PlusCircleIcon */.G,{className:"ml-2",style:{cursor:"pointer"},stroke:"var(--color-dark-main)",onClick:()=>window.location.href="/permits?projectId=".concat(projectId,"&actionType=create")})})]}),dataIndex:'id',key:'id',render:(id,record)=>{var _record$_count2,_record$_count3;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center justify-space-between",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",children:record.title}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Authority:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:record.Authority.title})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Remarks:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:record.remarks})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-sub",size:"sm",className:"cursor-pointer text-underline mt-1",onClick:()=>{var _record$_count;if((record===null||record===void 0?void 0:(_record$_count=record._count)===null||_record$_count===void 0?void 0:_record$_count.Resources)>0){setPermitFiles({open:true,id:record.id});}},children:"".concat((record===null||record===void 0?void 0:(_record$_count2=record._count)===null||_record$_count2===void 0?void 0:_record$_count2.Resources)>0?"".concat(record===null||record===void 0?void 0:(_record$_count3=record._count)===null||_record$_count3===void 0?void 0:_record$_count3.Resources," files Attached"):"No Attachments"," ")})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Permits_styles_module.actionButtons,children:showManage[id]&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"View More",children:/*#__PURE__*/(0,jsx_runtime.jsx)(EyeOutlined/* default */.A,{style:{cursor:"pointer"},onClick:()=>window.location.href="/permits?id=".concat(id,"&projectId=").concat(projectId,"&actionType=view")})}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Edit",children:/*#__PURE__*/(0,jsx_runtime.jsx)(EditOutlined/* default */.A,{className:"ml-3",style:{cursor:"pointer"},onClick:()=>window.location.href="/permits?id=".concat(id,"&projectId=").concat(projectId,"&actionType=edit")})})]})})]});},width:'400px'},{title:"Date/Status",dataIndex:"date",key:"date",render:(_date,record)=>{const isExpired=(0,common/* isDateGreaterThan */.uh)(record===null||record===void 0?void 0:record.expiryDate,new Date().toISOString());return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Approved:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:(0,dateHandler/* convertDate */.ic)(record.approvedDate,"MM dd,yy")})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Expiry:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:(0,dateHandler/* convertDate */.ic)(record.expiryDate,"MM dd,yy")})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between mt-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Status:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{size:"sm",className:"ml-1 ".concat(isExpired?'color-red-yp':'color-primary-main'),children:isExpired?'Expired':'Active'})]})]});},width:'200px'},{title:'Finance Status',dataIndex:'financeStatus',key:'financeStatus',render:financeStatus=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{style:{color:statusEnum.financeColors[financeStatus]},children:commonEnums/* PermitFinanceStatus */.cY[financeStatus]}),width:'150px'},{title:'Client Status',dataIndex:'clientStatus',key:'clientStatus',render:clientStatus=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{style:{color:statusEnum.clientColors[clientStatus]},children:commonEnums/* PermitClientStatus */.Vn[clientStatus]}),width:'150px'}];return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[readPermit===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{dataSource:data,columns:columns,pagination:false,loading:loading,sticky:true,rowKey:"id",style:{minHeight:'200px',overflowY:'auto'},onHeaderRow:(_columns,_index)=>{return{style:{backgroundColor:'var(--color-light)'}};},onRow:record=>{return{onMouseEnter:()=>setShowManage({[record.id]:true}),onMouseLeave:()=>setShowManage({})};},scroll:{x:1000}}),(permitFiles===null||permitFiles===void 0?void 0:permitFiles.open)&&/*#__PURE__*/(0,jsx_runtime.jsx)(view_files/* default */.A,{id:permitFiles.id,open:permitFiles.open,onClose:()=>setPermitFiles({open:false,id:0})})]});};/* harmony default export */ const Sections_Permits = (ProjectPermits);
// EXTERNAL MODULE: ./node_modules/antd/es/segmented/index.js + 2 modules
var segmented = __webpack_require__(84649);
// EXTERNAL MODULE: ./src/Modules/Transactions/index.ts
var Transactions = __webpack_require__(54475);
;// ./src/Components/Organisms/Projects/Details/Sections/Transactions/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const Transactions_styles_module = ({"badge":"styles_badge__gfs8A","actionButtons":"styles_actionButtons__zSdI0"});
;// ./src/Components/Organisms/Projects/Details/Sections/Transactions/index.tsx
const ProjectGovernmentFees=_ref=>{let{projectId}=_ref;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readTransaction}=permissions;const module=(0,react.useMemo)(()=>new Transactions/* TransactionsModule */.c(),[]);const[showManage,setShowManage]=(0,react.useState)({});const condition=(0,react.useMemo)(()=>projectId&&readTransaction===true,[readTransaction,projectId]);const{data,loading,onRefresh}=(0,hooks/* useConditionFetchData */.P6)({method:module.getAllRecords,initialQuery:{projectId:projectId,onlyGovernmentFees:true},condition:condition});const columns=[{title:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{style:{overflow:"auto"},className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(segmented/* default */.A,{defaultValue:"onlyGovernmentFees",options:[{label:'Government Fees',value:'onlyGovernmentFees'},{label:'Invoice Payments',value:'onlyInvoicePayments'}],onChange:value=>onRefresh({[value]:true,projectId:projectId})}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Create Government Fees",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* PlusCircleIcon */.GY,{className:"ml-2",style:{cursor:"pointer"},stroke:"var(--color-dark-main)",onClick:()=>window.location.href="/transactions?projectId=".concat(projectId,"&actionType=create")})})]}),dataIndex:'id',key:'id',render:(id,record)=>{return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center justify-space-between",children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",children:record.title}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex items-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Remarks:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:record.remarks})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Transactions_styles_module.actionButtons,children:showManage[id]&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"View More",children:/*#__PURE__*/(0,jsx_runtime.jsx)(EyeOutlined/* default */.A,{style:{cursor:"pointer"},onClick:()=>window.location.href="/transactions?id=".concat(id,"&projectId=").concat(projectId,"&actionType=view")})}),/*#__PURE__*/(0,jsx_runtime.jsx)(tooltip/* default */.A,{title:"Edit",children:/*#__PURE__*/(0,jsx_runtime.jsx)(EditOutlined/* default */.A,{className:"ml-3",style:{cursor:"pointer"},onClick:()=>window.location.href="/transactions?id=".concat(id,"&projectId=").concat(projectId,"&actionType=edit")})})]})})]});},width:'400px'},{title:'Overview',dataIndex:'overview',key:'overview',render:(_overview,record)=>{var _record$Authority;return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Reference:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:record.transactionReference})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Date:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:(0,dateHandler/* convertDate */.ic)(record.transactionDate,"dd M,yy")})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex justify-between flex-wrap",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:"Authority:"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",className:"ml-1",children:record===null||record===void 0?void 0:(_record$Authority=record.Authority)===null||_record$Authority===void 0?void 0:_record$Authority.title})]}),(record===null||record===void 0?void 0:record.receipt)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("a",{href:"".concat(constants/* APPLICATION_RESOURCE_BASE_URL */.Ur).concat(record===null||record===void 0?void 0:record.receipt),target:"_blank",rel:"noreferrer",title:" View Receipt",className:"d-flex align-center mt-2",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",children:"View Receipt"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* ExternalIcon */.XM,{})]})]});},width:"350px"},{title:'Amount',dataIndex:'amount',key:'amount',render:amount=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",children:(0,common/* formatCurrency */.vv)(amount)}),width:"200px"},{title:'Assigned To',dataIndex:'AssignedTo',key:'AssignedTo',render:AssignedTo=>/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(avatar/* default */.A,{src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.profile),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(UserOutlined/* default */.A,{}),size:30}),/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-sub",size:"sm",className:"ml-1",children:"".concat(AssignedTo!==null&&AssignedTo!==void 0&&AssignedTo.firstName&&AssignedTo!==null&&AssignedTo!==void 0&&AssignedTo.lastName?"".concat(AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.firstName," ").concat(AssignedTo===null||AssignedTo===void 0?void 0:AssignedTo.lastName):"Not Assigned")})]}),width:"250px"},{title:'Status',dataIndex:'status',key:'status',render:status=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",children:commonEnums/* TransactionStatus */.x8[status]}),width:"150px"}];return/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:readTransaction===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{dataSource:data,columns:columns,pagination:false,loading:loading,sticky:true,rowKey:"id",style:{minHeight:'200px',overflowY:'auto'},onHeaderRow:(_columns,_index)=>{return{style:{backgroundColor:'var(--color-light)'}};},onRow:record=>{return{onMouseEnter:()=>setShowManage({[record.id]:true}),onMouseLeave:()=>setShowManage({})};},scroll:{x:1000}})});};/* harmony default export */ const Sections_Transactions = (ProjectGovernmentFees);
// EXTERNAL MODULE: ./src/Components/Icons/x-mark.tsx
var x_mark = __webpack_require__(59385);
// EXTERNAL MODULE: ./src/Components/Notepad/Notepad.tsx + 4 modules
var Notepad = __webpack_require__(23081);
// EXTERNAL MODULE: ./src/Components/Organisms/GoogleCalender/index.tsx + 47 modules
var GoogleCalender = __webpack_require__(86527);
;// ./src/Components/Organisms/Projects/Details/Sections/index.tsx
const FinanceReportLabel={projectEstimate:'Project Estimate',invoicedAmount:'Invoiced Amount',invoicedPercentage:'Invoiced Percentage',timeAndExpensesAmount:'Other Expenses',toBeInvoicedAmount:'To Be Invoiced',toBeInvoicedAmountPercentage:'To Be Invoiced Percentage',invoiceToCollectPayment:'Invoice To Collect',governmentFeesToCollect:'Gov. Fees To Collect',permitExpiringThisMonth:'Permit Expiring'};const AllSections=props=>{var _project$data2,_project$data5,_project$data7,_project$data8,_taskPriority,_project$data9,_taskPriority2,_project$data10,_project$data13,_project$data14,_project$data15,_project$data16,_project$data17,_project$data18,_project$data18$Finan,_project$data19,_project$data19$Finan,_project$data20,_project$data20$Finan,_project$data20$Finan2,_project$data21,_project$data21$Finan,_project$data22,_project$data22$Finan,_project$data23,_project$data23$Finan,_project$data24,_project$data24$Finan,_project$data24$Finan2,_project$data25,_project$data25$Finan,_project$data26,_project$data26$Finan,_project$data27,_project$data27$Finan,_project$data28,_project$data28$Finan,_project$data29,_project$data29$Finan,_project$data30,_project$data30$Finan,_project$data31,_project$data32,_project$data33,_project$data34,_project$data34$_coun,_project$data35;const{permissions,data,onDelete,onEdit,setFetchFiles}=props;const module=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);const{project,projectFiles,projectStates}=data;const{readProject}=permissions;const navigate=(0,react_router_dist/* useNavigate */.Zp)();const[openConversation,setOpenConversation]=(0,react.useState)(false);const[projectConversations,setProjectConversations]=(0,react.useState)({data:[],meta:{},loading:false});const conversationsCondition=(0,react.useMemo)(()=>{var _project$data;const projectId=project===null||project===void 0?void 0:(_project$data=project.data)===null||_project$data===void 0?void 0:_project$data.id;return!!projectId&&readProject===true&&openConversation===true;},[readProject,project===null||project===void 0?void 0:(_project$data2=project.data)===null||_project$data2===void 0?void 0:_project$data2.id,openConversation]);/** Function to get project conversations */const onGetProjectConversations=(0,react.useCallback)(query=>{var _project$data3,_project$data4;if(!(project!==null&&project!==void 0&&(_project$data3=project.data)!==null&&_project$data3!==void 0&&_project$data3.id))return;const params=(0,objectSpread2/* default */.A)({projectId:project===null||project===void 0?void 0:(_project$data4=project.data)===null||_project$data4===void 0?void 0:_project$data4.id,perPage:7},query);module.getProjectConversations(params).then(res=>{const{data,meta}=res===null||res===void 0?void 0:res.data;// only add unique conversations
const uniqueConversations=data===null||data===void 0?void 0:data.filter(conversation=>{var _projectConversations;return!(projectConversations!==null&&projectConversations!==void 0&&(_projectConversations=projectConversations.data)!==null&&_projectConversations!==void 0&&_projectConversations.find(item=>item.id===conversation.id));});setProjectConversations(prev=>{return{data:[...((prev===null||prev===void 0?void 0:prev.data)||[]),...(uniqueConversations||[])],meta:meta||{},loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||'Something went wrong');setProjectConversations(prev=>{return{data:(prev===null||prev===void 0?void 0:prev.data)||[],meta:(prev===null||prev===void 0?void 0:prev.meta)||{},loading:false};});});},[project===null||project===void 0?void 0:(_project$data5=project.data)===null||_project$data5===void 0?void 0:_project$data5.id,projectConversations===null||projectConversations===void 0?void 0:projectConversations.data]);const[tab,setTab]=(0,react.useState)('details');const[dropdownOpen,setDropdownOpen]=(0,react.useState)(false);const[deleteConfirmation,setDeleteConfirmation]=(0,react.useState)(false);const renderTabBar=(props,DefaultTabBar)=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Sections_styles_module.tabBar_header,children:/*#__PURE__*/(0,jsx_runtime.jsx)(DefaultTabBar,(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},props),{},{className:"mb-2",style:{fontSize:'var(--font-size-md)'}}))});const[isUpdate,setIsUpdate]=(0,react.useState)({title:{value:'',show:false},instructions:{value:'',show:false}});/**Function to update the project title and instructions 
   * @param {object} values - name and value of the input to save the updated value in the state
   */const onInputsChange=values=>{const{name,value}=values;setIsUpdate(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{[name]:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev[name]),{},{value})}));};/**Function to change the visibility of the editable inputs
   * @param {object} values - name and value of the input to change the visibility in the state
   */const onVisibleChange=values=>{const{name,value}=values;setIsUpdate(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{[name]:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev[name]),{},{show:value})}));};/**Function to update the project title and instructions
   * @param {object} values - name and value of the input to save the updated value in the database
   */const onMouseDown=values=>{var _project$data6;const{name,value}=values;onVisibleChange({name,value:false});if(value==="")return;onEdit({[name]:value},project===null||project===void 0?void 0:(_project$data6=project.data)===null||_project$data6===void 0?void 0:_project$data6.id);};(0,react.useEffect)(()=>{if(conversationsCondition){onGetProjectConversations();}},[conversationsCondition]);return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.wrapper,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("section",{className:Sections_styles_module.main,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.main__header,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.main__header__top,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{type:"h1",size:"normal",color:"dark-sub",weight:"bold",className:"my-auto",children:project!==null&&project!==void 0&&(_project$data7=project.data)!==null&&_project$data7!==void 0&&_project$data7.referenceNumber?"".concat(project===null||project===void 0?void 0:(_project$data8=project.data)===null||_project$data8===void 0?void 0:_project$data8.referenceNumber):"No Reference Number"}),/*#__PURE__*/(0,jsx_runtime.jsx)(tag/* default */.A,{className:Sections_styles_module.main__header__priority,color:(_taskPriority=commonEnums/* taskPriority */.sh[project===null||project===void 0?void 0:(_project$data9=project.data)===null||_project$data9===void 0?void 0:_project$data9.priority])===null||_taskPriority===void 0?void 0:_taskPriority.color,children:(_taskPriority2=commonEnums/* taskPriority */.sh[project===null||project===void 0?void 0:(_project$data10=project.data)===null||_project$data10===void 0?void 0:_project$data10.priority])===null||_taskPriority2===void 0?void 0:_taskPriority2.title})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.main_header_dropdowns,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Status,{permissions:permissions,data:{project:project.data,onRefresh:project.onRefresh}}),/*#__PURE__*/(0,jsx_runtime.jsx)(States/* default */.A,{permissions:permissions,data:{projectStates:projectStates.data,project:{data:project.data,onRefresh:project.onRefresh}}}),/*#__PURE__*/(0,jsx_runtime.jsx)(dropdown/* default */.A,{trigger:['click'],open:dropdownOpen,onOpenChange:open=>setDropdownOpen(open),menu:{items:[{key:'edit',label:'Edit',icon:/*#__PURE__*/(0,jsx_runtime.jsx)(EditOutlined/* default */.A,{}),onClick:()=>{var _project$data11;navigate("/projects/edit?id=".concat(project===null||project===void 0?void 0:(_project$data11=project.data)===null||_project$data11===void 0?void 0:_project$data11.id));}},{key:'delete',label:/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{title:"Are you sure to delete this project?",okText:"Yes",cancelText:"No",placement:"bottom",open:deleteConfirmation,onOpenChange:open=>setDeleteConfirmation(open),onConfirm:()=>{var _project$data12;return onDelete(project===null||project===void 0?void 0:(_project$data12=project.data)===null||_project$data12===void 0?void 0:_project$data12.id);},children:"Delete"}),icon:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{}),danger:true,onClick:()=>setDeleteConfirmation(!deleteConfirmation)}]},children:/*#__PURE__*/(0,jsx_runtime.jsx)(MoreOutlined/* default */.A,{className:Sections_styles_module.main_header_dropdowns_icon})})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.main_body,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Sections_styles_module.main_body_title_wrap,children:isUpdate!==null&&isUpdate!==void 0&&isUpdate.title.show?/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* EditableInput */.jc,{onBlur:()=>onVisibleChange({name:'title',value:false}),onMouseDown:()=>{var _isUpdate$title;return onMouseDown({name:'title',value:isUpdate===null||isUpdate===void 0?void 0:(_isUpdate$title=isUpdate.title)===null||_isUpdate$title===void 0?void 0:_isUpdate$title.value});},onChange:e=>onInputsChange({name:'title',value:e.target.value}),defaultValue:project===null||project===void 0?void 0:(_project$data13=project.data)===null||_project$data13===void 0?void 0:_project$data13.title,style:{padding:"4px 0px",fontWeight:"var(--font-weight-md)"},size:"small"}):/*#__PURE__*/(0,jsx_runtime.jsx)("h3",{className:Sections_styles_module.main_body_title,onClick:()=>onVisibleChange({name:'title',value:true}),children:(project===null||project===void 0?void 0:(_project$data14=project.data)===null||_project$data14===void 0?void 0:_project$data14.title)||"No title provided, click to add title"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Sections_styles_module.main_body_instructions_wrap,onClick:()=>onVisibleChange({name:'instructions',value:true}),children:isUpdate!==null&&isUpdate!==void 0&&isUpdate.instructions.show?/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* EditableTextarea */.HU,{autoSize:{minRows:8},onBlur:()=>onVisibleChange({name:'instructions',value:false}),onMouseDown:()=>{var _isUpdate$instruction;return onMouseDown({name:'instructions',value:isUpdate===null||isUpdate===void 0?void 0:(_isUpdate$instruction=isUpdate.instructions)===null||_isUpdate$instruction===void 0?void 0:_isUpdate$instruction.value});},onChange:e=>onInputsChange({name:'instructions',value:e.target.value}),defaultValue:project===null||project===void 0?void 0:(_project$data15=project.data)===null||_project$data15===void 0?void 0:_project$data15.instructions,className:"font-size-normal font-weight-normal pa-1",style:{fontWeight:"var(--font-weight-md)"}}):/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Sections_styles_module.main_body_instructions,children:(project===null||project===void 0?void 0:(_project$data16=project.data)===null||_project$data16===void 0?void 0:_project$data16.instructions)||"No instructions provided, click to add instructions"})}),(project===null||project===void 0?void 0:(_project$data17=project.data)===null||_project$data17===void 0?void 0:_project$data17.FinanceReport)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.main_body_stats,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{size:"small",className:Sections_styles_module.main_body_stats_card,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:FinanceReportLabel.projectEstimate}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Sections_styles_module.main_body_stats_card_value,children:(0,common/* formatCurrency */.vv)(project===null||project===void 0?void 0:(_project$data18=project.data)===null||_project$data18===void 0?void 0:(_project$data18$Finan=_project$data18.FinanceReport)===null||_project$data18$Finan===void 0?void 0:_project$data18$Finan.projectEstimate)||0})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{size:"small",className:Sections_styles_module.main_body_stats_card,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:FinanceReportLabel.invoicedAmount}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Sections_styles_module.main_body_stats_card_value,children:(0,common/* formatCurrency */.vv)(project===null||project===void 0?void 0:(_project$data19=project.data)===null||_project$data19===void 0?void 0:(_project$data19$Finan=_project$data19.FinanceReport)===null||_project$data19$Finan===void 0?void 0:_project$data19$Finan.invoicedAmount)||0}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.main_body_stats_progress,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"mb-0 font-size-xs",style:{fontWeight:400},children:[(project===null||project===void 0?void 0:(_project$data20=project.data)===null||_project$data20===void 0?void 0:(_project$data20$Finan=_project$data20.FinanceReport)===null||_project$data20$Finan===void 0?void 0:(_project$data20$Finan2=_project$data20$Finan.invoicedPercentage)===null||_project$data20$Finan2===void 0?void 0:_project$data20$Finan2.toFixed(2))||0,"% of ",FinanceReportLabel.projectEstimate]}),/*#__PURE__*/(0,jsx_runtime.jsx)(progress/* default */.A,{strokeColor:{from:'#108ee9',to:'#87d068'},percent:(project===null||project===void 0?void 0:(_project$data21=project.data)===null||_project$data21===void 0?void 0:(_project$data21$Finan=_project$data21.FinanceReport)===null||_project$data21$Finan===void 0?void 0:_project$data21$Finan.invoicedPercentage)||0,status:"active",showInfo:false})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{size:"small",className:Sections_styles_module.main_body_stats_card,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:FinanceReportLabel.timeAndExpensesAmount}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Sections_styles_module.main_body_stats_card_value,children:(0,common/* formatCurrency */.vv)(project===null||project===void 0?void 0:(_project$data22=project.data)===null||_project$data22===void 0?void 0:(_project$data22$Finan=_project$data22.FinanceReport)===null||_project$data22$Finan===void 0?void 0:_project$data22$Finan.timeAndExpensesAmount)||0})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{size:"small",className:Sections_styles_module.main_body_stats_card,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("b",{children:FinanceReportLabel.toBeInvoicedAmount}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:Sections_styles_module.main_body_stats_card_value,children:(0,common/* formatCurrency */.vv)(project===null||project===void 0?void 0:(_project$data23=project.data)===null||_project$data23===void 0?void 0:(_project$data23$Finan=_project$data23.FinanceReport)===null||_project$data23$Finan===void 0?void 0:_project$data23$Finan.toBeInvoicedAmount)||0}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Sections_styles_module.main_body_stats_progress,children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"mb-0 font-size-xs",style:{fontWeight:400},children:[(project===null||project===void 0?void 0:(_project$data24=project.data)===null||_project$data24===void 0?void 0:(_project$data24$Finan=_project$data24.FinanceReport)===null||_project$data24$Finan===void 0?void 0:(_project$data24$Finan2=_project$data24$Finan.toBeInvoicedAmountPercentage)===null||_project$data24$Finan2===void 0?void 0:_project$data24$Finan2.toFixed(2))||0,"% of ",FinanceReportLabel.projectEstimate]}),/*#__PURE__*/(0,jsx_runtime.jsx)(progress/* default */.A,{strokeColor:{from:'#108ee9',to:'#87d068'},percent:(project===null||project===void 0?void 0:(_project$data25=project.data)===null||_project$data25===void 0?void 0:(_project$data25$Finan=_project$data25.FinanceReport)===null||_project$data25$Finan===void 0?void 0:_project$data25$Finan.toBeInvoicedAmountPercentage)||0,status:"active",showInfo:false,size:"small"})]})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)(card/* default */.A,{size:"small",className:Sections_styles_module.main_body_stats_card,bodyStyle:{display:"flex",margin:"auto 0",flexDirection:"column"},children:[/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"".concat(Sections_styles_module.main_body_stats_card_title," mb-1"),children:[FinanceReportLabel.invoiceToCollectPayment,": ","",(project===null||project===void 0?void 0:(_project$data26=project.data)===null||_project$data26===void 0?void 0:(_project$data26$Finan=_project$data26.FinanceReport)===null||_project$data26$Finan===void 0?void 0:_project$data26$Finan.invoiceToCollectPayment)||0]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"".concat(Sections_styles_module.main_body_stats_card_title," mb-1"),style:{color:(project===null||project===void 0?void 0:(_project$data27=project.data)===null||_project$data27===void 0?void 0:(_project$data27$Finan=_project$data27.FinanceReport)===null||_project$data27$Finan===void 0?void 0:_project$data27$Finan.governmentFeesToCollect)>0?'var(--color-red-yp)':''},children:[FinanceReportLabel.governmentFeesToCollect,": ","",(project===null||project===void 0?void 0:(_project$data28=project.data)===null||_project$data28===void 0?void 0:(_project$data28$Finan=_project$data28.FinanceReport)===null||_project$data28$Finan===void 0?void 0:_project$data28$Finan.governmentFeesToCollect)||0]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"".concat(Sections_styles_module.main_body_stats_card_title," mb-0"),style:{color:(project===null||project===void 0?void 0:(_project$data29=project.data)===null||_project$data29===void 0?void 0:(_project$data29$Finan=_project$data29.FinanceReport)===null||_project$data29$Finan===void 0?void 0:_project$data29$Finan.permitExpiringThisMonth)>0?'var(--color-red-yp)':''},children:[FinanceReportLabel.permitExpiringThisMonth,": ","",(project===null||project===void 0?void 0:(_project$data30=project.data)===null||_project$data30===void 0?void 0:(_project$data30$Finan=_project$data30.FinanceReport)===null||_project$data30$Finan===void 0?void 0:_project$data30$Finan.permitExpiringThisMonth)||0]})]})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mb-4",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Info,{data:project===null||project===void 0?void 0:project.data,onRefresh:project.onRefresh})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(Sections_Invoice,{projectId:project===null||project===void 0?void 0:(_project$data31=project.data)===null||_project$data31===void 0?void 0:_project$data31.id}),/*#__PURE__*/(0,jsx_runtime.jsx)(Sections_Permits,{projectId:project===null||project===void 0?void 0:(_project$data32=project.data)===null||_project$data32===void 0?void 0:_project$data32.id}),/*#__PURE__*/(0,jsx_runtime.jsx)(Sections_Transactions,{projectId:project===null||project===void 0?void 0:(_project$data33=project.data)===null||_project$data33===void 0?void 0:_project$data33.id})]}),/*#__PURE__*/(0,jsx_runtime.jsx)(divider/* default */.A,{className:Sections_styles_module.divider,type:"vertical"}),/*#__PURE__*/(0,jsx_runtime.jsx)("section",{className:Sections_styles_module.sidebar,children:/*#__PURE__*/(0,jsx_runtime.jsx)(tabs/* default */.A,{style:{overflowX:"hidden"},className:"sidebar_tabs",activeKey:tab,onChange:key=>{const keyType=key;setTab(keyType);keyType==='files'&&setFetchFiles(true);},renderTabBar:renderTabBar,items:[{label:"Details",key:"details",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Details,{permissions:permissions,onEdit:onEdit,data:{project:{data:project===null||project===void 0?void 0:project.data,onRefresh:project.onRefresh}}})},{label:/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{className:"mr-2",children:"Files"}),/*#__PURE__*/(0,jsx_runtime.jsx)(badge/* default */.A,{count:(project===null||project===void 0?void 0:(_project$data34=project.data)===null||_project$data34===void 0?void 0:(_project$data34$_coun=_project$data34._count)===null||_project$data34$_coun===void 0?void 0:_project$data34$_coun.Resources)||0,showZero:true,color:"#faad14"})]}),key:"files",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Files,{permissions:permissions,data:{project:{data:project===null||project===void 0?void 0:project.data,onRefresh:project.onRefresh},projectFiles:{data:projectFiles===null||projectFiles===void 0?void 0:projectFiles.data,onRefresh:projectFiles.onRefresh,meta:projectFiles===null||projectFiles===void 0?void 0:projectFiles.meta,loading:projectFiles===null||projectFiles===void 0?void 0:projectFiles.loading}},onEdit:onEdit})},{label:"Reports",key:'reports',children:/*#__PURE__*/(0,jsx_runtime.jsx)(Reports,{projectId:project===null||project===void 0?void 0:(_project$data35=project.data)===null||_project$data35===void 0?void 0:_project$data35.id})},{label:"Notes",key:'notepad',children:/*#__PURE__*/(0,jsx_runtime.jsx)(Notepad/* default */.A,{})},{label:"Events",key:'Events',children:/*#__PURE__*/(0,jsx_runtime.jsx)(GoogleCalender/* default */.A,{})}]})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Sections_styles_module.chat,children:/*#__PURE__*/(0,jsx_runtime.jsx)(dropdown/* default */.A,{trigger:['click'],open:openConversation,dropdownRender:()=>{var _project$data36,_project$data37;return/*#__PURE__*/(0,jsx_runtime.jsx)(Conversations,{projectId:project===null||project===void 0?void 0:(_project$data36=project.data)===null||_project$data36===void 0?void 0:_project$data36.id,conversations:projectConversations,setProjectConversations:setProjectConversations,onRefresh:onGetProjectConversations,permissions:permissions,projectMembers:project===null||project===void 0?void 0:(_project$data37=project.data)===null||_project$data37===void 0?void 0:_project$data37.ProjectMembers});},overlayStyle:{width:400,boxShadow:'0px 0px 10px 0px rgba(0,0,0,0.1)'},children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Sections_styles_module.chat_icon,onClick:()=>setOpenConversation(!openConversation),children:!openConversation?/*#__PURE__*/(0,jsx_runtime.jsx)(NotesIcon,{width:24,height:24}):/*#__PURE__*/(0,jsx_runtime.jsx)(x_mark/* XMarkIcon */.f,{color:"#fff"})})})})]});};/* harmony default export */ const Sections = (AllSections);
// EXTERNAL MODULE: ./src/Modules/Transactions/permissions.ts
var Transactions_permissions = __webpack_require__(735);
// EXTERNAL MODULE: ./src/Modules/Permits/permissions.ts
var Permits_permissions = __webpack_require__(31222);
;// ./src/Components/Organisms/Projects/Details/index.tsx
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{text:"Projects",isLink:true,path:"/projects?all=true"}];const ProjectDetails=()=>{const[searchParams]=(0,dist/* useSearchParams */.ok)();const permissionSlug=Object.values(Project_permissions/* ProjectPermissionsEnum */.l).map(value=>value);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readProject,deleteProject,updateProject}=permissions;const[fetchFiles,setFetchFiles]=(0,react.useState)(false);// get the slug from the url
const slug=window.location.pathname.split("/")[2];const module=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);const projectStateModule=(0,react.useMemo)(()=>new ProjectState/* ProjectStateModule */.j(),[]);// Project Details Fetch condition
const condition=(0,react.useMemo)(()=>!!slug&&readProject===true,[slug,readProject]);// Project Files Fetch condition
const projectFilesCondition=(0,react.useMemo)(()=>{return!!searchParams.get("id")&&readProject===true&&fetchFiles===true;},[readProject,fetchFiles]);// Project Details Fetch 
const{data,loading,onRefresh,error}=(0,hooks/* useConditionFetchData */.P6)({method:()=>module.getRecordBySlug(slug),condition:condition});// Project State Fetch
const{data:projectStates,onRefresh:onRefreshProjectStates,loading:loadingProjectStates}=(0,hooks/* useFetchData */.Gs)({method:projectStateModule.getPublishedRecords,initialQuery:{perPage:50}});// Project Files Fetch
const{data:projectFiles,onRefresh:onRefreshProjectFiles,loading:loadingProjectFiles,meta:projectFilesMeta}=(0,hooks/* useConditionFetchData */.P6)({method:module.getProjectResources,initialQuery:{projectId:searchParams.get("id"),perPage:12},condition:projectFilesCondition});/**Function to delete a project
   * @param {number} id id of the project to be deleted
   */const onDelete=id=>{if(deleteProject===true){module.deleteRecord(id).then(()=>{message/* default */.Ay.success("Project deleted successfully");// redirect to projects page
window.location.href="/projects?all=true";}).catch(err=>{const errorMessages=err.response.data.message||"Something went wrong!";message/* default */.Ay.error(errorMessages);});}else{message/* default */.Ay.error("You don't have permission to delete this project, Please contact your admin");}};/**Function to edit project detail 
   * @param {ProjectTypes} values updated values of the project
   * @param {number} id id of the project to be updated
  */const onEdit=(values,id)=>{if(updateProject===true){module.updateRecord(values,id).then(res=>{const{data}=res;message/* default */.Ay.success(data.message);onRefresh();}).catch(err=>{const errorMessages=err.response.data.message||"Something went wrong!";message/* default */.Ay.error(errorMessages);});}else{message/* default */.Ay.error("You don't have permission to update this project, Please contact your admin");}};const finalBreadCrumbsData=(0,react.useMemo)(()=>{if(data&&!loading){return[...breadCrumbsData,{text:data.title,isLink:false}];}return breadCrumbsData;},[data,loading]);/**
   * Note: This is a hack to fetch the data when the condition is true
   * This is because the useConditionFetchData hook will only fetch the data when the condition is true
   * and the condition is only true when the slug is not null and the user has permission to read the project
   * And since the read permission is fetched from the API, it will be undefined at first and the condition will be false
   * So we need to fetch the data again when read permission is fetched from the API and it is true so that the condition will be true
   */(0,react.useEffect)(()=>{if(condition){onRefresh();}},[condition]);// console.log("ProjectDetails", { data, loading, error });
return/*#__PURE__*/(0,jsx_runtime.jsxs)(Layout/* default */.A,{permissionSlug:[...permissionSlug,Invoice_permissions/* InvoicePermissionsEnum */.x.READ,Invoice_permissions/* InvoicePermissionsEnum */.x.CREATE,Invoice_permissions/* InvoicePermissionsEnum */.x.UPDATE,Transactions_permissions/* TransactionsPermissionsEnum */.t.READ,Transactions_permissions/* TransactionsPermissionsEnum */.t.CREATE,Transactions_permissions/* TransactionsPermissionsEnum */.t.UPDATE,Permits_permissions/* PermitsPermissionsEnum */.e.READ,Permits_permissions/* PermitsPermissionsEnum */.e.CREATE,Permits_permissions/* PermitsPermissionsEnum */.e.UPDATE],children:[/*#__PURE__*/(0,jsx_runtime.jsx)(BreadCrumbs/* default */.A,{data:finalBreadCrumbsData}),readProject===true&&data&&!loading&&/*#__PURE__*/(0,jsx_runtime.jsx)(Sections,{permissions:permissions,onDelete:onDelete,onEdit:onEdit,setFetchFiles:setFetchFiles,data:{project:{data:data,onRefresh:onRefresh,loading:loading},projectFiles:{data:projectFiles,onRefresh:onRefreshProjectFiles,loading:loadingProjectFiles,meta:projectFilesMeta},projectStates:{data:projectStates,onRefresh:onRefreshProjectStates,loading:loadingProjectStates}}}),readProject===false&&!loading&&!data&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),error==="Cannot read properties of null (reading 'id')"&&!loading&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode404 */.SI,{mainMessage:"Project not found",subMessage:"Please check the URL or contact your administrator"})]});};/* harmony default export */ const Projects_Details = (ProjectDetails);

/***/ }),

/***/ 97097:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ ClientModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class ClientModule{constructor(){this.endPoint="client";/**Get all Client records
     * @param query - query params
     */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Get Client record by id
     * @param id - Client id
     */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/**Find published client records
     * @param query - query params
     */this.findPublished=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/find-published"),{params:query});};/**Delete Client record
    * @param id - Client id
    */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/**Create new Client record
     * @param data - Client data
     */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};/**Update Client record
    * @param data - Client data
    * @param id - Client id
    */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};}}

/***/ }),

/***/ 49925:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ InvoiceModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _modules_Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class InvoiceModule{constructor(){this.endPoint="invoice";/**Get all Invoice records
     * @param query - query params
     */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Get Invoice record by id
     * @param id - Invoice id
     */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/findOne/").concat(id));};/**Create new Invoice record
     * @param data - Invoice data
     */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};/**Update Invoice record
     * @param data - Invoice data
     * @param id - Invoice id
     */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/updateOne/").concat(id),data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};/**Submit Invoice by id
     * @param id - Invoice id
     */this.submitInvoice=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/submitInvoice/").concat(id));};/**Change Invoice status
     * @param id - Invoice id
     * @param status - Invoice status
     */this.changeStatus=(id,data)=>{console.log(data);return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/changeStatus/").concat(id),data);};/**Delete Invoice record
     * @param id - Invoice id
     */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/remove/").concat(id));};/** Mark As Sent 
     * @param id - Invoice id
    */this.markAsSent=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/markAsSent/").concat(id));};/**Prepare Unique Quote Number */this.prepareUniqueInvoiceNumber=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/prepareUniqueInvoiceNumber"));};/** Check for duplicacy */this.checkForDuplicacy=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/checkForDuplicacy"),{params:query});};/** Quick Update
     * @param id - Invoice id
     * @param data - Invoice data
     * @param projectId - project id
     */this.quickUpdate=(id,data)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/quickUpdate/").concat(id),data);};/**Add note to enquiry
   * @param id - enquiry id
   * @param data - note data
   * @property `data.note` - note text
   * @property `data.isConcern` - is concern note
   */this.addNote=(id,data)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post("".concat(this.endPoint,"/addNote/").concat(id),data);};/** Get Note by id 
     * @param id - note id
    */this.getNoteById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/notes/").concat(id));};/**Remove note from enquiry
    * @param id - Note id
    */this.removeNote=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/removeNote/").concat(id));};/**Get enquiry logs
    * @param id - enquiry id
    * @param query - query params
    */this.getLogsById=(id,query)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/logs/").concat(id),{params:query});};/**Mark Concern As Resolved
     * @param id - note id
     */this.markConcernAsResolved=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/markConcernAsResolved/").concat(id));};/** Get Invoice Statuses Total Counts */this.getCounts=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/getCounts"));};}}

/***/ }),

/***/ 42361:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ OrganizationModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _modules_Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class OrganizationModule{constructor(){this.endPoint="organization";/**Get all organization records
     * @param query - query params
     */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Get all organization records
     * @param query - query params
     */this.findPublished=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint+"/find-published",{params:query});};/**Get organization record by id
     * @param id - organization id
     */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/**Delete organization record
    * @param id - organization id
    */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/**Create new organization record
     * @param data - organization data
     */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};/**Update organization record
    * @param data - organization data
    * @param id - organization id
    */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.getTenants=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("xero/getTenants");};}}

/***/ }),

/***/ 30982:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ PermitsModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _modules_Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class PermitsModule{constructor(){this.endPoint="permits";this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};}}

/***/ }),

/***/ 45732:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ ProjectStateModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class ProjectStateModule{constructor(){this.endPoint="project-state";this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};this.getPublishedRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/find-published"),{params:query});};this.getAllStates=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/find-published-states"));};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint+"/"+id);};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete(this.endPoint+"/"+id);};this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch(this.endPoint+"/"+id,data);};}}

/***/ }),

/***/ 83480:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ QuotationModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _modules_Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class QuotationModule{constructor(){this.endPoint="quotation";/** Get all quotation records
   * @param query - query params
   */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};this.fetchTasksAssignedToMe=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/tasks/assignedToMe"),{params:query});};/** Get quotation record by id
   * @param id - quotation id
   */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/findOne/").concat(id));};/** Create new quotation record
   * @param data - quotation data
   */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};/** autoCreateFromApprovedQuotation
   * @param {AutoCreateFromApprovedQuotationTypes} data - Data to be created
   */this.autoCreateFromApprovedQuotation=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post("".concat(this.endPoint,"/autoCreateProjectFromApprovedQuotation/"),data);};/** Update quotation record
   * @param data - quotation data
   * @param id - quotation id
   */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/updateOne/").concat(id),data);};/** Submit quotation by id
   * @param id - quotation id
   */this.submitQuotation=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/submitQuotation/").concat(id));};/** Change quotation status
   * @param id - quotation id
   * @param status - quotation status
   */this.changeStatus=(id,status)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/changeStatus/").concat(id),{status});};/** Delete quotation record
   * @param id - quotation id
   */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/remove/").concat(id));};/** Mark Milestone as completed
   * @param id - milestone id
   */this.completeMilestone=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/completeMilestone/").concat(id));};/** Mark As Sent 
   * @param id - quotation id
   */this.markAsSent=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/markAsSent/").concat(id));};/** Prepare Unique Quote Number */this.prepareUniqueQuoteNumber=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/prepareUniqueQuoteNumber"),{params:query});};/** Check for duplicacy */this.checkForDuplicacy=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/checkForDuplicacy"),{params:query});};/** Quick Update 
   * @param id - quotation id
   * @param data.projectId - project id
   * @param data.submissionById - submission by id
   */this.quickUpdate=(id,data)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/quickUpdate/").concat(id),data);};}async fetchPaymentTermsByProjectId(projectId){try{// Fetch data from API
const response=await this.getAllRecords({projectId});// Log the entire response and response.data to inspect the format
console.log("API Response:",response);console.log("Response Data:",response.data);// Check if response.data is an object with a specific property containing the array
if(response.data&&response.data.data&&Array.isArray(response.data.data)){const quotations=response.data.data;// Extract payment terms from each quotation and flatten the array
const paymentTerms=quotations.flatMap(q=>q.paymentTerms||[]);return paymentTerms;}else{// Handle unexpected data format
console.error("Unexpected response data format:",response);throw new Error("Unexpected response data format");}}catch(error){console.error("Error fetching payment terms:",error);throw error;// Re-throw error for further handling if necessary
}}/** Fetch overall payment status
   * @param query - query params
   */ /** Update overall payment status
   * @param status - payment status
   */}

/***/ }),

/***/ 54475:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ TransactionsModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _modules_Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class TransactionsModule{constructor(){this.endPoint="transactions";this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_modules_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.assignTransaction=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/assignTransaction/").concat(id),data);};}}

/***/ }),

/***/ 60388:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// extracted by mini-css-extract-plugin
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"opacity_6":"styles_opacity_6__5OVxm","dropdown":"styles_dropdown__A7IWQ","overlay":"styles_overlay__oAOwN","overlay_item":"styles_overlay_item__ngTcL","overlay_popConfirm":"styles_overlay_popConfirm__nIAzy","disabledButton":"styles_disabledButton__X3cYc","permitFiles":"styles_permitFiles__ELSEK","permitFiles__details":"styles_permitFiles__details__gHmpW"});

/***/ })

}]);