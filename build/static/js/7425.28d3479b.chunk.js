"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[7425],{

/***/ 44394:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ Switch)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89379);
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80045);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92759);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(25933);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9950);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(38266);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(44414);
const _excluded=["onChange","checked","recordId","allowChange"];const Switch=_ref=>{let{onChange,checked,recordId,allowChange=true}=_ref,rest=(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)(_ref,_excluded);const[buttonState,setButtonState]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({loading:false,checked:false});const onSwitchChange=checked=>{if(allowChange===true){setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{loading:true}));onChange(checked,recordId,rest).then(res=>{setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{checked:checked,loading:false}));antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.success(res.data.message);}).catch(err=>{setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{loading:false}));let serverErrors=(0,_helpers__WEBPACK_IMPORTED_MODULE_5__/* .errorHandler */ .r)(err);if(typeof serverErrors.message==="string"){antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.error(serverErrors.message);}else{antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.error("Something went wrong");}});}else{antd__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Ay.error("You don't have permission to change this record, please contact your admin.");}};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setButtonState((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)({},buttonState),{},{checked:checked}));},[checked]);return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A,{checked:buttonState.checked,onChange:onSwitchChange,loading:buttonState.loading});};

/***/ }),

/***/ 27425:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ SiteSettings_SitePages)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./src/Components/Templates/SiteSettings/index.tsx
var SiteSettings = __webpack_require__(16181);
// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 18 modules
var es_form = __webpack_require__(10678);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
// EXTERNAL MODULE: ./src/Components/Organisms/SiteSettings/Common/styles.module.scss
var styles_module = __webpack_require__(41394);
// EXTERNAL MODULE: ./src/Components/Organisms/Skeletons/index.tsx
var Skeletons = __webpack_require__(70619);
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
// EXTERNAL MODULE: ./src/Components/Atoms/ServerErrorHandler/index.tsx
var ServerErrorHandler = __webpack_require__(13321);
// EXTERNAL MODULE: ./src/helpers/error-handler.ts
var error_handler = __webpack_require__(38266);
// EXTERNAL MODULE: ./src/Modules/SitePages/index.ts
var SitePages = __webpack_require__(3907);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/SiteSettings/SitePages/modal.tsx
const SitePagesModal=props=>{var _recordData$data;const{openModal,onCancel,type,record,reloadTableData,permissions:{createSitePages,updateSitePages}}=props;const[form]=es_form/* default */.A.useForm();const module=(0,react.useMemo)(()=>new SitePages/* SitePagesModule */.M(),[]);const[recordData,setRecordData]=(0,react.useState)();const handleErrors=err=>{const error=(0,error_handler/* errorHandler */.r)(err);if(typeof error.message=="string"){setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:error.message}));}else{let errData=(0,ServerErrorHandler/* HandleServerErrors */.p)(error.message,[]);form.setFields(errData);setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));}};const handleAlertClose=()=>{setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{error:""}));};const getDataBySlug=(0,react.useCallback)(()=>{module.getRecordById(record).then(res=>{if(res.data&&res.data.data){form.setFieldsValue((0,objectSpread2/* default */.A)({},res.data.data));setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},res.data),{},{loading:false}));}}).catch(err=>{handleErrors(err);});},[form,record,module]);(0,react.useEffect)(()=>{if(type==="edit"){setRecordData({loading:true});// fetch data by slug or id
getDataBySlug();}else{form.resetFields();}},[openModal,type,form,getDataBySlug]);const handleSlugChange=_ref=>{let{target}=_ref;let slug=(0,common/* slugifyString */.Dv)(target.value);form.setFieldsValue({slug:slug});};const onFinish=formValues=>{setRecordData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},recordData),{},{buttonLoading:true}));const formData=formValues;switch(type){case"edit":{if(updateSitePages===true){module.updateRecord(formData,recordData===null||recordData===void 0?void 0:recordData.data.id).then(res=>{reloadTableData();onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}else{setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));message/* default */.Ay.error("You don't have permission to update this page");}break;}case"new":{if(createSitePages===true){module.createRecord(formData).then(res=>{reloadTableData();onCancel();setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));});}else{setRecordData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{buttonLoading:false}));message/* default */.Ay.error("You don't have permission to create a new page");}break;}}};return/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomModal */.jo,{visible:openModal,closable:true,onCancel:onCancel,titleText:type==="edit"?"Edit Page":"Add New Page",showFooter:false,children:recordData!==null&&recordData!==void 0&&recordData.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(Skeletons/* default */.A,{items:10}):/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{className:styles_module/* default */.A.form,onFinish:onFinish,form:form,children:[(recordData===null||recordData===void 0?void 0:recordData.error)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomErrorAlert */.WZ,{description:recordData===null||recordData===void 0?void 0:recordData.error,isClosable:true,onClose:handleAlertClose}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"title",rules:[{required:true,message:"Please name a section"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Title",asterisk:true,type:"text"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"slug",rules:[{required:true,message:"Please add a slug"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{onChange:handleSlugChange,size:"w100",label:"Slug",asterisk:true,type:"text"})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"description",rules:[{required:false}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Description",type:"textArea",defaultValue:recordData===null||recordData===void 0?void 0:(_recordData$data=recordData.data)===null||_recordData$data===void 0?void 0:_recordData$data.description})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"isPublished",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{label:"Published",options:[{value:true,label:"Yes"},{value:false,label:"No"}]})})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.footer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:recordData===null||recordData===void 0?void 0:recordData.buttonLoading,children:"Submit"})]})]})});};
// EXTERNAL MODULE: ./node_modules/antd/es/typography/index.js + 15 modules
var typography = __webpack_require__(30377);
// EXTERNAL MODULE: ./node_modules/antd/es/popconfirm/index.js + 1 modules
var popconfirm = __webpack_require__(56231);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js
var DeleteOutlined = __webpack_require__(78433);
// EXTERNAL MODULE: ./src/Components/Atoms/Switch/index.tsx
var Switch = __webpack_require__(44394);
// EXTERNAL MODULE: ./src/Components/Icons/index.tsx + 58 modules
var Icons = __webpack_require__(63668);
// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js
var dist = __webpack_require__(42074);
// EXTERNAL MODULE: ./src/Modules/PagesSection/permissions.ts
var PagesSection_permissions = __webpack_require__(78753);
// EXTERNAL MODULE: ./src/Modules/StaticPageSEO/permissions.ts
var StaticPageSEO_permissions = __webpack_require__(53776);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
;// ./src/Components/Organisms/SiteSettings/SitePages/table-columns.tsx
const{Paragraph}=typography/* default */.A;const ActionComponent=props=>{const{record,onEditIconClick,reloadTableData,permissions:{deleteSitePages,readStaticPageSEO}}=props;const[actionState,setActionState]=(0,react.useState)({confirmLoading:false,openPopConfirm:false});const module=(0,react.useMemo)(()=>new SitePages/* SitePagesModule */.M(),[]);const handleDelete=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:true}));if(deleteSitePages===false){message/* default */.Ay.error("You don't have permission to delete this record, please contact your admin.");setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));return;}module.deleteRecord(record.id).then(res=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false,confirmLoading:false}));reloadTableData();}).catch(err=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:false}));});};const showPopconfirm=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:true}));};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.actions,children:[readStaticPageSEO===true&&/*#__PURE__*/(0,jsx_runtime.jsx)("span",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Link */.N_,{to:"/siteSettings/static-page-seo?pageId=".concat(record.id),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* GIcon */.zW,{})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("span",{onClick:()=>onEditIconClick(record),children:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/editicon.svg",alt:""})}),/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{open:actionState.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:handleDelete,onCancel:()=>setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false})),okButtonProps:{loading:actionState.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:visible=>{if(!visible){setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));}},children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{className:styles_module/* default */.A.bg__red,onClick:showPopconfirm})})]});};function TableComponent(props){const{tableData,tableLoading,onEditIconClick,reloadTableData,onManageSectionClick}=props;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{updateSitePages,updateSitePagesSection}=permissions;const module=new SitePages/* SitePagesModule */.M();const onIsPublishedChange=(checked,recordId)=>{return module.updateRecord({isPublished:checked},recordId);};const columns=[{title:"S.No",dataIndex:"index",key:"index",render:(text,record,index)=>index+1,width:"5%"},{title:"Title",dataIndex:"title",key:"title",render:(text,record)=>{return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("h3",{className:"mb-0 font-size-normal",children:text}),/*#__PURE__*/(0,jsx_runtime.jsx)(Paragraph,{title:record.slug,ellipsis:{rows:1,expandable:false},copyable:{text:record.slug},className:"font-size-sm color-dark-sub mb-0",children:record.slug}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"mb-0 font-size-sm color-dark-sub",children:record===null||record===void 0?void 0:record.description})]});}},{title:"Sections",dataIndex:"pageSectionRelation",key:"pageSectionRelation",render:(pageSectionRelation,record)=>{if(pageSectionRelation.length===0){return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"font-size-sm color-dark-sub",children:"No Sections Added"});}else{return pageSectionRelation.map(ele=>{var _ele$pageSection;return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"font-size-sm",children:[" -> ",ele===null||ele===void 0?void 0:(_ele$pageSection=ele.pageSection)===null||_ele$pageSection===void 0?void 0:_ele$pageSection.title]});});}}},{title:"Pages Content",key:"pageContent",render:(_checked,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:updateSitePagesSection===true?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"cursor-pointer",onClick:event=>onManageSectionClick(record),children:"Manage Page Section"}):null})},{title:"Published",dataIndex:"isPublished",key:"isPublished",render:(checked,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Switch/* Switch */.d,{checked:checked,onChange:onIsPublishedChange,recordId:record.id,allowChange:updateSitePages===true})},{title:"Actions",dataIndex:"actions",key:"actions",render:(text,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(ActionComponent,{record:record,onEditIconClick:onEditIconClick,reloadTableData:reloadTableData,permissions:permissions})}];return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module/* default */.A.antdTableWrapper,children:/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{sticky:true,dataSource:tableData,columns:columns,pagination:false,scroll:{x:991},loading:tableLoading,rowKey:record=>"site-pages-".concat(record.id)})});}
// EXTERNAL MODULE: ./node_modules/antd/es/transfer/index.js + 5 modules
var transfer = __webpack_require__(97579);
// EXTERNAL MODULE: ./src/Modules/PagesSection/index.ts
var PagesSection = __webpack_require__(11193);
;// ./src/Components/Organisms/SiteSettings/SitePages/sitePagesSectionModal.tsx
const SitePagesSectionRelationModal=props=>{var _sectionData$data;const{openModal,onCancel,record,reloadTableData,pageData,permissions:{updateSitePagesSection,createSitePagesSection}}=props;const[form]=es_form/* default */.A.useForm();const module=(0,react.useMemo)(()=>new SitePages/* SitePagesModule */.M(),[]);const sectionModule=(0,react.useMemo)(()=>new PagesSection/* PagesSectionModule */.e(),[]);const[sectionData,setSectionData]=(0,react.useState)();let selectedKeys=[];if(pageData&&pageData.pageSectionRelation){var _pageData$pageSection;pageData===null||pageData===void 0?void 0:(_pageData$pageSection=pageData.pageSectionRelation)===null||_pageData$pageSection===void 0?void 0:_pageData$pageSection.map(ele=>{return selectedKeys.push(ele.pageSectionId.toString());});}const[targetKeys,setTargetKeys]=(0,react.useState)(selectedKeys);const handleErrors=err=>{const error=(0,error_handler/* errorHandler */.r)(err);if(typeof error.message=="string"){setSectionData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},sectionData),{},{error:error.message}));}else{let errData=(0,ServerErrorHandler/* HandleServerErrors */.p)(error.message,[]);form.setFields(errData);setSectionData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},sectionData),{},{error:""}));}};const handleAlertClose=()=>{setSectionData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},sectionData),{},{error:""}));};const getSectionData=(0,react.useCallback)(()=>{sectionModule.getAllRecords().then(res=>{if(res.data&&res.data.data){// form.setFieldsValue({
// 	...res.data.data,
// });
setSectionData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},res.data),{},{loading:false}));}}).catch(err=>{handleErrors(err);});},[form,record,module,sectionModule]);const filterOption=(inputValue,option)=>option.description.indexOf(inputValue.toLowerCase())>-1;const handleChange=newTargetKeys=>{setTargetKeys(newTargetKeys);};(0,react.useEffect)(()=>{setSectionData({loading:true});getSectionData();},[openModal,form]);const onFinish=formValues=>{if(updateSitePagesSection===true){setSectionData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},sectionData),{},{buttonLoading:true}));const formData=formValues;module.updateRecord(formData,record).then(res=>{reloadTableData();onCancel();setSectionData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));}).catch(err=>{handleErrors(err);setSectionData(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});let removedSections=[];selectedKeys.map(ele=>{if(!targetKeys.includes(ele)){return removedSections.push(ele);}return[];});if(removedSections.length>0){module.deleteMultiple(record,removedSections).catch(err=>{message/* default */.Ay.error(err.message);});}}else{message/* default */.Ay.error("You don't have permission to manage pages section, please contact admin.");}};return/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomModal */.jo,{visible:openModal,closable:true,onCancel:onCancel,titleText:"Manage Section",showFooter:false,children:sectionData!==null&&sectionData!==void 0&&sectionData.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(Skeletons/* default */.A,{items:10}):/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{className:styles_module/* default */.A.form,onFinish:onFinish,form:form,children:[(sectionData===null||sectionData===void 0?void 0:sectionData.error)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomErrorAlert */.WZ,{description:sectionData===null||sectionData===void 0?void 0:sectionData.error,isClosable:true,onClose:handleAlertClose}),createSitePagesSection===true&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:"mb-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"/siteSettings/pages-section",children:"Section not found? Click to add"})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"pageSectionIds",rules:[{required:false}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(transfer/* default */.A,{dataSource:sectionData===null||sectionData===void 0?void 0:(_sectionData$data=sectionData.data)===null||_sectionData$data===void 0?void 0:_sectionData$data.map((ele,index)=>{var _ele$title;return{key:ele.id.toString(),title:ele.title,description:(_ele$title=ele.title)===null||_ele$title===void 0?void 0:_ele$title.toLowerCase()};}),listStyle:{width:250,height:400},showSearch:true,filterOption:filterOption,targetKeys:targetKeys,onChange:handleChange,render:item=>item.title})})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.footer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:sectionData===null||sectionData===void 0?void 0:sectionData.buttonLoading,children:"Save"})]})]})});};
// EXTERNAL MODULE: ./src/helpers/useDebounce.ts
var useDebounce = __webpack_require__(28173);
;// ./src/Modules/SiteSettings/permissions.ts
let SitePagesPermissionsEnum=/*#__PURE__*/function(SitePagesPermissionsEnum){SitePagesPermissionsEnum["CREATE"]="createSitePages";SitePagesPermissionsEnum["UPDATE"]="updateSitePages";SitePagesPermissionsEnum["DELETE"]="deleteSitePages";SitePagesPermissionsEnum["READ"]="readSitePages";return SitePagesPermissionsEnum;}({});let SitePagesSectionPermissionsEnum=/*#__PURE__*/function(SitePagesSectionPermissionsEnum){SitePagesSectionPermissionsEnum["CREATE"]="createSitePagesSection";SitePagesSectionPermissionsEnum["UPDATE"]="updateSitePagesSection";SitePagesSectionPermissionsEnum["DELETE"]="deleteSitePagesSection";SitePagesSectionPermissionsEnum["READ"]="readSitePagesSection";return SitePagesSectionPermissionsEnum;}({});let SitePagesContentPermissionsEnum=/*#__PURE__*/function(SitePagesContentPermissionsEnum){SitePagesContentPermissionsEnum["CREATE"]="createSitePagesContent";SitePagesContentPermissionsEnum["UPDATE"]="updateSitePagesContent";SitePagesContentPermissionsEnum["DELETE"]="deleteSitePagesContent";SitePagesContentPermissionsEnum["READ"]="readSitePagesContent";return SitePagesContentPermissionsEnum;}({});
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
;// ./src/Components/Organisms/SiteSettings/SitePages/index.tsx
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:true,text:"Site Settings",path:"/siteSettings"},{isLink:false,text:"Site Pages"}];function SitePages_SitePages(){// available permissions for this module
const permissionSlug=(0,common/* getPermissionSlugs */.AH)(SitePagesPermissionsEnum);// add additional permissions for this module / page
permissionSlug.push(PagesSection_permissions/* PagesSectionPermissionsEnum */.L.UPDATE,PagesSection_permissions/* PagesSectionPermissionsEnum */.L.READ,PagesSection_permissions/* PagesSectionPermissionsEnum */.L.CREATE,StaticPageSEO_permissions/* StaticPageSEOPermissionsEnum */.i.READ);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readSitePages,createSitePages,updateSitePages,updateSitePagesSection,readSitePagesSection}=permissions;const[currentEditType,setcurrentEditType]=(0,react.useState)({editType:"new",recordId:0,openModal:false});const[editPageSection,setEditPageSection]=(0,react.useState)({recordId:0,openModal:false,recordData:{}});const module=new SitePages/* SitePagesModule */.M();const[moduleData,setModuleData]=(0,react.useState)({isLoading:false,error:{},data:[]});const[searchTerm,setSearchTerm]=(0,react.useState)("");const debouncedSearchTerm=(0,useDebounce/* useDebounce */.d)(searchTerm,500);const[searchResult,setSearchResult]=(0,react.useState)();const onSearch=event=>{const value=event.currentTarget.value;setSearchTerm(value);};// event handle  to open and close modal
const handleClick=()=>{if(createSitePages===false){message/* default */.Ay.error("You don't have permission to create new record");return;}setcurrentEditType((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{openModal:!currentEditType.openModal,editType:"new"}));};const handleCancelClick=()=>{setEditPageSection((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{openModal:!editPageSection.openModal}));};const onEditIconClick=record=>{if(updateSitePages===false){message/* default */.Ay.error("You don't have permission to update this record");return;}setcurrentEditType((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{editType:"edit",recordId:record.id,openModal:true}));};const onManageSectionClick=record=>{if(updateSitePagesSection===false){message/* default */.Ay.error("You don't have permission to manage page sections");return;}setEditPageSection((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},editPageSection),{},{recordId:record.id,recordData:record,openModal:true}));};const reloadTableData=()=>{setModuleData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},moduleData),{},{loading:true}));module.getAllRecords().then(res=>{setModuleData(res.data);}).catch(err=>{});};(0,react.useEffect)(()=>{reloadTableData();},[]);// Search functionality for the table
const assignSearchResult=(0,react.useCallback)(()=>{if(debouncedSearchTerm){const data=moduleData===null||moduleData===void 0?void 0:moduleData.data;const result=data.filter(ele=>{return ele.title.toLowerCase().includes(debouncedSearchTerm.toLowerCase());});setSearchResult(result);}else{setSearchResult(undefined);}},[debouncedSearchTerm,moduleData===null||moduleData===void 0?void 0:moduleData.data]);(0,react.useEffect)(()=>{assignSearchResult();},[assignSearchResult]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(SiteSettings["default"],{permissionSlug:permissionSlug,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* PageHeader */.zY,{heading:"Site Pages",buttonText:"Add new page",onButtonClick:handleClick,breadCrumbData:breadCrumbsData,showAdd:createSitePages===true?true:false,filters:readSitePages===true?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{placeHolder:"Search...",icon:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"}),size:"w100",className:"py-1",value:searchTerm,onChange:onSearch})})}):null,children:readSitePagesSection===true&&/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"/siteSettings/pages-section",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{children:"Manage Sections"})})}),readSitePages===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(TableComponent,{tableData:searchResult||moduleData.data,tableLoading:moduleData.loading,onEditIconClick:onEditIconClick,onManageSectionClick:onManageSectionClick,reloadTableData:reloadTableData}),readSitePages===false&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),currentEditType.openModal&&/*#__PURE__*/(0,jsx_runtime.jsx)(SitePagesModal,{record:currentEditType.recordId,type:currentEditType.editType,reloadTableData:reloadTableData,onCancel:handleClick,openModal:currentEditType.openModal,permissions:permissions}),editPageSection.openModal&&/*#__PURE__*/(0,jsx_runtime.jsx)(SitePagesSectionRelationModal,{record:editPageSection.recordId,pageData:editPageSection.recordData,type:"edit",reloadTableData:reloadTableData,onCancel:handleCancelClick,openModal:editPageSection.openModal,permissions:permissions})]});}/* harmony default export */ const SiteSettings_SitePages = (SitePages_SitePages);

/***/ }),

/***/ 11193:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ PagesSectionModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class PagesSectionModule{constructor(){this.endPoint="site-pages-section";this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint+"/",data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.getAllRecords=queryData=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:queryData});};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id,"?all=true"));};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.allowMultiples=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/allowMultiples/").concat(id));};this.disallowMultiples=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/disallowMultiples/").concat(id));};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};}}

/***/ }),

/***/ 78753:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ PagesSectionPermissionsEnum)
/* harmony export */ });
let PagesSectionPermissionsEnum=/*#__PURE__*/function(PagesSectionPermissionsEnum){PagesSectionPermissionsEnum["CREATE"]="createSitePagesSection";PagesSectionPermissionsEnum["UPDATE"]="updateSitePagesSection";PagesSectionPermissionsEnum["DELETE"]="deleteSitePagesSection";PagesSectionPermissionsEnum["READ"]="readSitePagesSection";return PagesSectionPermissionsEnum;}({});

/***/ }),

/***/ 3907:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   M: () => (/* binding */ SitePagesModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class SitePagesModule{constructor(){this.endPoint="site-pages";this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint+"/",data);};this.getAllRecords=queryData=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:queryData});};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id,"?all=true"));};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.allowMultiples=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/allowMultiples/").concat(id));};this.disallowMultiples=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/disallowMultiples/").concat(id));};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};this.deleteMultiple=(pageId,sectionIds)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/removeMultipleSectionFromPage"),{params:{pageId:pageId,sectionIds:sectionIds}});};}}

/***/ }),

/***/ 53776:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ StaticPageSEOPermissionsEnum)
/* harmony export */ });
let StaticPageSEOPermissionsEnum=/*#__PURE__*/function(StaticPageSEOPermissionsEnum){StaticPageSEOPermissionsEnum["CREATE"]="createStaticPageSEO";StaticPageSEOPermissionsEnum["UPDATE"]="updateStaticPageSEO";StaticPageSEOPermissionsEnum["DELETE"]="deleteStaticPageSEO";StaticPageSEOPermissionsEnum["READ"]="readStaticPageSEO";return StaticPageSEOPermissionsEnum;}({});

/***/ })

}]);