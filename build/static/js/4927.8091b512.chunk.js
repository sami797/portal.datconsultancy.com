"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[4927],{

/***/ 44927:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ SiteSettings_SystemModules)
});

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./src/services/axiosInstance.ts
var axiosInstance = __webpack_require__(83365);
// EXTERNAL MODULE: ./src/Redux/Reducers/SystemModulesReducer/types.ts
var types = __webpack_require__(17012);
// EXTERNAL MODULE: ./src/helpers/error-handler.ts
var error_handler = __webpack_require__(38266);
;// ./src/Redux/Reducers/SystemModulesReducer/action.ts
/** Get System Module(s) */const getSystemModulesData=id=>async(dispatch,getState)=>{const{systemModulesData,singleSystemModuleData}=getState()["systemModulesReducer"];const currentData=id?singleSystemModuleData:systemModulesData;const CURRENT_TYPE=id?types/* GET_SINGLE_SYSTEM_MODULES_DATA */.VD:types/* SET_SYSTEM_MODULES_DATA */.qU;const url=id?"system-modules/".concat(id):"system-modules";dispatch({type:CURRENT_TYPE,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentData),{},{loading:true})});try{await axiosInstance/* default */.A.get(url).then(res=>{var _res$data;dispatch({type:CURRENT_TYPE,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentData),{},{loading:false,data:res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data})});}).catch(error=>{const errorData=(0,error_handler/* errorHandler */.r)(error);dispatch({type:CURRENT_TYPE,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentData),{},{loading:false,error:true,errorData})});});}catch(error){dispatch({type:CURRENT_TYPE,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentData),{},{loading:false,errorData:error})});}};/** Add System Module */const addSystemModuleDataAction=(data,callback)=>async(dispatch,getState)=>{const{addSystemModuleData}=getState()["systemModulesReducer"];dispatch({type:types/* ADD_SYSTEM_MODULES_DATA */.$0,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},addSystemModuleData),{},{loading:true})});try{await axiosInstance/* default */.A.post("system-modules",data,{headers:{"Content-Type":"multipart/form-data"}}).then(res=>{var _res$data2;dispatch({type:types/* ADD_SYSTEM_MODULES_DATA */.$0,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},addSystemModuleData),{},{loading:false,data:res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data})});callback&&callback();}).catch(error=>{let errorData=(0,error_handler/* errorHandler */.r)(error);dispatch({type:types/* ADD_SYSTEM_MODULES_DATA */.$0,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},addSystemModuleData),{},{loading:false,errorData})});// clear the error message after 5 seconds
setTimeout(()=>{dispatch({type:types/* ADD_SYSTEM_MODULES_DATA */.$0,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},addSystemModuleData),{},{loading:false,errorData:{}})});},5000);});}catch(error){dispatch({type:types/* ADD_SYSTEM_MODULES_DATA */.$0,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},addSystemModuleData),{},{loading:false,errorData:error})});}};/** Edit System Module */const editSystemModuleDataAction=(data,item,callback)=>async(dispatch,getState)=>{const{editSystemModuleData}=getState()["systemModulesReducer"];dispatch({type:types/* EDIT_SYSTEM_MODULES_DATA */.O$,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},editSystemModuleData),{},{loading:true})});try{await axiosInstance/* default */.A.patch("system-modules/".concat(item===null||item===void 0?void 0:item.id),data,{headers:{"Content-Type":"multipart/form-data"}}).then(res=>{var _res$data3;dispatch({type:types/* EDIT_SYSTEM_MODULES_DATA */.O$,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},editSystemModuleData),{},{loading:false,data:res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data})});callback&&callback();}).catch(error=>{const errorData=(0,error_handler/* errorHandler */.r)(error);dispatch({type:types/* EDIT_SYSTEM_MODULES_DATA */.O$,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},editSystemModuleData),{},{loading:false,errorData})});});}catch(error){dispatch({type:types/* EDIT_SYSTEM_MODULES_DATA */.O$,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},editSystemModuleData),{},{loading:false,errorData:error})});}};/** Delete System Module */const deleteSystemModule=(id,callback)=>async(dispatch,getState)=>{const{deleteSystemModuleData}=getState()["systemModulesReducer"];dispatch({type:types/* DELETE_SYSTEM_MODULES_DATA */.f9,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},deleteSystemModuleData),{},{loading:true})});try{await axiosInstance/* default */.A.delete("system-modules/".concat(id)).then(res=>{var _res$data4;dispatch({type:types/* DELETE_SYSTEM_MODULES_DATA */.f9,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},deleteSystemModuleData),{},{loading:false,data:res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.data})});callback&&callback();}).catch(error=>{const errorData=(0,error_handler/* errorHandler */.r)(error);dispatch({type:types/* DELETE_SYSTEM_MODULES_DATA */.f9,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},deleteSystemModuleData),{},{loading:false,errorData})});});}catch(error){dispatch({type:types/* DELETE_SYSTEM_MODULES_DATA */.f9,payload:(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},deleteSystemModuleData),{},{loading:false,errorData:error})});}};
// EXTERNAL MODULE: ./src/Components/Templates/SiteSettings/index.tsx
var SiteSettings = __webpack_require__(16181);
// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 18 modules
var es_form = __webpack_require__(10678);
// EXTERNAL MODULE: ./node_modules/antd/es/upload/index.js + 19 modules
var upload = __webpack_require__(28013);
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
;// ./src/Components/Organisms/SiteSettings/SystemModules/styles.module.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const styles_module = ({"actions":"styles_actions__fRHwk","bg__red":"styles_bg__red__Y3p8c","form":"styles_form__W9gFv","addLanguagesWrap":"styles_addLanguagesWrap__09kIn","addLanguages":"styles_addLanguages__9jbIL","footer":"styles_footer__8iTsR"});
// EXTERNAL MODULE: ./src/Components/Organisms/Skeletons/index.tsx
var Skeletons = __webpack_require__(70619);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/SiteSettings/SystemModules/modal.tsx
// import { errorHandler } from "../../../../helpers";
const SystemModulesModal=props=>{const{openModal,onCancel,onFinish,buttonLoading,initialValues,type}=props;const dispatch=(0,es/* useDispatch */.wA)();const[form]=es_form/* default */.A.useForm();const uploadProps={name:"file",listType:"picture",multiple:false,beforeUpload:()=>false,maxCount:1};const{addSystemModuleData,singleSystemModuleData,editSystemModuleData}=(0,es/* useSelector */.d4)(state=>state.systemModulesReducer);const errorData=type==="new"?addSystemModuleData.errorData:editSystemModuleData.errorData;(0,react.useEffect)(()=>{if(type==="edit"){var _singleSystemModuleDa;form.setFieldsValue((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},singleSystemModuleData.data),{},{isMenuItem:(_singleSystemModuleDa=singleSystemModuleData.data)===null||_singleSystemModuleDa===void 0?void 0:_singleSystemModuleDa.isMenuItem}));}else{form.resetFields();}},[type,form,singleSystemModuleData]);(0,react.useEffect)(()=>{if(type==="edit"){dispatch(getSystemModulesData(initialValues.id));}},[dispatch,initialValues.id,type]);return/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomModal */.jo,{visible:openModal,onCancel:onCancel,titleText:type==="edit"?"Edit System Module":"Add System Module",showFooter:false,children:singleSystemModuleData.loading?/*#__PURE__*/(0,jsx_runtime.jsx)(Skeletons/* default */.A,{items:4}):/*#__PURE__*/(0,jsx_runtime.jsxs)(es_form/* default */.A,{className:styles_module.form,onFinish:onFinish,form:form,children:[errorData!==null&&errorData!==void 0&&errorData.statusCode?/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomErrorAlert */.WZ,{description:errorData===null||errorData===void 0?void 0:errorData.message,isClosable:true}):null,/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"name",rules:[{required:true,message:"Please add system module name"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Name",asterisk:true,type:"text"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"slug",rules:[{required:true,message:"Please add a slug"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Slug",asterisk:true,type:"text"})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"url",rules:[{required:false,message:"Please add a url"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"URL",type:"text"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"order",rules:[{required:true,message:"Please add order"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Order",asterisk:true,type:"number"})})]}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"description",rules:[{required:false,message:"Please add a description"}],children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{size:"w100",label:"Description",type:"text"})}),/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"isMenuItem",children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{label:"Menu Item",options:[{value:true,label:"Yes"},{value:false,label:"No"}]})})]}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(es_form/* default */.A.Item,{name:"icon",children:/*#__PURE__*/(0,jsx_runtime.jsxs)(upload/* default */.A.Dragger,(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},uploadProps),{},{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"ant-upload-drag-icon",children:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/picture.svg",alt:""})}),/*#__PURE__*/(0,jsx_runtime.jsx)("p",{className:"ant-upload-hint",children:"Drag image here or click to upload"})]}))})}),/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module.footer,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomButton */.Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:buttonLoading,children:"Submit"})]})]})});};
// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js
var dist = __webpack_require__(42074);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./node_modules/antd/es/popconfirm/index.js + 1 modules
var popconfirm = __webpack_require__(56231);
// EXTERNAL MODULE: ./node_modules/antd/es/image/index.js + 13 modules
var es_image = __webpack_require__(9206);
// EXTERNAL MODULE: ./node_modules/antd/es/switch/index.js + 1 modules
var es_switch = __webpack_require__(25933);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js
var DeleteOutlined = __webpack_require__(78433);
// EXTERNAL MODULE: ./src/Components/Atoms/Headings/index.tsx
var Headings = __webpack_require__(35751);
// EXTERNAL MODULE: ./src/Components/Organisms/SiteSettings/Common/styles.module.scss
var Common_styles_module = __webpack_require__(41394);
// EXTERNAL MODULE: ./src/helpers/constants.ts
var constants = __webpack_require__(65944);
// EXTERNAL MODULE: ./src/Modules/SystemModules/index.ts
var SystemModules = __webpack_require__(40652);
// EXTERNAL MODULE: ./src/Modules/SystemModules/types.ts
var SystemModules_types = __webpack_require__(32957);
;// ./src/Components/Organisms/SiteSettings/SystemModules/table-columns.tsx
const ActionComponent=props=>{const{record,openModal,permissions:{deleteSystemModules:deleteSystemModulePermission}}=props;const dispatch=(0,es/* useDispatch */.wA)();const onDelete=(0,react.useCallback)(id=>{if(deleteSystemModulePermission===true){dispatch(deleteSystemModule(id,()=>dispatch(getSystemModulesData())));}else{message/* default */.Ay.error("You don't have permission to delete this record, please contact your admin.");}},[dispatch]);return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:Common_styles_module/* default */.A.actions,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{onClick:()=>openModal(record),children:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/editicon.svg",alt:""})}),/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{placement:"top",title:"Are you sure?",onConfirm:()=>onDelete(record.id),okText:"Yes",cancelText:"No",children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{className:Common_styles_module/* default */.A.bg__red})})]});};function TableComponent(props){const{tableData,tableLoading,openModal}=props;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{updateSystemModules,readPermissions}=permissions;const dispatch=(0,es/* useDispatch */.wA)();const systemModule=(0,react.useMemo)(()=>new SystemModules/* SystemModulesModule */.d(),[]);const{editSystemModuleData}=(0,es/* useSelector */.d4)(state=>state.systemModulesReducer);const onIsMenuItemChange=(checked,record)=>{if(updateSystemModules===true){dispatch(editSystemModuleDataAction({isMenuItem:checked?true:false},record,()=>{dispatch(getSystemModulesData());}));}else{message/* default */.Ay.error("You don't have permission to update this record, please contact your admin.");}};const onVisibiltyChange=async(value,id)=>{if(updateSystemModules===true){const formData=new FormData();formData.append("visibility",value);await systemModule.updateRecord(formData,id).then(()=>{message/* default */.Ay.success("Visibility updated successfully");}).catch(err=>{var _err$response,_err$response$data;message/* default */.Ay.error((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message);});}else{message/* default */.Ay.error("You don't have permission to update this record, please contact your admin.");}};const columns=[{title:"S.No",dataIndex:"index",key:"index",render:(text,record,index)=>index+1,width:"60px"},{title:"Icon",dataIndex:"icon",key:"icon",width:"80px",render:text=>text?/*#__PURE__*/(0,jsx_runtime.jsx)(es_image/* default */.A,{width:20,height:20,src:"".concat(constants/* RESOURCE_BASE_URL */.to).concat(text),preview:false,rootClassName:"object-fit-contain"}):/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})},{title:"Name",dataIndex:"name",key:"name",render:(text,record)=>/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",weight:"bold",children:text}),/*#__PURE__*/(0,jsx_runtime.jsxs)("p",{className:"color-light-800 font-size-sm",children:[record.slug,record.url?/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Link */.N_,{to:"".concat(record.url),className:"ml-2",children:/*#__PURE__*/(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",height:"15px",width:"15px",children:/*#__PURE__*/(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})}):""]})]})},{title:"Description",dataIndex:"description",key:"description",render:text=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-sub",size:"sm",children:text})},{title:"Permissions",dataIndex:"Permissions",key:"Permissions",render:Permissions=>/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("ul",{className:"pa-0 ma-0",children:Permissions===null||Permissions===void 0?void 0:Permissions.map(ele=>/*#__PURE__*/(0,jsx_runtime.jsx)("li",{className:"pa-0 ma-0 font-size-xs",children:ele.name}))})})},{title:"Manage Permission",key:"managePermission",render:(checked,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:readPermissions===true?/*#__PURE__*/(0,jsx_runtime.jsx)("a",{href:"/siteSettings/system-modules/permission?moduleId=".concat(record.id),target:"_blank",rel:"noreferrer",children:"Manage Permissions"}):null})},{title:"Visibility",key:"visibility",render:(visibility,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomSelect */.Ae,{options:Object.entries(SystemModules_types/* SystemModuleVisibility */.m).map(_ref=>{let[key,value]=_ref;return{label:key,value:value};}),defaultValue:record.visibility,onChange:value=>onVisibiltyChange(value,record.id),disabled:updateSystemModules===false})})},{title:"Menu Item",dataIndex:"isMenuItem",width:"100px",key:"isMenuItem",render:(text,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(es_switch/* default */.A,{checked:text,onChange:checked=>onIsMenuItemChange(checked,record),loading:editSystemModuleData.loading})},{title:"Actions",dataIndex:"actions",key:"actions",width:"140px",render:(text,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(ActionComponent,{record:record,openModal:openModal,permissions:permissions})}];return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:Common_styles_module/* default */.A.antdTableWrapper,children:/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{sticky:true,dataSource:tableData,columns:columns,pagination:false,scroll:{x:991},loading:tableLoading,rowKey:record=>"system-module-".concat(record.id)})});}
// EXTERNAL MODULE: ./src/helpers/useDebounce.ts
var useDebounce = __webpack_require__(28173);
;// ./src/Modules/SystemModules/permissions.ts
let SystemModulesPermissionsEnum=/*#__PURE__*/function(SystemModulesPermissionsEnum){SystemModulesPermissionsEnum["CREATE"]="createSystemModules";SystemModulesPermissionsEnum["UPDATE"]="updateSystemModules";SystemModulesPermissionsEnum["DELETE"]="deleteSystemModules";SystemModulesPermissionsEnum["READ"]="readSystemModules";return SystemModulesPermissionsEnum;}({});
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
// EXTERNAL MODULE: ./src/Modules/Permissions/permissions.ts
var Permissions_permissions = __webpack_require__(12002);
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
;// ./src/Components/Organisms/SiteSettings/SystemModules/index.tsx
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:true,text:"Site Settings",path:"/siteSettings"},{isLink:false,text:"System Modules"}];function SystemModulesSettings(){// available permissions for this module
const permissionSlug=(0,common/* getPermissionSlugs */.AH)(SystemModulesPermissionsEnum);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readSystemModules,createSystemModules,updateSystemModules}=permissions;const dispatch=(0,es/* useDispatch */.wA)();const[openModal,setOpenModal]=(0,react.useState)(false);const[currentEditType,setcurrentEditType]=(0,react.useState)("new");const[searchTerm,setSearchTerm]=(0,react.useState)("");const debouncedSearchTerm=(0,useDebounce/* useDebounce */.d)(searchTerm,500);/** default selected values for editing the data */const defaultEditData=(0,react.useMemo)(()=>({id:0,name:"",slug:"",icon:"",isMenuItem:true,order:0,url:"",description:"",visibility:SystemModules_types/* SystemModuleVisibility */.m.Organization}),[]);const[selectedSystemModule,setSelectedSystemModule]=(0,react.useState)(defaultEditData);const{systemModulesData,addSystemModuleData,editSystemModuleData}=(0,es/* useSelector */.d4)(state=>state.systemModulesReducer);const[searchResult,setSearchResult]=(0,react.useState)();(0,react.useEffect)(()=>{dispatch(getSystemModulesData());},[dispatch]);const onCancelClick=(0,react.useCallback)(()=>{if(createSystemModules===false){message/* default */.Ay.error("You don't have permission to create new record");return;}setcurrentEditType("new");setOpenModal(!openModal);setSelectedSystemModule(defaultEditData);},[openModal,defaultEditData]);const onEditIconClick=(0,react.useCallback)(record=>{if(updateSystemModules===false){message/* default */.Ay.error("You don't have permission to update this record");return;}setSelectedSystemModule(record);setcurrentEditType("edit");setOpenModal(!openModal);},[openModal]);const onFinish=(0,react.useCallback)(obj=>{const _formData=new FormData();const excludeFields=["icon"];Object.entries(obj).forEach(ele=>{if(!excludeFields.includes(ele[0])){_formData.append(ele[0],ele[1]);}});if(obj["icon"]&&typeof obj["icon"]!=="string"){_formData.append("icon",obj["icon"]["fileList"][0]["originFileObj"]);}switch(currentEditType){case"new":{if(createSystemModules===true){dispatch(addSystemModuleDataAction(_formData,()=>{dispatch(getSystemModulesData());onCancelClick();}));}else{message/* default */.Ay.error("You don't have permission to create new system module");}break;}case"edit":{if(updateSystemModules===true){dispatch(editSystemModuleDataAction(_formData,selectedSystemModule,()=>{dispatch(getSystemModulesData());onCancelClick();}));}else{message/* default */.Ay.error("You don't have permission to update this system module");}break;}}},[currentEditType,dispatch,onCancelClick,selectedSystemModule]);const onSearch=event=>{const value=event.currentTarget.value;setSearchTerm(value);};// Search functionality for the table
const assignSearchResult=(0,react.useCallback)(()=>{if(debouncedSearchTerm){const data=systemModulesData.data;const result=data.filter(ele=>{return ele.name.toLowerCase().includes(debouncedSearchTerm.toLowerCase());});setSearchResult(result);}else{setSearchResult(undefined);}},[debouncedSearchTerm,systemModulesData===null||systemModulesData===void 0?void 0:systemModulesData.data]);(0,react.useEffect)(()=>{assignSearchResult();},[assignSearchResult]);return/*#__PURE__*/(0,jsx_runtime.jsxs)(SiteSettings["default"],{permissionSlug:[...permissionSlug,Permissions_permissions/* PermissionPermissionsEnum */.F.READ],children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* PageHeader */.zY,{heading:"System Modules",buttonText:"Add New Module",onButtonClick:onCancelClick,breadCrumbData:breadCrumbsData,showAdd:createSystemModules===true?true:false,filters:readSystemModules===true?/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{placeHolder:"Search...",icon:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/searchIcon.svg",alt:"Search Icon"}),size:"w100",className:"py-1",value:searchTerm,onChange:onSearch})})}):null}),readSystemModules===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(TableComponent,{tableData:searchResult||systemModulesData.data,tableLoading:systemModulesData.loading,openModal:onEditIconClick}),readSystemModules===false&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),/*#__PURE__*/(0,jsx_runtime.jsx)(SystemModulesModal,{initialValues:selectedSystemModule,type:currentEditType,onFinish:onFinish,onCancel:onCancelClick,openModal:openModal,buttonLoading:addSystemModuleData.loading||editSystemModuleData.loading})]});}/* harmony default export */ const SiteSettings_SystemModules = (SystemModulesSettings);

/***/ }),

/***/ 12002:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ PermissionPermissionsEnum)
/* harmony export */ });
let PermissionPermissionsEnum=/*#__PURE__*/function(PermissionPermissionsEnum){PermissionPermissionsEnum["CREATE"]="createPermissions";PermissionPermissionsEnum["UPDATE"]="updatePermissions";PermissionPermissionsEnum["DELETE"]="deletePermissions";PermissionPermissionsEnum["READ"]="readPermissions";PermissionPermissionsEnum["GRANT"]="grantPrivilegesToRole";PermissionPermissionsEnum["REVOKE"]="revokePrivilegesFromRole";PermissionPermissionsEnum["READ_ROLE_PERMISSIONS"]="readRolePermissions";PermissionPermissionsEnum["VIEW_PERMISSIONS_LIST"]="viewPermissonsList";return PermissionPermissionsEnum;}({});

/***/ }),

/***/ 40652:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ SystemModulesModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class SystemModulesModule{constructor(){this.endPoint="system-modules";this.getAllRecords=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint);};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint+"/",data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};}}

/***/ }),

/***/ 32957:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ SystemModuleVisibility)
/* harmony export */ });
let SystemModuleVisibility=/*#__PURE__*/function(SystemModuleVisibility){SystemModuleVisibility["Organization"]="organization";SystemModuleVisibility["System"]="system";return SystemModuleVisibility;}({});

/***/ })

}]);