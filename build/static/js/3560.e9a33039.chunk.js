"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[3560],{

/***/ 13560:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ Dashboard_Clients)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./src/Components/Organisms/Dashboard/Clients/modal.tsx
var modal = __webpack_require__(38505);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
// EXTERNAL MODULE: ./src/Components/Atoms/Headings/index.tsx
var Headings = __webpack_require__(35751);
// EXTERNAL MODULE: ./src/Components/Organisms/Common/styles.module.scss
var styles_module = __webpack_require__(96019);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./node_modules/antd/es/popconfirm/index.js + 1 modules
var popconfirm = __webpack_require__(56231);
// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js
var DeleteOutlined = __webpack_require__(78433);
// EXTERNAL MODULE: ./src/Modules/Client/index.ts
var Client = __webpack_require__(97097);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/Dashboard/Clients/actions.tsx
const ActionComponent=props=>{const{record,onEditIconClick,reloadTableData,permissions:{deleteClient}}=props;const[actionState,setActionState]=(0,react.useState)({confirmLoading:false,openPopConfirm:false});const module=(0,react.useMemo)(()=>new Client/* ClientModule */.u(),[]);const handleDelete=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:true}));if(deleteClient===false){message/* default */.Ay.error("You don't have permission to delete this record, please contact your admin.");setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));return;}module.deleteRecord(record.id).then(res=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false,confirmLoading:false}));reloadTableData();}).catch(err=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{confirmLoading:false}));});};const showPopconfirm=()=>{setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:true}));};return/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:styles_module/* default */.A.actions,children:[/*#__PURE__*/(0,jsx_runtime.jsx)("span",{onClick:()=>onEditIconClick(record),children:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{src:"/images/editicon.svg",alt:""})}),/*#__PURE__*/(0,jsx_runtime.jsx)(popconfirm/* default */.A,{open:actionState.openPopConfirm,placement:"top",title:"Are you sure?",onConfirm:handleDelete,onCancel:()=>setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false})),okButtonProps:{loading:actionState.confirmLoading},okText:"Yes",cancelText:"No",onOpenChange:visible=>{if(!visible){setActionState((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},actionState),{},{openPopConfirm:false}));}},children:/*#__PURE__*/(0,jsx_runtime.jsx)(DeleteOutlined/* default */.A,{className:styles_module/* default */.A.bg__red,onClick:showPopconfirm})})]});};/* harmony default export */ const actions = (ActionComponent);
// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js
var dist = __webpack_require__(42074);
;// ./src/Components/Organisms/Dashboard/Clients/table-columns.tsx
function TableComponent(props){const{tableData,tableLoading,onEditIconClick,reloadTableData,meta,filters}=props;const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const columns=[{title:"S.No",dataIndex:"index",key:"index",render:(_text,_record,index)=>index+1,width:"5%"},{title:"Name",dataIndex:"name",key:"name",render:(name,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(dist/* Link */.N_,{to:"/clients/".concat(record===null||record===void 0?void 0:record.uuid,"?id=").concat(record===null||record===void 0?void 0:record.id),children:/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",children:name})})},{title:"Phone",dataIndex:"phone",key:"phone",render:(phone,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",children:!["0","undefined",null].includes(phone)?record.phoneCode+phone:"-"})},{title:"Email",dataIndex:"email",key:"email",render:email=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:"dark-main",size:"sm",children:email})},{title:"Status",dataIndex:"isActive",key:"status",render:isActive=>/*#__PURE__*/(0,jsx_runtime.jsx)(Headings/* default */.A,{color:isActive?"active":"red-yp",size:"sm",children:isActive?"Inactive":"Active"})},{title:"Actions",dataIndex:"actions",key:"actions",render:(_actions,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(actions,{record:record,onEditIconClick:onEditIconClick,reloadTableData:reloadTableData,permissions:permissions})}];return/*#__PURE__*/(0,jsx_runtime.jsx)("div",{className:styles_module/* default */.A.antdTableWrapper,children:/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{sticky:true,dataSource:tableData,columns:columns,scroll:{x:991},loading:tableLoading,rowKey:record=>"client-".concat(record.id),pagination:{current:meta===null||meta===void 0?void 0:meta.page,total:meta===null||meta===void 0?void 0:meta.total,hideOnSinglePage:true,pageSize:meta===null||meta===void 0?void 0:meta.perPage,onChange(page,pageSize){reloadTableData((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{page:page,perPage:pageSize}));}}})});}
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
// EXTERNAL MODULE: ./node_modules/antd/es/input/index.js + 5 modules
var input = __webpack_require__(16330);
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
// EXTERNAL MODULE: ./src/Modules/Client/permissions.ts
var Client_permissions = __webpack_require__(4209);
// EXTERNAL MODULE: ./src/Components/Templates/Layout/index.tsx + 28 modules
var Layout = __webpack_require__(81168);
// EXTERNAL MODULE: ./src/helpers/commonEnums.ts
var commonEnums = __webpack_require__(2360);
// EXTERNAL MODULE: ./src/hooks/index.ts + 5 modules
var hooks = __webpack_require__(91970);
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
// EXTERNAL MODULE: ./src/helpers/useDebounce.ts
var useDebounce = __webpack_require__(28173);
;// ./src/Components/Organisms/Dashboard/Clients/index.tsx
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:false,text:"Clients"}];function Clients(){// available permissions for this module
const permissionSlug=(0,common/* getPermissionSlugs */.AH)(Client_permissions/* ClientPermissionsEnum */.j);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readClient,createClient,updateClient}=permissions;const[filters,setFilters]=(0,react.useState)({name:undefined,type:undefined,email:undefined,phone:undefined,page:1,perPage:10});const debouncedName=(0,useDebounce/* useDebounce */.d)(filters.name,500);(0,react.useEffect)(()=>{onRefresh(filters);},[debouncedName]);const[currentEditType,setcurrentEditType]=(0,react.useState)({editType:"new",recordId:0,openModal:false});const module=new Client/* ClientModule */.u();const{data,onRefresh,setData,loading,meta}=(0,hooks/* useFetchData */.Gs)({method:module.getAllRecords,initialQuery:(0,objectSpread2/* default */.A)({},filters)});const onCancelClick=()=>{if(createClient===false){message/* default */.Ay.error("You don't have permission to create new record");return;}setcurrentEditType((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{openModal:!currentEditType.openModal,editType:"new"}));};const onEditIconClick=record=>{if(updateClient===false){message/* default */.Ay.error("You don't have permission to update this record");return;}setcurrentEditType((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},currentEditType),{},{editType:"edit",recordId:record.id,openModal:true}));};return/*#__PURE__*/(0,jsx_runtime.jsxs)(Layout/* default */.A,{permissionSlug:permissionSlug,children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* PageHeader */.zY,{heading:"Clients",buttonText:"Add Client",onButtonClick:onCancelClick,breadCrumbData:breadCrumbsData,showAdd:createClient===true?true:false,filters:/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(input/* default */.A,{type:"input",placeholder:"Name",name:"name",onChange:event=>{const _temp=(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{name:event.target.value});setFilters(_temp);},value:filters.name,allowClear:true,style:{border:'1.5px solid var(--color-border)',borderRadius:'0.25rem'},prefix:/*#__PURE__*/(0,jsx_runtime.jsx)("img",{style:{padding:'0rem 0.5rem'},src:"/images/searchIcon.svg",alt:""})})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"email",label:"Email",name:"email",withSearch:false,onChange:event=>{const _temp=(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{email:event.target.value});setFilters(_temp);},value:filters.email,onReset:()=>{const _temp=(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{email:undefined});setFilters(_temp);onRefresh(_temp);},onUpdate:()=>onRefresh(filters)})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"input",label:"Phone",name:"phone",withSearch:false,onChange:event=>{const _temp=(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{phone:event.target.value});setFilters(_temp);},value:filters.phone,onReset:()=>{const _temp=(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{phone:undefined});setFilters(_temp);onRefresh(_temp);},onUpdate:()=>onRefresh(filters)})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Type",name:"type",withSearch:false,options:Object.entries(commonEnums/* ClientsType */.nq).map(_ref=>{let[key,value]=_ref;return{label:(0,common/* capitalize */.ZH)(key),value:value};}),onChange:event=>{const _temp=(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{type:event.target.value});setFilters(_temp);},value:filters.type,onReset:()=>{const _temp=(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},filters),{},{type:undefined});setFilters(_temp);onRefresh(_temp);},onUpdate:()=>onRefresh(filters)})})]})}),readClient===true&&/*#__PURE__*/(0,jsx_runtime.jsx)(TableComponent,{tableData:data,tableLoading:loading,onEditIconClick:onEditIconClick,reloadTableData:onRefresh,meta:meta,filters:filters}),readClient===false&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),currentEditType.openModal&&/*#__PURE__*/(0,jsx_runtime.jsx)(modal/* ClientModal */.V,{record:currentEditType.recordId,type:currentEditType.editType,reloadTableData:()=>onRefresh(),onCancel:onCancelClick,openModal:currentEditType.openModal,permissions:permissions})]});}/* harmony default export */ const Dashboard_Clients = (Clients);

/***/ }),

/***/ 38505:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ ClientModal)
/* harmony export */ });
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(80045);
/* harmony import */ var C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(89379);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(97554);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(10678);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92759);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(17811);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(40202);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(90247);
/* harmony import */ var _Atoms__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9394);
/* harmony import */ var _Common_styles_module_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96019);
/* harmony import */ var _Skeletons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(70619);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9950);
/* harmony import */ var _helpers_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(88132);
/* harmony import */ var _Atoms_ServerErrorHandler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13321);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(38266);
/* harmony import */ var _Modules_Client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97097);
/* harmony import */ var _modules_Country__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(83584);
/* harmony import */ var _helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(28173);
/* harmony import */ var _helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(2360);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(44414);
const _excluded=["phoneCode","phone","status"];const{Option}=antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A;const ClientModal=props=>{var _recordData$data;const{openModal,onCancel,type,record,reloadTableData,permissions:{createClient,updateClient},callback}=props;const[form]=antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.useForm();const module=new _Modules_Client__WEBPACK_IMPORTED_MODULE_6__/* .ClientModule */ .u();const countryModule=(0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(()=>new _modules_Country__WEBPACK_IMPORTED_MODULE_7__/* .CountryModule */ .j(),[]);const[recordData,setRecordData]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();const[clientType,setClientType]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();const[searchTermClient,setSearchTermClient]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)("");const debouncedSearchTermClient=(0,_helpers_useDebounce__WEBPACK_IMPORTED_MODULE_8__/* .useDebounce */ .d)(searchTermClient,500);const[clients,setClients]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);const onClientSearch=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{if(debouncedSearchTermClient){module.findPublished({name:debouncedSearchTermClient,type:1}).then(res=>{setClients(prev=>{var _res$data,_res$data$data;// if the data is already present in the state, then don't add it again
const filteredData=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$data=_res$data.data)===null||_res$data$data===void 0?void 0:_res$data$data.filter(item=>{return!(prev!==null&&prev!==void 0&&prev.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return[...prev,...filteredData];});}).catch(err=>{antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error(err.response.data.message);});}},[debouncedSearchTermClient]);(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{onClientSearch();},[onClientSearch]);const[countries,setCountries]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);const getCountryList=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{countryModule.getAvailableRecords().then(res=>{if(res.data&&res.data.data){setCountries(res.data.data);}});},[countryModule]);const handleErrors=err=>{const error=(0,_helpers__WEBPACK_IMPORTED_MODULE_14__/* .errorHandler */ .r)(err);if(typeof error.message=="string"){setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{error:error.message}));}else{let errData=(0,_Atoms_ServerErrorHandler__WEBPACK_IMPORTED_MODULE_5__/* .HandleServerErrors */ .p)(error.message,[]);form.setFields(errData);setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{error:""}));}};const handleAlertClose=()=>{setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{error:""}));};const getDataBySlug=(0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(()=>{module.getRecordById(record).then(res=>{if(res.data&&res.data.data){var _res$data2,_res$data2$data;const type=res.data.data.type;const companyId=res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$data=_res$data2.data)===null||_res$data2$data===void 0?void 0:_res$data2$data.companyId;form.setFieldsValue((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},res.data.data),{},{type:type===1?_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.company:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.individual}));setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},res.data),{},{loading:false}));setClientType(type===1?_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.company:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq.individual);// get the organization data from the api
if(companyId){module.getRecordById(companyId).then(res=>{var _res$data3;setClients([res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data]);}).catch(err=>{antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error(err.response.data.message);});}}}).catch(err=>{handleErrors(err);});},[form,record,module]);(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{if(type==="edit"){setRecordData({loading:true});getDataBySlug();getCountryList();}else{form.resetFields();getCountryList();}},[]);const onFinish=formValues=>{setRecordData((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},recordData),{},{buttonLoading:true}));const{phoneCode,phone,status}=formValues,rest=(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .A)(formValues,_excluded);const finalStatus=status===_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.ACTIVE?_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.ACTIVE:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.INACTIVE;switch(type){case"edit":{if(updateClient===true){module.updateRecord((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},rest),{},{type:formValues.type,phoneCode:phoneCode&&phone?String(phoneCode):undefined,phone:phone?String(phone):undefined,status:finalStatus// Use enum value
}),record).then(res=>{reloadTableData();onCancel();setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));});}else{setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error("You don't have permission to update this record");}break;}case"new":{if(createClient===true){module.createRecord((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},rest),{},{type:formValues.type,phoneCode:phoneCode&&phone?String(phoneCode):undefined,phone:phone?String(phone):undefined,status:finalStatus// Use enum value
})).then(res=>{const{data}=res===null||res===void 0?void 0:res.data;reloadTableData();callback&&callback(data===null||data===void 0?void 0:data.id);onCancel();setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));}).catch(err=>{handleErrors(err);setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));});}else{setRecordData(prev=>(0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)((0,C_Users_Developer_datportal_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A)({},prev),{},{buttonLoading:false}));antd__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .Ay.error("You don't have permission to create this record");}break;}}};return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomModal */ .jo,{visible:openModal,closable:true,onCancel:onCancel,titleText:type==="edit"?"Edit Client":"Add New Client",showFooter:false,children:recordData!==null&&recordData!==void 0&&recordData.loading?/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Skeletons__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A,{items:3}):/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A,{className:_Common_styles_module_scss__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.form,onFinish:onFinish,form:form,children:[(recordData===null||recordData===void 0?void 0:recordData.error)&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomErrorAlert */ .WZ,{description:recordData===null||recordData===void 0?void 0:recordData.error,isClosable:true,onClose:handleAlertClose}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("label",{children:["Client Type",/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"type",rules:[{required:true,message:"Please select an option"}],children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_17__/* ["default"].Group */ .Ay.Group,{onChange:e=>{const value=e.target.value;setClientType(value);},value:clientType,children:Object.entries(_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .Ay,{value:value,children:(0,_helpers_common__WEBPACK_IMPORTED_MODULE_4__/* .capitalize */ .ZH)(key)},key);})})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"name",rules:[{required:true,message:"Please add a name"}],children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{size:"w100",label:"Name",asterisk:true,type:"text",placeHolder:"Enter client name"})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"address",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{size:"w100",label:"Address",type:"text"})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"email",rules:[{required:true,message:"Please add email"},{type:"email",message:"Please add valid email"}],children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{asterisk:true,size:"w100",label:"Email",type:"email"})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("label",{className:"font-size-sm",children:["Phone",/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"phone",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .A,{type:"number",addonBefore:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"phoneCode",style:{marginBottom:0},initialValue:"971",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{style:{width:98},placeholder:"Select phone code",defaultValue:"971",children:countries===null||countries===void 0?void 0:countries.map(item=>/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(Option,{value:item.phoneCode,children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:item.flag}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{className:"ml-1",children:"+".concat(item.phoneCode)})]}))})}),placeholder:"Enter phone number",controls:false})})]})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"taxRegistrationNumber",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{label:"Tax Registration Number",placeHolder:"Enter Tax RegistrationNumber Number",size:"w100"})})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"status",label:"Status",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A.Option,{value:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.ACTIVE,children:"Active"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A.Option,{value:_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientStatus */ .S2.INACTIVE,children:"Inactive"})]})}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"whatsapp",children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomInput */ .wi,{label:"WhatsApp Number",placeHolder:"Enter WhatsApp Number",size:"w100"})}),clientType===_helpers_commonEnums__WEBPACK_IMPORTED_MODULE_9__/* .ClientsType */ .nq['individual']&&/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A.Item,{name:"companyId",children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("label",{className:"font-size-sm",children:"Company"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,{allowClear:true,style:{width:"100%"},defaultValue:recordData===null||recordData===void 0?void 0:(_recordData$data=recordData.data)===null||_recordData$data===void 0?void 0:_recordData$data.companyId,placeholder:"Search for the company",className:"selectAntdCustom",onChange:value=>form.setFieldsValue({companyId:value}),showSearch:true,onSearch:value=>setSearchTermClient(value),optionFilterProp:"label",options:clients===null||clients===void 0?void 0:clients.map(item=>{return{label:item.name,value:item.id};}),notFoundContent:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(antd__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .A,{image:"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg",imageStyle:{height:100},description:/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("span",{children:"No data found, Please search for the company"})})})]})})]}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"d-flex justify-end",children:[/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomButton */ .Sv,{size:"normal",fontSize:"sm",onClick:onCancel,type:"plain",children:"Cancel"}),/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_Atoms__WEBPACK_IMPORTED_MODULE_0__/* .CustomButton */ .Sv,{type:"primary",size:"normal",fontSize:"sm",htmlType:"submit",loading:recordData===null||recordData===void 0?void 0:recordData.buttonLoading,children:type==="edit"?"Edit Client":"Add Client"})]})]})});};

/***/ }),

/***/ 97097:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ ClientModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
class ClientModule{constructor(){this.endPoint="client";/**Get all Client records
     * @param query - query params
     */this.getAllRecords=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.endPoint,{params:query});};/**Get Client record by id
     * @param id - Client id
     */this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};/**Find published client records
     * @param query - query params
     */this.findPublished=query=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/find-published"),{params:query});};/**Delete Client record
    * @param id - Client id
    */this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};/**Create new Client record
     * @param data - Client data
     */this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint,data);};/**Update Client record
    * @param data - Client data
    * @param id - Client id
    */this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data);};}}

/***/ }),

/***/ 83584:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ CountryModule)
/* harmony export */ });
/* harmony import */ var _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83365);
/* harmony import */ var _Common_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21073);
class CountryModule{constructor(){this.endPoint="country";this.allEndpoint="country/all";this.getAllRecords=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get(this.allEndpoint);};this.getAvailableRecords=()=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/available-country"));};this.getRecordById=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.get("".concat(this.endPoint,"/").concat(id));};this.deleteRecord=id=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.delete("".concat(this.endPoint,"/").concat(id));};this.createRecord=data=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.post(this.endPoint+"/",data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};this.updateRecord=(data,id)=>{return _services_axiosInstance__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.patch("".concat(this.endPoint,"/").concat(id),data,{headers:_Common_config__WEBPACK_IMPORTED_MODULE_1__/* .FormDataHeader */ .Y});};}}

/***/ })

}]);