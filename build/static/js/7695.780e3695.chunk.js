"use strict";
(self["webpackChunkdat_projects"] = self["webpackChunkdat_projects"] || []).push([[7695],{

/***/ 17042:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ Organisms_Quotations)
});

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(89379);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(9950);
// EXTERNAL MODULE: ./node_modules/antd/es/message/index.js + 1 modules
var message = __webpack_require__(92759);
// EXTERNAL MODULE: ./node_modules/antd/es/segmented/index.js + 2 modules
var segmented = __webpack_require__(84649);
// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 21 modules
var es = __webpack_require__(98341);
// EXTERNAL MODULE: ./src/Components/Templates/Layout/index.tsx + 28 modules
var Layout = __webpack_require__(81168);
// EXTERNAL MODULE: ./src/hooks/index.ts + 5 modules
var hooks = __webpack_require__(91970);
// EXTERNAL MODULE: ./src/Components/Atoms/index.tsx + 12 modules
var Atoms = __webpack_require__(9394);
// EXTERNAL MODULE: ./src/Components/Atoms/ErrorCodes/index.tsx + 1 modules
var ErrorCodes = __webpack_require__(36250);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/Card/index.tsx + 2 modules
var Card = __webpack_require__(50179);
// EXTERNAL MODULE: ./src/Modules/Quotation/permissions.ts
var Quotation_permissions = __webpack_require__(95700);
// EXTERNAL MODULE: ./src/Modules/Invoice/permissions.ts
var Invoice_permissions = __webpack_require__(92325);
// EXTERNAL MODULE: ./src/Modules/Quotation/index.ts
var Quotation = __webpack_require__(83480);
// EXTERNAL MODULE: ./src/Modules/Project/permissions.ts
var Project_permissions = __webpack_require__(31203);
// EXTERNAL MODULE: ./src/Modules/ProjectType/index.ts
var ProjectType = __webpack_require__(12975);
// EXTERNAL MODULE: ./src/Modules/Project/index.ts
var Project = __webpack_require__(50167);
// EXTERNAL MODULE: ./src/Modules/Client/index.ts
var Client = __webpack_require__(97097);
// EXTERNAL MODULE: ./src/helpers/common.ts
var common = __webpack_require__(88132);
// EXTERNAL MODULE: ./src/helpers/dateHandler.ts
var dateHandler = __webpack_require__(98933);
// EXTERNAL MODULE: ./src/helpers/useDebounce.ts
var useDebounce = __webpack_require__(28173);
// EXTERNAL MODULE: ./src/helpers/commonEnums.ts
var commonEnums = __webpack_require__(2360);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/Drawer/index.tsx + 3 modules
var Drawer = __webpack_require__(2352);
// EXTERNAL MODULE: ./src/Components/Atoms/CardShimmer/index.tsx + 1 modules
var CardShimmer = __webpack_require__(87031);
// EXTERNAL MODULE: ./src/Modules/User/index.ts
var User = __webpack_require__(47645);
// EXTERNAL MODULE: ./node_modules/antd/es/typography/index.js + 15 modules
var typography = __webpack_require__(30377);
// EXTERNAL MODULE: ./node_modules/antd/es/table/index.js + 96 modules
var table = __webpack_require__(41821);
// EXTERNAL MODULE: ./src/Components/Icons/index.tsx + 58 modules
var Icons = __webpack_require__(63668);
// EXTERNAL MODULE: ./src/Components/Organisms/Invoice/Drawer/index.tsx + 3 modules
var Invoice_Drawer = __webpack_require__(53822);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/Card/actions.tsx
var actions = __webpack_require__(46756);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/styles.module.scss
var styles_module = __webpack_require__(8313);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/quick-update.tsx
var quick_update = __webpack_require__(15459);
// EXTERNAL MODULE: ./src/Components/Organisms/Quotations/new-project.tsx
var new_project = __webpack_require__(88374);
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(44414);
;// ./src/Components/Organisms/Quotations/table-colum.tsx
const{Paragraph}=typography/* default */.A;const QuotationsTable=props=>{const{data,permissions,setQuotationDrawer,setNewProject,newProject}=props;const{onRefresh,allQuotation}=data;const module=(0,react.useMemo)(()=>new Quotation/* QuotationModule */.v(),[]);// Invoice Drawer State
const{drawer,setDrawer}=(0,hooks/* useInvoiceDrawer */.C9)();// Quick Update Modal State
const[quickUpdate,setQuickUpdate]=(0,react.useState)({open:false,quoteId:0,initialProjectId:0,initialSubmissionById:0,initialProjectTypeId:0});/** Function to delete a lead */const onDelete=id=>{if(permissions.deleteQuotation===true){module.deleteRecord(id).then(()=>onRefresh()).catch(err=>{const errorMessages=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessages||"Something went wrong, please try again later.");});}else{message/* default */.Ay.error("You don't have permission to delete this quotation, Please contact your admin");}};const onEdit=record=>{if(permissions.updateQuotation===false){message/* default */.Ay.error("You don't have permission to update record");return;}setQuotationDrawer(()=>{var _record$Lead,_record$Lead$Submissi;return{open:true,type:"edit",quoteId:record===null||record===void 0?void 0:record.id,leadId:record===null||record===void 0?void 0:record.leadId,submissionById:record===null||record===void 0?void 0:(_record$Lead=record.Lead)===null||_record$Lead===void 0?void 0:(_record$Lead$Submissi=_record$Lead.SubmissionBy)===null||_record$Lead$Submissi===void 0?void 0:_record$Lead$Submissi.id};});};const columns=[{title:'Quote Number',dataIndex:'quoteNumber',key:'quoteNumber',render:(text,record)=>/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{onClick:()=>setQuotationDrawer(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{open:true,quoteId:record===null||record===void 0?void 0:record.id,type:"preview",quotation:record})),color:"dark-main",size:"sm",className:styles_module/* default */.A.quotation_item_header_title,children:text||"No Quote Number"})},{title:'Amount',dataIndex:'total',key:'total',render:amount=>(0,common/* formatCurrency */.vv)(amount||0)},{title:'Client Name',dataIndex:['Lead','Client','name'],key:'clientName',render:name=>/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"sm",children:name})},{title:'Client Email',dataIndex:['Lead','Client','email'],key:'clientEmail',render:email=>/*#__PURE__*/(0,jsx_runtime.jsx)(Paragraph,{ellipsis:{rows:1,expandable:false},copyable:{text:email},className:"font-size-xs color-dark-sub",children:email})},{title:'Client Phone',dataIndex:['Lead','Client','phone'],key:'clientPhone',render:(phone,record)=>phone!=="undefined"&&phone&&/*#__PURE__*/(0,jsx_runtime.jsx)(Paragraph,{ellipsis:{rows:1,expandable:false},copyable:{text:"".concat(record.Lead.Client.phoneCode).concat(phone)},className:"font-size-xs color-dark-sub",children:"+".concat(record.Lead.Client.phoneCode).concat(phone)})},{title:'Dates',key:'dates',render:record=>/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(record===null||record===void 0?void 0:record.sentDate)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* CalenderIcon */.e$,{className:"mr-2",width:13}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"xs",children:"Sent: ".concat((0,dateHandler/* convertDate */.ic)(record.sentDate,"dd MM yy"))||0})]}),(record===null||record===void 0?void 0:record.addedDate)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* CalenderIcon */.e$,{className:"mr-2",width:13}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"xs",children:"Created: ".concat((0,dateHandler/* convertDate */.ic)(record.addedDate,"dd MM yy"))||0})]}),(record===null||record===void 0?void 0:record.modifiedDate)&&/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{className:"d-flex align-center",children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Icons/* CalenderIcon */.e$,{className:"mr-2",width:13}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Typography */.o5,{color:"dark-sub",size:"xs",children:"Modified: ".concat((0,dateHandler/* convertDate */.ic)(record.modifiedDate,"dd MM yy"))||0})]})]})},{title:'Actions',key:'actions',render:item=>{console.log('Rendering ActionsDropdown for item:',item);return/*#__PURE__*/(0,jsx_runtime.jsx)(actions/* default */.A,{item:item,onDelete:()=>onDelete(item.id),onEdit:()=>onEdit(item),setNewProject:setNewProject,setQuickUpdate:setQuickUpdate});}}];return/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(allQuotation===null||allQuotation===void 0?void 0:allQuotation.length)===0&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomEmpty */.ZX,{description:"No quotation found",className:"my-5"}),/*#__PURE__*/(0,jsx_runtime.jsx)(table/* default */.A,{columns:columns,dataSource:allQuotation,rowKey:"id",pagination:false,className:styles_module/* default */.A.quotations_table}),drawer.open&&/*#__PURE__*/(0,jsx_runtime.jsx)(Invoice_Drawer/* default */.A,{drawer:drawer,setDrawer:setDrawer,onRefresh:onRefresh,permissions:permissions}),(quickUpdate===null||quickUpdate===void 0?void 0:quickUpdate.open)&&/*#__PURE__*/(0,jsx_runtime.jsx)(quick_update/* default */.A,{open:quickUpdate.open,quickUpdate:quickUpdate,onClose:()=>{setQuickUpdate({open:false,quoteId:0,initialProjectId:0,initialSubmissionById:0,initialProjectTypeId:0});onRefresh();}}),(newProject===null||newProject===void 0?void 0:newProject.isOpen)&&/*#__PURE__*/(0,jsx_runtime.jsx)(new_project/* default */.A,{setNewProject:setNewProject,newProject:newProject,onRefresh:onRefresh,permissions:permissions})]});};/* harmony default export */ const table_colum = (QuotationsTable);
;// ./src/Components/Organisms/Quotations/index.tsx
const breadCrumbsData=[{text:"Home",isLink:true,path:"/"},{isLink:false,text:"Quotations"}];const Quotations=()=>{var _clients$data,_assignedTo$data,_projectTypes$data,_projects$data;// available permissions for the properties page
const permissionSlug=(0,common/* getPermissionSlugs */.AH)(Quotation_permissions/* QuotationPermissionsEnum */.Y);const invoicePermissionSlug=(0,common/* getPermissionSlugs */.AH)(Invoice_permissions/* InvoicePermissionsEnum */.x);const projectPermissionSlug=(0,common/* getPermissionSlugs */.AH)(Project_permissions/* ProjectPermissionsEnum */.l);const{userPermissions}=(0,es/* useSelector */.d4)(state=>state.usersReducer);const permissions=userPermissions;const{readQuotation,createQuotation}=permissions;const module=(0,react.useMemo)(()=>new Quotation/* QuotationModule */.v(),[]);const projectTypeModule=(0,react.useMemo)(()=>new ProjectType/* ProjectTypeModule */.g(),[]);const projectModule=(0,react.useMemo)(()=>new Project/* ProjectModule */.K(),[]);const clientModule=(0,react.useMemo)(()=>new Client/* ClientModule */.u(),[]);const userModule=(0,react.useMemo)(()=>new User/* UserModule */.U(),[]);const[projectViewAs,setProjectViewAs]=(0,react.useState)(()=>{const viewAs=localStorage.getItem("projectViewAs");if(viewAs==="table"){return"table";}return"grid";});// Status Filters
const statusValues={active:[commonEnums/* QuotationStatus */.xP.New,commonEnums/* QuotationStatus */.xP.Sent],confirmed:[commonEnums/* QuotationStatus */.xP.Confirmed],rejected:[commonEnums/* QuotationStatus */.xP.Rejected],draft:[commonEnums/* QuotationStatus */.xP.New],draftn:[commonEnums/* QuotationStatus */.xP.Pending],revised:[commonEnums/* QuotationStatus */.xP.Revised]};const{data,onRefresh,meta,loading}=(0,hooks/* useFetchData */.Gs)({method:module.getAllRecords,initialQuery:{__status:statusValues.active}});const{drawer,setDrawer}=(0,hooks/* useQuotationDrawer */.V1)();const[selectedFilters,setSelectedFilters]=(0,react.useState)({dateRange:[""],__status:statusValues.active});const[reset,setReset]=(0,react.useState)(false);const[excelData,setExcelData]=(0,react.useState)([]);// Create Project Modal State
const{newProject,setNewProject}=(0,hooks/* useNewProjectModal */.QZ)();// Key search
const[keySearchTerm,setKeySearchTerm]=(0,react.useState)();// Search Debounce
const debouncedKeySearchTerm=(0,useDebounce/* useDebounce */.d)(keySearchTerm,500);// client search term
const[clientTerm,setClientTerm]=(0,react.useState)("");// Search Debounce
const debouncedClientTerm=(0,useDebounce/* useDebounce */.d)(clientTerm,500);// project type search term
const[projectTypeTerm,setProjectTypeTerm]=(0,react.useState)("");// Search Debounce
const debouncedProjectTypeTerm=(0,useDebounce/* useDebounce */.d)(projectTypeTerm,500);// project search term
const[projectTerm,setProjectTerm]=(0,react.useState)("");// Search Debounce
const debouncedProjectTerm=(0,useDebounce/* useDebounce */.d)(projectTerm,500);// assigned to search term
const[assignedToTerm,setAssignedToTerm]=(0,react.useState)("");// Search Debounce
const debouncedAssignedToTerm=(0,useDebounce/* useDebounce */.d)(assignedToTerm,500);const[clients,setClients]=(0,react.useState)({data:[],loading:false});const[projectTypes,setProjectTypes]=(0,react.useState)({data:[],loading:false});const[projects,setProjects]=(0,react.useState)({data:[],loading:false});const[assignedTo,setAssignedTo]=(0,react.useState)({data:[],loading:false});// headers for the excel export
const headers=[{label:"Name",key:"name"},{label:"Email",key:"email"}];const onSelected=event=>{const{name,value}=event===null||event===void 0?void 0:event.target;const fieldsNames=["clientId","projectTypeId","projectId","assignedToId"];if(fieldsNames.includes(name)){const isValidNumber=(0,common/* isNumber */.Et)(value);if(!isValidNumber){let label="";switch(name){case"clientId":label="Client ID";break;case"projectTypeId":label="Project Type ID";break;case"projectId":label="Project ID";break;case"assignedToId":label="Assigned To ID";break;}return message/* default */.Ay.error("".concat(label," should be a number"));}}// set the selected value in the state
setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{[name]:value}));};const onReset=(0,react.useCallback)((name,value)=>{if(name){setReset(true);setSelectedFilters((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},selectedFilters),{},{[name]:value}));}},[selectedFilters]);const onAddNewClick=()=>{if(createQuotation===false){message/* default */.Ay.error("You don't have permission to create new record");return;}setDrawer((0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},drawer),{},{open:true,type:"create"}));};const onSearchChange=event=>{const{value}=event.currentTarget;setKeySearchTerm(value);onSelected(event);};const onUpdate=(0,react.useCallback)(query=>{var _selectedFilters$date,_selectedFilters$date2;const fromDateString=((_selectedFilters$date=selectedFilters.dateRange)===null||_selectedFilters$date===void 0?void 0:_selectedFilters$date[0])||"";const toDateString=((_selectedFilters$date2=selectedFilters.dateRange)===null||_selectedFilters$date2===void 0?void 0:_selectedFilters$date2[1])||"";const fromDate=fromDateString?(0,dateHandler/* convertDate */.ic)(fromDateString,"yy-mm-dd"):undefined;const toDate=toDateString?(0,dateHandler/* convertDate */.ic)(toDateString,"yy-mm-dd"):undefined;const data=(0,objectSpread2/* default */.A)({fromDate:fromDate,toDate:toDate,__status:selectedFilters.__status||undefined,clientId:selectedFilters.clientId||undefined,projectTypeId:selectedFilters.projectTypeId||undefined,projectId:selectedFilters.projectId||undefined,quoteNumber:debouncedKeySearchTerm||undefined,assignedToId:selectedFilters.assignedToId||undefined},query);// get the data from the api
onRefresh(data);},[selectedFilters]);const onPaginationChange=(page,pageSize)=>onUpdate({page,perPage:pageSize});/** Get the search result for the client */const GetSearchClients=(0,react.useCallback)(()=>{if(debouncedClientTerm){setClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));clientModule.findPublished({name:debouncedClientTerm}).then(res=>{var _res$data;const data=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data;setClients(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data;return!(prev!==null&&prev!==void 0&&(_prev$data=prev.data)!==null&&_prev$data!==void 0&&_prev$data.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setClients(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedClientTerm]);/** Get the search result for the project type */const GetSearchProjectTypes=(0,react.useCallback)(()=>{if(debouncedProjectTypeTerm){setProjectTypes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));projectTypeModule.getPublishRecords({title:debouncedProjectTypeTerm}).then(res=>{var _res$data2;const data=res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data;setProjectTypes(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data2;return!(prev!==null&&prev!==void 0&&(_prev$data2=prev.data)!==null&&_prev$data2!==void 0&&_prev$data2.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setProjectTypes(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedProjectTypeTerm]);/** Get the search result for the project */const GetSearchProjects=(0,react.useCallback)(()=>{if(debouncedProjectTerm){setProjects(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));projectModule.getAllRecords({title:debouncedProjectTerm}).then(res=>{var _res$data3;const data=res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data;setProjects(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data3;return!(prev!==null&&prev!==void 0&&(_prev$data3=prev.data)!==null&&_prev$data3!==void 0&&_prev$data3.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setProjects(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedProjectTerm]);/** Get the search result for the assigned to */const GetSearchAssignedTo=(0,react.useCallback)(()=>{if(debouncedAssignedToTerm){setAssignedTo(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:true}));userModule.getAllRecords({name:debouncedAssignedToTerm}).then(res=>{var _res$data4;const data=res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.data;setAssignedTo(prev=>{// if the data is already present in the state, then don't add it again
const filteredData=data===null||data===void 0?void 0:data.filter(item=>{var _prev$data4;return!(prev!==null&&prev!==void 0&&(_prev$data4=prev.data)!==null&&_prev$data4!==void 0&&_prev$data4.find(prevItem=>prevItem.id===item.id));});// add the new data to the existing data
return{data:[...prev.data,...filteredData],loading:false};});}).catch(err=>{const errorMessage=(0,common/* handleError */.H4)(err);message/* default */.Ay.error(errorMessage||"Something went wrong, please try again later.");setAssignedTo(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{loading:false}));});}},[debouncedAssignedToTerm]);(0,react.useEffect)(()=>{if(reset){onUpdate();}// after 2 seconds set reset clicked state to false
const timer=setTimeout(()=>{setReset(false);},2000);return()=>clearTimeout(timer);},[reset,selectedFilters,onUpdate]);const getExcelData=(0,react.useCallback)(()=>{if(data&&data.length>0){const _data=data===null||data===void 0?void 0:data.map(item=>{return{};});setExcelData(_data);}},[data]);(0,react.useEffect)(()=>{if(debouncedKeySearchTerm!==undefined){onUpdate({quoteNumber:debouncedKeySearchTerm});}else if(debouncedKeySearchTerm===""){onUpdate({quoteNumber:undefined});}},[debouncedKeySearchTerm]);(0,react.useEffect)(()=>{getExcelData();},[getExcelData]);(0,react.useEffect)(()=>{GetSearchClients();},[GetSearchClients]);(0,react.useEffect)(()=>{GetSearchProjectTypes();},[GetSearchProjectTypes]);(0,react.useEffect)(()=>{GetSearchProjects();},[GetSearchProjects]);(0,react.useEffect)(()=>{GetSearchAssignedTo();},[GetSearchAssignedTo]);const segmentedOptions=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Confirmed",value:"confirmed"},{label:"Draft",value:"draft"},{label:"Revised",value:"revised"},{label:"Rejected",value:"rejected"},{label:"Pending Draft",value:"draftn"}];return/*#__PURE__*/(0,jsx_runtime.jsxs)(Layout/* default */.A,{permissionSlug:[...permissionSlug,...invoicePermissionSlug,...projectPermissionSlug],children:[/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* PageHeader */.zY,{heading:"Quotations",breadCrumbData:breadCrumbsData,showAdd:!!createQuotation,buttonText:"Add Quotation",onButtonClick:onAddNewClick,positionChildren:"new-line",filters:readQuotation?/*#__PURE__*/(0,jsx_runtime.jsxs)("div",{children:[/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomInput */.wi,{name:"name",placeHolder:"Search by quotation id",onChange:onSearchChange,value:keySearchTerm,style:{maxWidth:200}})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{overflow:"auto"},children:/*#__PURE__*/(0,jsx_runtime.jsx)(segmented/* default */.A,{size:"middle",defaultValue:"active",options:segmentedOptions.map(item=>{return (0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},item),{},{title:item.label,value:item.value});}),style:{fontSize:"var(--font-size-sm)"},onChange:value=>{if(value==="all"){onReset("__status","");setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{__status:[]}));}else{const _value=value;onUpdate({__status:statusValues[_value]});setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{__status:statusValues[_value]}));}}})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Client",name:"clientId",withSearch:true,options:clients===null||clients===void 0?void 0:(_clients$data=clients.data)===null||_clients$data===void 0?void 0:_clients$data.map(item=>{return{label:item.name,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.clientId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.clientId):"",onReset:()=>{onReset("clientId",0);// reset the search term
setClientTerm("");},onUpdate:onUpdate// START: For search
,loading:clients===null||clients===void 0?void 0:clients.loading,searchTerm:clientTerm,onSearch:event=>setClientTerm(event.currentTarget.value)// END: For search
})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Assigned To",name:"assignedToId",withSearch:true,options:assignedTo===null||assignedTo===void 0?void 0:(_assignedTo$data=assignedTo.data)===null||_assignedTo$data===void 0?void 0:_assignedTo$data.map(item=>{return{label:"".concat(item.firstName," ").concat(item.lastName),value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.assignedToId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.assignedToId):"",onReset:()=>{onReset("assignedToId",0);// reset the search term
setAssignedToTerm("");},onUpdate:onUpdate// START: For search
,loading:assignedTo===null||assignedTo===void 0?void 0:assignedTo.loading,searchTerm:assignedToTerm,onSearch:event=>setAssignedToTerm(event.currentTarget.value)// END: For search
})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"datepicker",label:"Date",name:"dateRange",onChange:value=>setSelectedFilters(prev=>(0,objectSpread2/* default */.A)((0,objectSpread2/* default */.A)({},prev),{},{dateRange:value})),onReset:()=>onReset("dateRange",[]),onUpdate:onUpdate})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Project Type",name:"projectTypeId",withSearch:true,options:projectTypes===null||projectTypes===void 0?void 0:(_projectTypes$data=projectTypes.data)===null||_projectTypes$data===void 0?void 0:_projectTypes$data.map(item=>{return{label:item.title,value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectTypeId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectTypeId):"",onReset:()=>{onReset("projectTypeId",0);// reset the search term
setProjectTypeTerm("");},onUpdate:onUpdate// START: For search
,loading:projectTypes===null||projectTypes===void 0?void 0:projectTypes.loading,searchTerm:projectTypeTerm,onSearch:event=>setProjectTypeTerm(event.currentTarget.value)// END: For search
})}),/*#__PURE__*/(0,jsx_runtime.jsx)("div",{children:/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* CustomFilter */.YH,{type:"radio",label:"Project",name:"projectId",withSearch:true,options:projects===null||projects===void 0?void 0:(_projects$data=projects.data)===null||_projects$data===void 0?void 0:_projects$data.map(item=>{return{label:"".concat(item.referenceNumber," | ").concat(item.title),value:"".concat(item.id)};}),onChange:onSelected,value:Number(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectId)>0?String(selectedFilters===null||selectedFilters===void 0?void 0:selectedFilters.projectId):"",onReset:()=>{onReset("projectId",0);// reset the search term
setProjectTerm("");},onUpdate:onUpdate// START: For search
,loading:projects===null||projects===void 0?void 0:projects.loading,searchTerm:projectTerm,onSearch:event=>setProjectTerm(event.currentTarget.value)// END: For search
})}),/*#__PURE__*/(0,jsx_runtime.jsx)(segmented/* default */.A,{options:[{label:"Grid View",value:"grid"},{label:"Table View",value:"table"}],value:projectViewAs,onChange:value=>{setProjectViewAs(value);localStorage.setItem("projectViewAs",value);}})]}):null,excelExport:readQuotation===true&&(data===null||data===void 0?void 0:data.length)>0&&/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* ExcelExport */.yh,{fileName:"Quotations",headers:headers,data:excelData,icon:/*#__PURE__*/(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",className:"mr-1",children:/*#__PURE__*/(0,jsx_runtime.jsx)("path",{fill:"#42526E",d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2zm1.06 10.33c0 .41-.34.75-.75.75s-.75-.34-.75-.75V9.31l-7.72 7.72c-.15.15-.34.22-.53.22s-.38-.07-.53-.22a.754.754 0 010-1.06l7.72-7.72h-3.02c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h4.83c.41 0 .75.34.75.75v4.83z"})})})}),!data&&loading&&/*#__PURE__*/(0,jsx_runtime.jsx)("div",{style:{display:"flex",flexWrap:"wrap",width:"100%",gap:10},children:Array(6).fill(0).map((_,index)=>/*#__PURE__*/(0,jsx_runtime.jsx)(CardShimmer/* CardShimmer */.S,{},"shimmerItem-".concat(index)))}),readQuotation===true&&/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[projectViewAs==="grid"?/*#__PURE__*/(0,jsx_runtime.jsx)(Card/* default */.A,{permissions:permissions,data:{allQuotation:data,onRefresh:()=>onUpdate({perPage:(meta===null||meta===void 0?void 0:meta.perPage)||10,page:(meta===null||meta===void 0?void 0:meta.page)||1})},quotationDrawer:drawer,setQuotationDrawer:setDrawer,setNewProject:setNewProject,newProject:newProject}):/*#__PURE__*/(0,jsx_runtime.jsx)(table_colum,{permissions:permissions,data:{allQuotation:data,onRefresh:()=>onUpdate({perPage:(meta===null||meta===void 0?void 0:meta.perPage)||10,page:(meta===null||meta===void 0?void 0:meta.page)||1})},quotationDrawer:drawer,setQuotationDrawer:setDrawer,setNewProject:setNewProject,newProject:newProject}),/*#__PURE__*/(0,jsx_runtime.jsx)(Atoms/* Pagination */.dK,{total:meta===null||meta===void 0?void 0:meta.total,current:meta===null||meta===void 0?void 0:meta.page,defaultPageSize:(meta===null||meta===void 0?void 0:meta.pageCount)||10,pageSizeOptions:[10,20,50,100],onChange:onPaginationChange})]}),readQuotation===false&&/*#__PURE__*/(0,jsx_runtime.jsx)(ErrorCodes/* ErrorCode403 */.$t,{mainMessage:"You don't have permission to view this data"}),(drawer===null||drawer===void 0?void 0:drawer.open)&&/*#__PURE__*/(0,jsx_runtime.jsx)(Drawer/* default */.A,{drawer:drawer,setDrawer:setDrawer,permissions:permissions,onRefresh:onRefresh,setNewProject:setNewProject})]});};/* harmony default export */ const Organisms_Quotations = (Quotations);

/***/ })

}]);